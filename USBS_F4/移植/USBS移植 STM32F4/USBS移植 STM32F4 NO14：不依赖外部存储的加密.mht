From: WizBrother WizMime<support@wizbrother.com>
Subject: =?gb2312?B?VVNCU9LG1rIgU1RNMzJGNCBOTzE0o7qyu9LAwLXN4rK/tOa0orXEvNPD3A==?=
Date: Date: Fri, 19 Jun 2015 01:03:21 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0174996000.421"

This is a multi-part message in MIME format.

------=_Next_Part_0174996000.421
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0058332000.716"


------=_Next_Part_0058332000.716
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0058332000.716
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">=0A=
<HTML><HEAD>=0D=0A<meta http-equiv=3D"Content-Type" content=3D"te=
xt/html; charset=3Dgb2312"><TITLE>USBS=D2=C6=D6=B2 STM32F4 NO14=A3=
=BA=B2=BB=D2=C0=C0=B5=CD=E2=B2=BF=B4=E6=B4=A2=B5=C4=BC=D3=C3=DC</=
TITLE>=0A=0A<STYLE type=3Dtext/css>=0Abody, p, th, td, li, ul, ol=
, h1, h2, h3, h4, h5, h6, pre=0A{=0A	font-family: =CB=CE=CC=E5;=0A=
	line-height: 1.4;=0A}=0Abody, p, th, td, li, ul, ol, pre=0A{=0A=09=
font-size: 12px;=0A}=0A</STYLE>=0A=0A<META content=3D"MSHTML 6.00=
.2900.6550" name=3DGENERATOR></HEAD>=0A<BODY><FONT face=3D"Times=20=
New Roman"><FONT size=3D7><STRONG>USBS=D2=C6=D6=B2 STM32F4 =0ANO1=
4=A3=BA=B2=BB=D2=C0=C0=B5=CD=E2=B2=BF=B4=E6=B4=A2=B5=C4=BC=D3=C3=DC=
<BR></STRONG></FONT><FONT =0Asize=3D3>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A--------<SPAN class=3D=
Apple-converted-space>&nbsp;</SPAN></FONT></FONT><SPAN =0Astyle=3D=
"FONT-FAMILY: =CB=CE=CC=E5"><FONT size=3D3>=D7=AA=D4=D8=C7=EB=D7=A2=
=C3=F7=B3=F6=B4=A6<BR><FONT =0Aface=3D"Times New Roman">&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A----=
----<SPAN class=3DApple-converted-space>&nbsp;=B8=FC=B6=E0=B1=CA=BC=
=C7=C7=EB=B7=C3=CE=CA=A3=BA<A =0Ahref=3D"http://merafour.blog.163=
.com/">merafour.blog.163.com</A>&nbsp;</SPAN></FONT></FONT></SPAN=
> =0A=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WOR=
D-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: non=
e; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETT=
ER-SPACING: normal; orphans: auto; widows: auto; webkit-text-stro=
ke-width: 0px"><FONT =0Asize=3D3><SPAN style=3D"FONT-FAMILY: =CB=CE=
=CC=E5"><SPAN lang=3DEN-US><FONT =0Aface=3D"Times New Roman">&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A=
</FONT></SPAN></SPAN><SPAN lang=3DEN-US><FONT face=3D"Times New R=
oman">-------- =0A2015-6-18.</FONT></SPAN><SPAN style=3D"FONT-FAM=
ILY: =CB=CE=CC=E5">=C0=E4=D4=C2=D7=B7=B7=E7</SPAN><SPAN =0Alang=3D=
EN-US><FONT face=3D"Times New Roman"></FONT></SPAN></FONT></P>=0A=
<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACIN=
G: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR=
: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACI=
NG: normal; orphans: auto; widows: auto; webkit-text-stroke-width=
: 0px"><FONT =0Asize=3D3><SPAN lang=3DEN-US><FONT =0Aface=3D"Time=
s New Roman"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;<SPAN =0Aclass=3DApple-converted-space>&nbsp;=
</SPAN></SPAN>-------- =0Aemail</FONT></SPAN><SPAN style=3D"FONT-=
FAMILY: =CB=CE=CC=E5">=A3=BA</SPAN><SPAN lang=3DEN-US><FONT =0Afa=
ce=3D"Times New Roman"><A =0Ahref=3D"mailto:merafour@163.com">mer=
afour@163.com</A><SPAN =0Aclass=3DApple-converted-space>&nbsp;</S=
PAN></FONT></SPAN></FONT><BR></P>=0A<HR>=0A=0A<P class=3DMsoNorma=
l =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px; FONT: 12px/=
16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-=
INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans=
: auto; widows: auto; webkit-text-stroke-width: 0px"><BR><FONT =0A=
color=3D#ff0000>&nbsp;&nbsp;&nbsp; <STRONG><SPAN id=3Dwiz_font_si=
ze_span_25612281 =0Astyle=3D"FONT-SIZE: 16pt"><STRONG>USBS</STRON=
G></SPAN></STRONG>=D7=EE=B3=F5=CA=C7=B1=CA=D5=DF=BB=F9=D3=DA =0AS=
TM32F103=CF=B5=C1=D0=BF=AA=B7=A2=B3=F6=C0=B4=B5=C4=D2=BB=B8=F6 =0A=
bootloader=A3=AC=CD=A8=B9=FD=B0=D1=C9=E8=B1=B8=D7=F6=B3=C9=D2=BB=B8=
=F6USB=BD=D3=BF=DA=B5=C4=B4=E6=B4=A2=C9=E8=B1=B8=BC=B4U=C5=CC=B4=D3=
=B6=F8=B0=DA=CD=D1=D2=D4=CD=F9=C9=FD=BC=B6=B9=CC=BC=FE=B9=FD=B3=CC=
=D6=D0=CB=F9=D0=E8=D2=AA=B5=C4=C9=CF=CE=BB=BB=FA=B8=FA=C7=FD=B6=AF=
(=BC=B4=C3=E2=C7=FD)=A1=A3USBS=C8=AB=B3=C6=CA=C7=A3=BA"USB =0ASto=
rage"=A3=AC=BE=DF=D3=D0=D2=BB=CF=C2=CC=D8=B5=E3=A3=BA<BR><BR>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =D2=BB=A1=A2=D6=BB=D2=AA=C4=
=E3=B5=C4=B2=D9=D7=F7=CF=B5=CD=B3=D6=A7=B3=D6 =0AU=C5=CC=D4=AD=D4=
=F2=C9=CF=B6=BC=BF=C9=D2=D4=CA=B9=D3=C3=A3=AC=C4=BF=C7=B0=D2=D1=BE=
=AD=B2=E2=CA=D4=C1=CB =0AWindows=A1=A2Ubuntu=B8=FA=C6=BB=B9=FB=A3=
=BB<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =B6=FE=A1=A2=BF=
=C9=CD=A8=B9=FD =0APC=B6=CB=C8=ED=BC=FE=C5=E4=D6=C3=CB=F9=CA=B9=D3=
=C3=B5=C4 IO=B2=A2=C9=E8=D6=C3=C6=E4=D3=E0 IO=B5=C4=C4=AC=C8=CF=CA=
=E4=B3=F6=A3=AC=D2=B2=BE=CD=CA=C7=CB=B5=BC=EC=B2=E2 IO=B8=FA LED=D6=
=B8=CA=BE =0AIO=D3=C3=BB=A7=BF=C9=D2=D4=D7=D4=B6=A8=D2=E5=A3=BB<B=
R>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =C8=FD=A1=A2=D7=D4=B4=
=F8=B2=BB=D2=C0=C0=B5=CD=E2=B2=BF EEPROM=B5=C4=BC=D3=C3=DC=CB=E3=B7=
=A8=A3=AC =0A32B=BC=D3=C3=DC=CA=FD=BE=DD=C8=B7=B1=A3=B3=CC=D0=F2=B6=
=C1=B5=BD=C1=ED=CD=E2=D2=BB=BF=C5 IC=C9=CF=B2=BB=C4=DC=D4=CB=D0=D0=
=A3=BB<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =CB=C4=A1=A2=
=CE=AA =0AApp=CC=E1=B9=A9=B5=A5=B6=C0=B5=C4=BC=D3=C3=DC=CB=E3=B7=A8=
(32B)=A3=AC=D3=C3=BB=A7=BF=C9=CD=A8=B9=FD PC=C8=ED=BC=FE=C9=E8=D6=
=C3=BC=D3=C3=DC "licence"=A1=A3</FONT><BR><BR>&nbsp;&nbsp;&nbsp;=20=
=0A<STRONG><SPAN id=3Dwiz_font_size_span_17581296 =0Astyle=3D"FON=
T-SIZE: 16pt"><STRONG>=C9=CF</STRONG></SPAN></STRONG>=D2=BB=D5=C2=
=CE=D2=C3=C7=D2=D1=BE=AD=C8=C3=CE=D2=C3=C7=B5=C4=B3=CC=D0=F2=D4=DA=
 =0ASRAM=D4=CB=D0=D0=C1=CB=A3=AC=C4=C7=C3=B4=CF=D6=D4=DA=CE=D2=C3=
=C7=BE=CD=C0=B4=CA=B5=CF=D6=A1=A3<BR><BR>&nbsp;&nbsp;&nbsp; <SPAN=
 =0Aid=3Dwiz_font_size_span_28458765 =0Astyle=3D"FONT-SIZE: 16pt"=
><STRONG>=CD=AC</STRONG></SPAN>=D1=F9=BD=AB=C9=CF=D2=BB=B2=BD=B5=C4=
=D4=B4=C2=EB=BF=BD=B1=B4=D2=BB=B7=DD=A3=AC=B2=A2=C3=FC=C3=FB=CE=AA=
=A3=BAUSBS_V0.14.21=A1=A3<BR><BR>&nbsp;&nbsp;&nbsp; =0A=C8=BB=BA=F3=
=D4=DA USBS=C4=BF=C2=BC=CF=C2=D4=F6=BC=D3=C8=FD=B8=F6=CE=C4=BC=FE=
=A3=BA EraseCode.c=A1=A2EraseCode.h=A1=A2match.h=A3=BA<BR></P>=0A=
<DIV =0Astyle=3D"BORDER-RIGHT: black 1px solid; PADDING-RIGHT: 3p=
x; BORDER-TOP: black 1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12p=
x; MARGIN-LEFT: auto; BORDER-LEFT: black 1px solid; COLOR: black;=
 MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER-BOTTOM: black 1px s=
olid; FONT-FAMILY: Courier New; BACKGROUND-COLOR: window; TEXT-AL=
IGN: left; 3px: "><FONT =0Acolor=3D#008000>// match.h</FONT><BR>#=
<FONT color=3D#0000ff><B>include</B></FONT> =0A<FONT color=3D#333=
399>&lt;</FONT>stdint.h<FONT color=3D#333399>&gt;</FONT><BR>#<FON=
T =0Acolor=3D#0000ff><B>include</B></FONT> <FONT color=3D#333399>=
&lt;</FONT>stdio.h<FONT =0Acolor=3D#333399>&gt;</FONT><BR><FONT c=
olor=3D#008000>//#include =0A"stm32f10x.h"</FONT><BR>#<FONT color=
=3D#0000ff><B>include</B></FONT> <FONT =0Acolor=3D#ff00bf>"stm32f=
4xx.h"</FONT>&nbsp;<BR>#<FONT =0Acolor=3D#0000ff><B>define</B></F=
ONT> =0AUID0&nbsp;&nbsp;&nbsp;&nbsp;(0x35fd84edU)<BR>#<FONT =0Aco=
lor=3D#0000ff><B>define</B></FONT> =0AUID1&nbsp;&nbsp;&nbsp;&nbsp=
;(0x4ba34568U)<BR>#<FONT =0Acolor=3D#0000ff><B>define</B></FONT>=20=
=0AUID2&nbsp;&nbsp;&nbsp;&nbsp;(0xadc24e89U)<BR><FONT color=3D#00=
8000>//#define =0AUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0xa366db89U)<=
/FONT><BR>__inline <FONT =0Acolor=3D#0000ff><B>static</B></FONT>=20=
<FONT color=3D#0000ff><B>void</B></FONT> =0Apasswd_id(uint32_t si=
gn[<FONT color=3D#6e00aa>8</FONT>], uint32_t uid[<FONT =0Acolor=3D=
#6e00aa>3</FONT>])&nbsp;&nbsp;<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;si=
gn[<FONT =0Acolor=3D#6e00aa>0</FONT>] <FONT color=3D#333399>=3D</=
FONT> (uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]<FONT color=3D#33339=
9>&amp;</FONT>uid[<FONT =0Acolor=3D#6e00aa>1</FONT>])<FONT color=3D=
#333399>|</FONT>((<FONT =0Acolor=3D#333399>~</FONT>uid[<FONT colo=
r=3D#6e00aa>0</FONT>])<FONT =0Acolor=3D#333399>&amp;</FONT>uid[<F=
ONT =0Acolor=3D#6e00aa>2</FONT>]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;sig=
n[<FONT =0Acolor=3D#6e00aa>1</FONT>] <FONT color=3D#333399>=3D</F=
ONT> (uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]<FONT color=3D#333399=
>&amp;</FONT>uid[<FONT =0Acolor=3D#6e00aa>2</FONT>])<FONT color=3D=
#333399>|</FONT>(uid[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT colo=
r=3D#333399>&amp;</FONT>(<FONT =0Acolor=3D#333399>~</FONT>uid[<FO=
NT =0Acolor=3D#6e00aa>2</FONT>]));<BR>&nbsp;&nbsp;&nbsp;&nbsp;sig=
n[<FONT =0Acolor=3D#6e00aa>2</FONT>] <FONT color=3D#333399>=3D</F=
ONT> uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]<FONT color=3D#333399>=
^</FONT>uid[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT color=3D#3333=
99>^</FONT>uid[<FONT =0Acolor=3D#6e00aa>2</FONT>];<BR>&nbsp;sign[=
<FONT color=3D#6e00aa>3</FONT>] <FONT =0Acolor=3D#333399>=3D</FON=
T> uid[<FONT color=3D#6e00aa>1</FONT>]<FONT =0Acolor=3D#333399>^<=
/FONT>(uid[<FONT color=3D#6e00aa>0</FONT>]<FONT =0Acolor=3D#33339=
9>|</FONT>(<FONT color=3D#333399>~</FONT>uid[<FONT =0Acolor=3D#6e=
00aa>2</FONT>]));<BR><FONT color=3D#008000>// sign[4] =3D =0A(sig=
n[0]&amp;sign[1])&nbsp;&nbsp;&nbsp;|UID0;&nbsp;&nbsp;&nbsp;&nbsp;=
//</FONT>&nbsp;<BR><FONT =0Acolor=3D#008000>// sign[5] =3D =0A(si=
gn[0]&amp;sign[2])&nbsp;&nbsp;&nbsp;|UID1;&nbsp;&nbsp;&nbsp;&nbsp=
;//</FONT>&nbsp;<BR><FONT =0Acolor=3D#008000>// sign[6] =3D =0A((=
~sign[0])&amp;sign[2])|UID2;&nbsp;&nbsp;&nbsp;&nbsp;//</FONT>&nbs=
p;<BR><FONT =0Acolor=3D#008000>// sign[7] =3D =0A(sign[1]&amp;(~s=
ign[2]))|UID0;&nbsp;&nbsp;&nbsp;&nbsp;//</FONT>&nbsp;<BR>}<BR>__i=
nline =0A<FONT color=3D#0000ff><B>static</B></FONT> <FONT color=3D=
#0000ff><B>void</B></FONT> =0Apasswd_sign(uint32_t sign[<FONT col=
or=3D#6e00aa>8</FONT>], uint32_t uid[<FONT =0Acolor=3D#6e00aa>3</=
FONT>])<BR>{<BR>&nbsp;sign[<FONT color=3D#6e00aa>4</FONT>] <FONT=20=
=0Acolor=3D#333399>=3D</FONT> (sign[<FONT color=3D#6e00aa>0</FONT=
>]<FONT =0Acolor=3D#333399>&amp;</FONT>sign[<FONT =0Acolor=3D#6e0=
0aa>1</FONT>])&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#333399>|</FONT>=
UID0;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//</FONT>&n=
bsp;<BR>&nbsp;sign[<FONT color=3D#6e00aa>5</FONT>] <FONT =0Acolor=
=3D#333399>=3D</FONT> (sign[<FONT color=3D#6e00aa>0</FONT>]<FONT=20=
=0Acolor=3D#333399>&amp;</FONT>sign[<FONT =0Acolor=3D#6e00aa>2</F=
ONT>])&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#333399>|</FONT>UID1;&nb=
sp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//</FONT>&nbsp;<BR>=
&nbsp;sign[<FONT color=3D#6e00aa>6</FONT>] <FONT =0Acolor=3D#3333=
99>=3D</FONT> ((<FONT color=3D#333399>~</FONT>sign[<FONT =0Acolor=
=3D#6e00aa>0</FONT>])<FONT color=3D#333399>&amp;</FONT>sign[<FONT=
 =0Acolor=3D#6e00aa>2</FONT>])<FONT =0Acolor=3D#333399>|</FONT>UI=
D2;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//</FONT>&nbs=
p;<BR>&nbsp;sign[<FONT color=3D#6e00aa>7</FONT>] <FONT =0Acolor=3D=
#333399>=3D</FONT> (sign[<FONT color=3D#6e00aa>1</FONT>]<FONT =0A=
color=3D#333399>&amp;</FONT>(<FONT color=3D#333399>~</FONT>sign[<=
FONT =0Acolor=3D#6e00aa>2</FONT>]))<FONT =0Acolor=3D#333399>|</FO=
NT>UID0;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//</FONT=
>&nbsp;<BR>}<BR><FONT color=3D#008000>=0A<HR>=0A// EraseCode.h</F=
ONT><BR>#<FONT color=3D#0000ff><B>include</B></FONT> <FONT =0Acol=
or=3D#333399>&lt;</FONT>stdint.h<FONT color=3D#333399>&gt;</FONT>=
<BR><FONT =0Acolor=3D#0000ff><B>extern</B></FONT> <FONT color=3D#=
0000ff><B>int</B></FONT> =0Amatch_first(<FONT color=3D#0000ff><B>=
void</B></FONT>); <FONT color=3D#008000>// =0Areturn 0;</FONT><BR=
><FONT color=3D#0000ff><B>extern</B></FONT> <FONT =0Acolor=3D#000=
0ff><B>int</B></FONT> cram_entry(<FONT =0Acolor=3D#0000ff><B>void=
</B></FONT>);<BR><FONT color=3D#008000>=0A<HR>=0A// EraseCode.c</=
FONT><BR>#<FONT color=3D#0000ff><B>include</B></FONT> <FONT =0Aco=
lor=3D#ff00bf>"EraseCode.h"</FONT><BR>#<FONT color=3D#0000ff><B>i=
nclude</B></FONT> =0A<FONT color=3D#ff00bf>"log.h"</FONT><BR><FON=
T color=3D#008000>//#include =0A"stm32f10x.h"</FONT><BR>#<FONT co=
lor=3D#0000ff><B>include</B></FONT> <FONT =0Acolor=3D#ff00bf>"Fla=
sh.h"</FONT><BR>#<FONT color=3D#0000ff><B>include</B></FONT> =0A<=
FONT color=3D#333399>&lt;</FONT>stdio.h<FONT color=3D#333399>&gt;=
</FONT><BR><FONT =0Acolor=3D#008000>//#include &lt;string.h&gt;</=
FONT><BR>#<FONT =0Acolor=3D#0000ff><B>include</B></FONT> <FONT =0A=
color=3D#ff00bf>"config.h"</FONT><BR>#<FONT color=3D#0000ff><B>in=
clude</B></FONT> =0A<FONT color=3D#ff00bf>"log.h"</FONT><BR>#<FON=
T color=3D#0000ff><B>include</B></FONT> =0A<FONT color=3D#ff00bf>=
"SRAM.h"</FONT><BR>#<FONT color=3D#0000ff><B>define</B></FONT> =0A=
UID0&nbsp;&nbsp;&nbsp;&nbsp;(0x35fd84edU)<BR>#<FONT =0Acolor=3D#0=
000ff><B>define</B></FONT> =0AUID1&nbsp;&nbsp;&nbsp;&nbsp;(0x4ba3=
4568U)<BR>#<FONT =0Acolor=3D#0000ff><B>define</B></FONT> =0AUID2&=
nbsp;&nbsp;&nbsp;&nbsp;(0xadc24e89U)<BR><FONT color=3D#008000>//#=
define =0AUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0xa366db89U)</FONT><B=
R>#<FONT =0Acolor=3D#0000ff><B>ifndef</B></FONT> STM32_FLASH_BASE=
<BR>#<FONT =0Acolor=3D#0000ff><B>define</B></FONT> STM32_FLASH_BA=
SE 0x08000000&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//STM32 FLASH=B5=
=C4=C6=F0=CA=BC=B5=D8=D6=B7</FONT><BR>#<FONT =0Acolor=3D#0000ff><=
B>endif</B></FONT><BR><FONT color=3D#0000ff><B>static</B></FONT>=20=
=0A<FONT color=3D#0000ff><B>void</B></FONT> _Write_Flash(uint32_t=
 WriteAddr,uint8_t =0A<FONT color=3D#333399>*</FONT>pBuffer,uint1=
6_t NumToWrite);<BR><FONT =0Acolor=3D#0000ff><B>int</B></FONT> ma=
tch_first(<FONT =0Acolor=3D#0000ff><B>void</B></FONT>)&nbsp;&nbsp=
;<BR>{<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>return</B></FONT> <FO=
NT color=3D#6e00aa>0</FONT>;<BR>}<BR><FONT =0Acolor=3D#0000ff><B>=
int</B></FONT> _match_first(<FONT =0Acolor=3D#0000ff><B>void</B><=
/FONT>)&nbsp;&nbsp;<BR>{<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>ret=
urn</B></FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>;<BR>}<BR>__attri=
bute__((section(<FONT =0Acolor=3D#ff00bf>".ecode"</FONT>))) <FONT=
 color=3D#0000ff><B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B=
>void</B></FONT> erase_match_first(uint8_t<FONT =0Acolor=3D#33339=
9>*</FONT> bin)<BR>{<BR>&nbsp;uint8_t<FONT color=3D#333399>*</FON=
T> =0Acode<FONT color=3D#333399>=3D</FONT>NULL;<BR>&nbsp;uint32_t=
 addr<FONT =0Acolor=3D#333399>=3D</FONT><FONT color=3D#6e00aa>0</=
FONT>;<BR>&nbsp;uint32_t i<FONT =0Acolor=3D#333399>=3D</FONT><FON=
T color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#008000>//=20=
=B6=C1=B3=F6 _match_first=BA=AF=CA=FD=B5=C4=D6=B8=C1=EE</FONT><BR=
>&nbsp;addr <FONT =0Acolor=3D#333399>=3D</FONT> (uint32_t)_match_=
first<FONT =0Acolor=3D#333399>&amp;</FONT>0xFFFFFFFE; <FONT color=
=3D#008000>// =0A[0]=CE=BB=CE=AA1=B1=ED=CA=BEthumb=D6=B8=C1=EE</F=
ONT><BR>&nbsp;dprintf(<FONT =0Acolor=3D#ff00bf>"addr:%08X\r\n"</F=
ONT>, addr);<BR>&nbsp;code<FONT =0Acolor=3D#333399>=3D</FONT>(uin=
t8_t<FONT color=3D#333399>*</FONT>)addr; <FONT =0Acolor=3D#008000=
>// _match_first code</FONT><BR>&nbsp;<FONT color=3D#008000>// =B8=
=B2=B8=C7 =0Amatch_first=BA=AF=CA=FD=B5=C4=D6=B8=C1=EE</FONT><BR>=
&nbsp;addr <FONT color=3D#333399>=3D</FONT> =0A(uint32_t)match_fi=
rst<FONT =0Acolor=3D#333399>&amp;</FONT>0xFFFFFFFE;<BR>&nbsp;dpri=
ntf(<FONT =0Acolor=3D#ff00bf>"addr:%08X\r\n"</FONT>, addr);<BR>&n=
bsp;addr <FONT =0Acolor=3D#333399>=3D</FONT> (addr<FONT color=3D#=
333399>-</FONT>0x20000000); <FONT =0Acolor=3D#008000>// RAM addr=20=
to Offset (about 0x20000000)</FONT><BR>&nbsp;<FONT =0Acolor=3D#00=
8000>// _match_first=BA=AF=CA=FD=B3=A4=B6=C8=CE=AA 4Byte</FONT><B=
R>&nbsp;<FONT =0Acolor=3D#0000ff><B>for</B></FONT>(i<FONT color=3D=
#333399>=3D</FONT><FONT =0Acolor=3D#6e00aa>0</FONT>; i<FONT color=
=3D#333399>&lt;</FONT><FONT =0Acolor=3D#6e00aa>4</FONT>; i<FONT =0A=
color=3D#333399>++</FONT>)<BR>&nbsp;{<BR>&nbsp;&nbsp;bin[addr<FON=
T =0Acolor=3D#333399>+</FONT>i] <FONT color=3D#333399>=3D</FONT>=20=
code[i]; <FONT =0Acolor=3D#008000>// cover match_first function</=
FONT><BR>&nbsp;}<BR>&nbsp;<FONT =0Acolor=3D#008000>// =B8=B2=B8=C7=
 cram_entry=BA=AF=CA=FD=D6=B8=C1=EE</FONT><BR>&nbsp;addr <FONT =0A=
color=3D#333399>=3D</FONT> (uint32_t)cram_entry<FONT =0Acolor=3D#=
333399>&amp;</FONT>0xFFFFFFFE;<BR>&nbsp;dprintf(<FONT =0Acolor=3D=
#ff00bf>"addr:%08X\r\n"</FONT>, addr);<BR>&nbsp;addr <FONT =0Acol=
or=3D#333399>=3D</FONT> (addr<FONT color=3D#333399>-</FONT>0x2000=
0000); <FONT =0Acolor=3D#008000>// RAM addr to Offset (about 0x20=
000000)</FONT><BR>&nbsp;<FONT =0Acolor=3D#008000>// _match_first=BA=
=AF=CA=FD=B3=A4=B6=C8=CE=AA 4Byte</FONT><BR>&nbsp;<FONT =0Acolor=3D=
#0000ff><B>for</B></FONT>(i<FONT color=3D#333399>=3D</FONT><FONT=20=
=0Acolor=3D#6e00aa>0</FONT>; i<FONT color=3D#333399>&lt;</FONT><F=
ONT =0Acolor=3D#6e00aa>4</FONT>; i<FONT =0Acolor=3D#333399>++</FO=
NT>)<BR>&nbsp;{<BR>&nbsp;&nbsp;bin[addr<FONT =0Acolor=3D#333399>+=
</FONT>i] <FONT color=3D#333399>=3D</FONT> code[i]; <FONT =0Acolo=
r=3D#008000>// cover cram_entry function</FONT><BR>&nbsp;}<BR>}<B=
R><BR><FONT =0Acolor=3D#008000>// =D0=C5=CF=A2=BC=D3=C3=DC,=BD=F6=
=B9=A9 App=CA=B9=D3=C3,=D7=D4=C9=ED=B2=BB=B6=D4=C6=E4=BD=F8=D0=D0=
=D0=A3=D1=E9</FONT><BR>__attribute__((section(<FONT =0Acolor=3D#f=
f00bf>".ecode"</FONT>))) <FONT color=3D#0000ff><B>void</B></FONT>=
 =0AUserLicense(uint8_t flash[], uint32_t uid[<FONT =0Acolor=3D#6=
e00aa>3</FONT>])<BR>{<BR>&nbsp;<FONT color=3D#008000>// =CA=B9=D3=
=C3=D3=C3=BB=A7 =0ALicense=BD=F8=D0=D0=C7=A9=C3=FB</FONT><BR>&nbs=
p;uint32_t <FONT color=3D#333399>*</FONT>sign <FONT =0Acolor=3D#3=
33399>=3D</FONT> (uint32_t <FONT =0Acolor=3D#333399>*</FONT>)(fla=
sh);<BR>&nbsp;uint32_t License <FONT =0Acolor=3D#333399>=3D</FONT=
> sign[<FONT color=3D#6e00aa>40</FONT>];<BR>&nbsp;<FONT =0Acolor=3D=
#008000>//printf("License:0x%08X\r\n", =0ALicense);</FONT><BR>&nb=
sp;sign[<FONT color=3D#6e00aa>40</FONT>] <FONT =0Acolor=3D#333399=
>=3D</FONT> uid[<FONT color=3D#6e00aa>0</FONT>]; <FONT color=3D#0=
08000>// =0A=B2=C1=B3=FD License</FONT><BR>&nbsp;sign <FONT color=
=3D#333399>+=3D</FONT> <FONT =0Acolor=3D#6e00aa>3</FONT>;<BR>&nbs=
p;&nbsp;&nbsp;&nbsp;sign[<FONT =0Acolor=3D#6e00aa>0</FONT>] <FONT=
 color=3D#333399>=3D</FONT> ((<FONT =0Acolor=3D#333399>~</FONT>ui=
d[<FONT color=3D#6e00aa>0</FONT>])<FONT =0Acolor=3D#333399>&amp;<=
/FONT>uid[<FONT =0Acolor=3D#6e00aa>2</FONT>]);<BR>&nbsp;&nbsp;&nb=
sp;&nbsp;sign[<FONT =0Acolor=3D#6e00aa>1</FONT>] <FONT color=3D#3=
33399>=3D</FONT> (uid[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT col=
or=3D#333399>&amp;</FONT>(<FONT =0Acolor=3D#333399>~</FONT>uid[<F=
ONT =0Acolor=3D#6e00aa>2</FONT>]));<BR>&nbsp;&nbsp;&nbsp;&nbsp;si=
gn[<FONT =0Acolor=3D#6e00aa>2</FONT>] <FONT color=3D#333399>=3D</=
FONT> uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]<FONT color=3D#333399=
>^</FONT>uid[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT color=3D#333=
399>^</FONT>License;<BR>&nbsp;sign[<FONT =0Acolor=3D#6e00aa>3</FO=
NT>] <FONT color=3D#333399>=3D</FONT> uid[<FONT =0Acolor=3D#6e00a=
a>0</FONT>]<FONT color=3D#333399>^</FONT>(sign[<FONT =0Acolor=3D#=
6e00aa>2</FONT>]<FONT color=3D#333399>|</FONT>(<FONT =0Acolor=3D#=
333399>~</FONT>License));<BR>&nbsp;sign[<FONT color=3D#6e00aa>4</=
FONT>] =0A<FONT color=3D#333399>=3D</FONT> uid[<FONT color=3D#6e0=
0aa>0</FONT>]<FONT =0Acolor=3D#333399>+</FONT>uid[<FONT color=3D#=
6e00aa>1</FONT>]<FONT =0Acolor=3D#333399>+</FONT>uid[<FONT color=3D=
#6e00aa>2</FONT>];<BR>&nbsp;sign[<FONT =0Acolor=3D#6e00aa>5</FONT=
>] <FONT color=3D#333399>=3D</FONT> (sign[<FONT =0Acolor=3D#6e00a=
a>0</FONT>]<FONT color=3D#333399>+</FONT>sign[<FONT =0Acolor=3D#6=
e00aa>3</FONT>])<FONT color=3D#333399>|</FONT>(uid[<FONT =0Acolor=
=3D#6e00aa>1</FONT>]<FONT color=3D#333399>&amp;</FONT>(<FONT =0Ac=
olor=3D#333399>~</FONT>uid[<FONT color=3D#6e00aa>2</FONT>]));<BR>=
&nbsp;sign[<FONT =0Acolor=3D#6e00aa>6</FONT>] <FONT color=3D#3333=
99>=3D</FONT> (sign[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT color=
=3D#333399>+</FONT>sign[<FONT =0Acolor=3D#6e00aa>4</FONT>])<FONT=20=
color=3D#333399>|</FONT>(uid[<FONT =0Acolor=3D#6e00aa>1</FONT>]<F=
ONT color=3D#333399>&amp;</FONT>(<FONT =0Acolor=3D#333399>~</FONT=
>uid[<FONT color=3D#6e00aa>2</FONT>]));<BR>&nbsp;sign[<FONT =0Aco=
lor=3D#6e00aa>7</FONT>] <FONT color=3D#333399>=3D</FONT> (sign[<F=
ONT =0Acolor=3D#6e00aa>2</FONT>]<FONT color=3D#333399>+</FONT>sig=
n[<FONT =0Acolor=3D#6e00aa>5</FONT>])<FONT color=3D#333399>|</FON=
T>(uid[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT color=3D#333399>&a=
mp;</FONT>(<FONT =0Acolor=3D#333399>~</FONT>uid[<FONT =0Acolor=3D=
#6e00aa>2</FONT>]));<BR>}<BR>__attribute__((section(<FONT =0Acolo=
r=3D#ff00bf>".ecode"</FONT>))) <FONT color=3D#0000ff><B>void</B><=
/FONT> =0Aencoding(uint32_t sign[<FONT color=3D#6e00aa>8</FONT>],=
 uint32_t uid[<FONT =0Acolor=3D#6e00aa>3</FONT>])<BR>{<BR>&nbsp;&=
nbsp;&nbsp;&nbsp;sign[<FONT =0Acolor=3D#6e00aa>0</FONT>] <FONT co=
lor=3D#333399>=3D</FONT> (uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]<=
FONT color=3D#333399>&amp;</FONT>uid[<FONT =0Acolor=3D#6e00aa>1</=
FONT>])<FONT color=3D#333399>|</FONT>((<FONT =0Acolor=3D#333399>~=
</FONT>uid[<FONT color=3D#6e00aa>0</FONT>])<FONT =0Acolor=3D#3333=
99>&amp;</FONT>uid[<FONT =0Acolor=3D#6e00aa>2</FONT>]);<BR>&nbsp;=
&nbsp;&nbsp;&nbsp;sign[<FONT =0Acolor=3D#6e00aa>1</FONT>] <FONT c=
olor=3D#333399>=3D</FONT> (uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]=
<FONT color=3D#333399>&amp;</FONT>uid[<FONT =0Acolor=3D#6e00aa>2<=
/FONT>])<FONT color=3D#333399>|</FONT>(uid[<FONT =0Acolor=3D#6e00=
aa>1</FONT>]<FONT color=3D#333399>&amp;</FONT>(<FONT =0Acolor=3D#=
333399>~</FONT>uid[<FONT =0Acolor=3D#6e00aa>2</FONT>]));<BR>&nbsp=
;&nbsp;&nbsp;&nbsp;sign[<FONT =0Acolor=3D#6e00aa>2</FONT>] <FONT=20=
color=3D#333399>=3D</FONT> uid[<FONT =0Acolor=3D#6e00aa>0</FONT>]=
<FONT color=3D#333399>^</FONT>uid[<FONT =0Acolor=3D#6e00aa>1</FON=
T>]<FONT color=3D#333399>^</FONT>uid[<FONT =0Acolor=3D#6e00aa>2</=
FONT>];<BR>&nbsp;sign[<FONT color=3D#6e00aa>3</FONT>] <FONT =0Aco=
lor=3D#333399>=3D</FONT> uid[<FONT color=3D#6e00aa>1</FONT>]<FONT=
 =0Acolor=3D#333399>^</FONT>(uid[<FONT color=3D#6e00aa>0</FONT>]<=
FONT =0Acolor=3D#333399>|</FONT>(<FONT color=3D#333399>~</FONT>ui=
d[<FONT =0Acolor=3D#6e00aa>2</FONT>]));<BR>&nbsp;sign[<FONT color=
=3D#6e00aa>4</FONT>] <FONT =0Acolor=3D#333399>=3D</FONT> (sign[<F=
ONT color=3D#6e00aa>0</FONT>]<FONT =0Acolor=3D#333399>&amp;</FONT=
>sign[<FONT =0Acolor=3D#6e00aa>1</FONT>])&nbsp;&nbsp;&nbsp;<FONT=20=
=0Acolor=3D#333399>|</FONT>UID0;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0A=
color=3D#008000>//</FONT>&nbsp;<BR>&nbsp;sign[<FONT color=3D#6e00=
aa>5</FONT>] <FONT =0Acolor=3D#333399>=3D</FONT> (sign[<FONT colo=
r=3D#6e00aa>0</FONT>]<FONT =0Acolor=3D#333399>&amp;</FONT>sign[<F=
ONT =0Acolor=3D#6e00aa>2</FONT>])&nbsp;&nbsp;&nbsp;<FONT =0Acolor=
=3D#333399>|</FONT>UID1;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D=
#008000>//</FONT>&nbsp;<BR>&nbsp;sign[<FONT color=3D#6e00aa>6</FO=
NT>] <FONT =0Acolor=3D#333399>=3D</FONT> ((<FONT color=3D#333399>=
~</FONT>sign[<FONT =0Acolor=3D#6e00aa>0</FONT>])<FONT color=3D#33=
3399>&amp;</FONT>sign[<FONT =0Acolor=3D#6e00aa>2</FONT>])<FONT =0A=
color=3D#333399>|</FONT>UID2;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acol=
or=3D#008000>//</FONT>&nbsp;<BR>&nbsp;sign[<FONT color=3D#6e00aa>=
7</FONT>] <FONT =0Acolor=3D#333399>=3D</FONT> (sign[<FONT color=3D=
#6e00aa>1</FONT>]<FONT =0Acolor=3D#333399>&amp;</FONT>(<FONT colo=
r=3D#333399>~</FONT>sign[<FONT =0Acolor=3D#6e00aa>2</FONT>]))<FON=
T =0Acolor=3D#333399>|</FONT>UID0;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0A=
color=3D#008000>//</FONT>&nbsp;<BR>}<BR>__attribute__((section(<F=
ONT =0Acolor=3D#ff00bf>".ecode"</FONT>))) <FONT color=3D#0000ff><=
B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B></FONT> p=
asswd_code(<FONT =0Acolor=3D#0000ff><B>void</B></FONT>)<BR>{<BR>&=
nbsp;uint8_t<FONT =0Acolor=3D#333399>*</FONT> bin<FONT color=3D#3=
33399>=3D</FONT>NULL; <FONT =0Acolor=3D#008000>// buffer</FONT><B=
R>&nbsp;uint8_t<FONT color=3D#333399>*</FONT> =0Acode<FONT color=3D=
#333399>=3D</FONT>NULL; <FONT color=3D#008000>// =0AFlash</FONT><=
BR>&nbsp;uint32_t size<FONT color=3D#333399>=3D</FONT><FONT =0Aco=
lor=3D#6e00aa>0</FONT>;<BR>&nbsp;uint32_t mcu_uid[<FONT =0Acolor=3D=
#6e00aa>3</FONT>];<BR>&nbsp;uint32_t addr<FONT color=3D#333399>=3D=
</FONT><FONT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;uint8_t<FONT c=
olor=3D#333399>*</FONT> section_buf =0A<FONT color=3D#333399>=3D<=
/FONT> NULL;<BR>&nbsp;<BR>&nbsp;uart_init(<FONT =0Acolor=3D#6e00a=
a>115200</FONT>);<BR>&nbsp;bin<FONT color=3D#333399>=3D</FONT>Get=
RAM(); =0A<FONT color=3D#008000>// buffer, SRAM_LEN_K (80K)</FONT=
><BR>&nbsp;<FONT =0Acolor=3D#008000>//section_buf =3D bin+0x5C00;=
 // ".ecode"</FONT><BR>&nbsp;code<FONT =0Acolor=3D#333399>=3D</FO=
NT>(uint8_t<FONT color=3D#333399>*</FONT>)0x08000000; <FONT =0Aco=
lor=3D#008000>// Flash</FONT><BR>&nbsp;<FONT color=3D#008000>// r=
ead all code to =0Abuffer</FONT><BR>&nbsp;<FONT color=3D#0000ff><=
B>for</B></FONT>(size<FONT =0Acolor=3D#333399>=3D</FONT><FONT col=
or=3D#6e00aa>0</FONT>; size<FONT =0Acolor=3D#333399>&lt;</FONT>(0=
x00008000); size<FONT color=3D#333399>++</FONT>) <FONT =0Acolor=3D=
#008000>// 32K</FONT><BR>&nbsp;{<BR>&nbsp;&nbsp;bin[size] <FONT =0A=
color=3D#333399>=3D</FONT> code[size];<BR>&nbsp;}<BR>&nbsp;<FONT=20=
color=3D#008000>// =0A=D0=DE=B8=C4=B5=DA=D2=BB=B4=CE=C6=A5=C5=E4<=
/FONT><BR>&nbsp;erase_match_first(bin);<BR>&nbsp;<FONT color=3D#0=
08000>// =0Aread UID</FONT><BR>&nbsp;mcu_uid[<FONT color=3D#6e00a=
a>0</FONT>]<FONT =0Acolor=3D#333399>=3D</FONT><FONT color=3D#3333=
99>*</FONT>(<FONT =0Acolor=3D#0000ff><B>volatile</B></FONT> uint3=
2_t<FONT =0Acolor=3D#333399>*</FONT>)(0x1FFF7A10);<BR>&nbsp;mcu_u=
id[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT color=3D#333399>=3D</F=
ONT><FONT =0Acolor=3D#333399>*</FONT>(<FONT color=3D#0000ff><B>vo=
latile</B></FONT> uint32_t<FONT =0Acolor=3D#333399>*</FONT>)(0x1F=
FF7A14);<BR>&nbsp;mcu_uid[<FONT =0Acolor=3D#6e00aa>2</FONT>]<FONT=
 color=3D#333399>=3D</FONT><FONT =0Acolor=3D#333399>*</FONT>(<FON=
T color=3D#0000ff><B>volatile</B></FONT> uint32_t<FONT =0Acolor=3D=
#333399>*</FONT>)(0x1FFF7A18);<BR>&nbsp;section_buf <FONT =0Acolo=
r=3D#333399>=3D</FONT> bin; <FONT color=3D#008000>// 256B =0Aconf=
ig</FONT><BR>&nbsp;UserLicense(section_buf, mcu_uid);<BR>&nbsp;<F=
ONT =0Acolor=3D#008000>// cover ".ecode"</FONT><BR>&nbsp;section_=
buf <FONT =0Acolor=3D#333399>=3D</FONT> bin<FONT color=3D#333399>=
+</FONT>0x5C00; <FONT =0Acolor=3D#008000>// ".ecode"</FONT><BR>&n=
bsp;addr <FONT color=3D#333399>=3D</FONT> =0A(mcu_uid[<FONT color=
=3D#6e00aa>0</FONT>]<FONT color=3D#333399>+</FONT>mcu_uid[<FONT =0A=
color=3D#6e00aa>1</FONT>]<FONT color=3D#333399>+</FONT>mcu_uid[<F=
ONT =0Acolor=3D#6e00aa>2</FONT>])<FONT color=3D#333399>&amp;</FON=
T>0x3FC0;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>for</B></FONT>(siz=
e<FONT color=3D#333399>=3D</FONT><FONT =0Acolor=3D#6e00aa>0</FONT=
>; size<FONT color=3D#333399>&lt;</FONT>(0x00000400); =0Asize<FON=
T color=3D#333399>++</FONT>) <FONT color=3D#008000>// =0A32K</FON=
T><BR>&nbsp;{<BR>&nbsp;&nbsp;section_buf[size] <FONT =0Acolor=3D#=
333399>=3D</FONT> bin[size<FONT =0Acolor=3D#333399>+</FONT>addr];=
<BR>&nbsp;}<BR>&nbsp;encoding((uint32_t<FONT =0Acolor=3D#333399>*=
</FONT>)section_buf, mcu_uid);<BR>&nbsp;<FONT =0Acolor=3D#008000>=
//printf("_Write_Flash\r\n");</FONT><BR>&nbsp;_Write_Flash(STM32_=
FLASH_BASE, =0Abin, 0x00008000);<BR>}<BR><FONT color=3D#0000ff><B=
>extern</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B></FONT> te=
st_entry(<FONT =0Acolor=3D#0000ff><B>void</B></FONT>);<BR>__attri=
bute__((section(<FONT =0Acolor=3D#ff00bf>".ecode"</FONT>))) <FONT=
 color=3D#0000ff><B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B=
>void</B></FONT> _Write_Flash(uint32_t WriteAddr,uint8_t <FONT =0A=
color=3D#333399>*</FONT>pBuffer,uint16_t =0ANumToWrite)<BR>{<BR>&=
nbsp;Flash_Write(WriteAddr,(uint32_t<FONT =0Acolor=3D#333399>*</F=
ONT>)pBuffer, NumToWrite<FONT color=3D#333399>/</FONT><FONT =0Aco=
lor=3D#6e00aa>4</FONT>);<BR>&nbsp;<FONT color=3D#0000ff><B>while<=
/B></FONT>(<FONT =0Acolor=3D#6e00aa>1</FONT>)test_entry();<BR>&nb=
sp;<FONT =0Acolor=3D#008000>//while(1)NVIC_SystemReset(); // =C8=ED=
=BC=FE=B8=B4=CE=BB</FONT><BR>}<BR><FONT =0Acolor=3D#0000ff><B>int=
</B></FONT> cram_entry(<FONT =0Acolor=3D#0000ff><B>void</B></FONT=
>)<BR>{<BR>&nbsp;passwd_code();<BR>&nbsp;<FONT =0Acolor=3D#0000ff=
><B>return</B></FONT> <FONT color=3D#6e00aa>0</FONT>;<BR>}</DIV>=0A=
<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACIN=
G: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR=
: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACI=
NG: normal; orphans: auto; widows: auto; webkit-text-stroke-width=
: 0px"><BR>=C8=BB=BA=F3=CE=D2=C3=C7=D0=E8=D2=AA=D0=DE=B8=C4=C1=B4=
=BD=D3=CE=C4=BC=FE=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORDER-RIGHT:=
 black 1px solid; PADDING-RIGHT: 3px; BORDER-TOP: black 1px solid=
; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: auto; BORDER-L=
EFT: black 1px solid; COLOR: black; MARGIN-RIGHT: auto; PADDING-T=
OP: 3px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY: Courier New=
; BACKGROUND-COLOR: window; TEXT-ALIGN: left; 3px: ">; =0A<FONT c=
olor=3D#333399>|</FONT> code<FONT color=3D#333399>:</FONT><FONT =0A=
color=3D#6e00aa>24K</FONT><BR>; <FONT color=3D#333399>|</FONT> FA=
T32<FONT =0Acolor=3D#333399>+</FONT>MAC<FONT color=3D#333399>+</F=
ONT>RAM<FONT =0Acolor=3D#333399>:</FONT><FONT color=3D#6e00aa>40K=
</FONT><BR>LR_IROM1 0x20000000 =0A0x00005C00&nbsp;&nbsp;{&nbsp;&n=
bsp;&nbsp;&nbsp;; load region =0Asize_region<BR>&nbsp;&nbsp;ER_IR=
OM2 0x20000000 =0A0x00000200&nbsp;&nbsp;{&nbsp;&nbsp;; load addre=
ss <FONT color=3D#333399>=3D</FONT> =0Aexecution address<BR>&nbsp=
;&nbsp;&nbsp;.ANY =0A(.config)<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;ER=
_IROM1 0x20000200 =0A0x00005A00&nbsp;&nbsp;{&nbsp;&nbsp;; load ad=
dress <FONT color=3D#333399>=3D</FONT> =0Aexecution address<BR>&n=
bsp;&nbsp;&nbsp;<FONT color=3D#333399>*</FONT>.o (RESET, =0A<FONT=
 color=3D#333399>+</FONT>First)<BR>&nbsp;&nbsp;&nbsp;<FONT =0Acol=
or=3D#333399>*</FONT>(InRoot$$Sections)<BR>&nbsp;&nbsp;&nbsp;.ANY=
 (<FONT =0Acolor=3D#333399>+</FONT>RO)<BR>;&nbsp;&nbsp;&nbsp;.ANY=
 =0A(.ecode)<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;RW_IRAM1 0x20006000=20=
=0A0x0000A000&nbsp;&nbsp;{&nbsp;&nbsp;; RW data<BR>&nbsp;&nbsp;&n=
bsp;.ANY (<FONT =0Acolor=3D#333399>+</FONT>RW <FONT =0Acolor=3D#3=
33399>+</FONT>ZI)<BR>&nbsp;&nbsp;}<BR>}<BR>LR_IROM3 0x20005C00 =0A=
0x00000400&nbsp;&nbsp;{ ; <FONT color=3D#6e00aa>23K</FONT><BR>&nb=
sp;&nbsp;ER_IROM3 =0A0x20005C00 0x00000400&nbsp;&nbsp;{&nbsp;&nbs=
p;; load address <FONT =0Acolor=3D#333399>=3D</FONT> execution ad=
dress<BR>&nbsp;&nbsp;&nbsp;.ANY =0A(.ecode)<BR>&nbsp;&nbsp;}<BR>}=
</DIV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WO=
RD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: no=
ne; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LET=
TER-SPACING: normal; orphans: auto; widows: auto; webkit-text-str=
oke-width: 0px"><BR>=D2=B2=BE=CD=CA=C7=CB=B5=D6=B8=B6=A8=BC=D3=C3=
=DC=B4=FA=C2=EB=B7=C5=D4=DA=D7=EE=BA=F3 =0A1K=A1=A3=C8=BB=BA=F3=CE=
=D2=C3=C7=D2=AA=D0=DE=B8=C4 main=BA=AF=CA=FD=A3=AC=B2=A2=D4=F6=BC=
=D3=D2=BB=B8=F6 test_entry=BA=AF=CA=FD=A3=BA<BR></P>=0A<DIV =0Ast=
yle=3D"BORDER-RIGHT: black 1px solid; PADDING-RIGHT: 3px; BORDER-=
TOP: black 1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-=
LEFT: auto; BORDER-LEFT: black 1px solid; COLOR: black; MARGIN-RI=
GHT: auto; PADDING-TOP: 3px; BORDER-BOTTOM: black 1px solid; FONT=
-FAMILY: Courier New; BACKGROUND-COLOR: window; TEXT-ALIGN: left;=
 3px: "><FONT =0Acolor=3D#0000ff><B>void</B></FONT> test_entry(<F=
ONT =0Acolor=3D#0000ff><B>void</B></FONT>)<BR>{<BR>#<FONT color=3D=
#0000ff><B>if</B></FONT> =0A<FONT color=3D#6e00aa>1</FONT><BR>&nb=
sp;<FONT color=3D#0000ff><B>unsigned</B></FONT> =0A<FONT color=3D=
#0000ff><B>int</B></FONT> led<FONT color=3D#333399>=3D</FONT><FON=
T =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT color=3D#0000ff><B>=
unsigned</B></FONT> =0A<FONT color=3D#0000ff><B>int</B></FONT> cl=
ock<FONT color=3D#333399>=3D</FONT><FONT =0Acolor=3D#6e00aa>0</FO=
NT>;<BR>&nbsp;clock <FONT color=3D#333399>=3D</FONT> <FONT =0Acol=
or=3D#6e00aa>0</FONT>;<BR>&nbsp;led <FONT color=3D#333399>=3D</FO=
NT> clock<FONT =0Acolor=3D#333399>+</FONT><FONT color=3D#6e00aa>4=
0</FONT>; <FONT color=3D#008000>// =0A0.04s</FONT><BR>&nbsp;<FONT=
 color=3D#0000ff><B>for</B></FONT>(clock<FONT =0Acolor=3D#333399>=
=3D</FONT><FONT color=3D#6e00aa>0</FONT>; clock<FONT =0Acolor=3D#=
333399>&lt;</FONT><FONT color=3D#6e00aa>10000</FONT>; clock <FONT=
 =0Acolor=3D#333399>+=3D</FONT> <FONT color=3D#6e00aa>10</FONT>)<=
BR>&nbsp;<FONT =0Acolor=3D#008000>//while(1)</FONT><BR>&nbsp;{<BR=
>&nbsp;&nbsp;delay_ms(<FONT =0Acolor=3D#6e00aa>10</FONT>);<BR>&nb=
sp;&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(clock <FONT co=
lor=3D#333399>&gt;</FONT> =0Aled)<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp=
;&nbsp;led <FONT color=3D#333399>=3D</FONT> =0Aclock<FONT color=3D=
#333399>+</FONT><FONT color=3D#6e00aa>100</FONT>; <FONT =0Acolor=3D=
#008000>// 0.1s</FONT><BR>&nbsp;&nbsp;&nbsp;Qi.reversal(<FONT =0A=
color=3D#333399>&amp;</FONT>led1);<BR>&nbsp;&nbsp;&nbsp;Qi.revers=
al(<FONT =0Acolor=3D#333399>&amp;</FONT>led2);<BR>&nbsp;&nbsp;}<B=
R>&nbsp;}<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>while</B></FONT>(<=
FONT =0Acolor=3D#6e00aa>1</FONT>)NVIC_SystemReset(); <FONT color=3D=
#008000>// =0A=C8=ED=BC=FE=B8=B4=CE=BB</FONT><BR>#<FONT color=3D#=
0000ff><B>else</B></FONT><BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>wh=
ile</B></FONT>(<FONT =0Acolor=3D#6e00aa>1</FONT>)NVIC_SystemReset=
(); <FONT color=3D#008000>// =0A=C8=ED=BC=FE=B8=B4=CE=BB</FONT><B=
R>#<FONT color=3D#0000ff><B>endif</B></FONT><BR>}<BR><FONT =0Acol=
or=3D#008000>/**<BR>&nbsp;&nbsp;* @brief&nbsp;&nbsp;Program entry=
 =0Apoint<BR>&nbsp;&nbsp;* @param&nbsp;&nbsp;None<BR>&nbsp;&nbsp;=
* @retval =0ANone<BR>&nbsp;&nbsp;*/</FONT><BR><FONT color=3D#0000=
ff><B>int</B></FONT> =0Amain(<FONT color=3D#0000ff><B>void</B></F=
ONT>)<BR>{<BR>&nbsp;uint32_t<FONT =0Acolor=3D#333399>*</FONT> _mt=
ext<FONT color=3D#333399>=3D</FONT>NULL;<BR>&nbsp;uint32_t =0Apas=
swd[<FONT color=3D#6e00aa>8</FONT>]<FONT color=3D#333399>=3D</FON=
T>{<FONT =0Acolor=3D#6e00aa>0</FONT>};<BR>&nbsp;uint32_t uid[<FON=
T =0Acolor=3D#6e00aa>3</FONT>]<FONT color=3D#333399>=3D</FONT>{<F=
ONT =0Acolor=3D#6e00aa>0</FONT>};<BR>&nbsp;<FONT color=3D#0000ff>=
<B>int</B></FONT> =0Amatch<FONT color=3D#333399>=3D</FONT><FONT c=
olor=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>uns=
igned</B></FONT> <FONT color=3D#0000ff><B>int</B></FONT> =0Aled<F=
ONT color=3D#333399>=3D</FONT><FONT color=3D#6e00aa>0</FONT>;<BR>=
&nbsp;<FONT =0Acolor=3D#0000ff><B>unsigned</B></FONT> <FONT color=
=3D#0000ff><B>int</B></FONT> =0Aclock<FONT color=3D#333399>=3D</F=
ONT><FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;uint8_t =0Adown<FONT=
 color=3D#333399>=3D</FONT><FONT color=3D#6e00aa>0</FONT>;<BR>&nb=
sp;<FONT =0Acolor=3D#0000ff><B>unsigned</B></FONT> <FONT color=3D=
#0000ff><B>int</B></FONT> =0Acount<FONT color=3D#333399>=3D</FONT=
><FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#00800=
0>//uint8_t down=3D0;</FONT><BR>&nbsp;uint32_t VectorsAddr<FONT =0A=
color=3D#333399>=3D</FONT>0x08005400; <FONT color=3D#008000>// =0A=
default</FONT><BR>&nbsp;VectorsAddr <FONT color=3D#333399>=3D</FO=
NT> =0A(uint32_t)(<FONT color=3D#333399>&amp;</FONT>__Vectors);<B=
R>&nbsp;<FONT =0Acolor=3D#008000>//VectorsAddr =3D =0AVectorsAddr=
-0x08000000;</FONT><BR>&nbsp;VectorsAddr <FONT color=3D#333399>=3D=
</FONT> =0AVectorsAddr<FONT color=3D#333399>-</FONT>0x20000000;<B=
R>&nbsp;<FONT =0Acolor=3D#008000>//NVIC_SetVectorTable(NVIC_VectT=
ab_FLASH, VectorsAddr); // =0A&amp;__Vectors</FONT><BR>&nbsp;NVIC=
_SetVectorTable(NVIC_VectTab_RAM, =0AVectorsAddr); <FONT color=3D=
#008000>// =0A&amp;__Vectors</FONT><BR>&nbsp;QiFreeConfigIO((uint=
32_t<FONT =0Acolor=3D#333399>*</FONT>)LinkAddress);<BR>&nbsp;<FON=
T color=3D#008000>// =0Apasswd</FONT><BR>&nbsp;<FONT color=3D#000=
0ff><B>if</B></FONT>(<FONT =0Acolor=3D#6e00aa>0</FONT><FONT color=
=3D#333399>=3D=3D</FONT>match_first()) <FONT =0Acolor=3D#008000>/=
/ 0:=B5=DA=D2=BB=B4=CE=C9=CF=B5=E7,=BC=D3=C3=DC</FONT><BR>&nbsp;{=
<BR>&nbsp;&nbsp;clock <FONT =0Acolor=3D#333399>=3D</FONT> <FONT c=
olor=3D#6e00aa>0</FONT>;<BR>&nbsp;&nbsp;count <FONT =0Acolor=3D#3=
33399>=3D</FONT> clock<FONT color=3D#333399>+</FONT><FONT =0Acolo=
r=3D#6e00aa>200</FONT>; <FONT color=3D#008000>// 0.2s</FONT><BR>&=
nbsp;&nbsp;led =0A<FONT color=3D#333399>=3D</FONT> clock<FONT col=
or=3D#333399>+</FONT><FONT =0Acolor=3D#6e00aa>30</FONT>; <FONT co=
lor=3D#008000>// =0A0.06s</FONT><BR>&nbsp;&nbsp;<FONT color=3D#00=
00ff><B>while</B></FONT>(<FONT =0Acolor=3D#6e00aa>1</FONT>)<BR>&n=
bsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;delay_ms(<FONT =0Acolor=3D#6e00a=
a>10</FONT>);<BR>&nbsp;&nbsp;&nbsp;clock <FONT =0Acolor=3D#333399=
>+=3D</FONT> <FONT color=3D#6e00aa>10</FONT>; <FONT color=3D#0080=
00>// =0Aupdate clock</FONT><BR>&nbsp;&nbsp;&nbsp;<FONT color=3D#=
008000>// =0ARead</FONT><BR>&nbsp;&nbsp;&nbsp;down <FONT color=3D=
#333399>=3D</FONT> =0AQi.key_down(<FONT color=3D#333399>&amp;</FO=
NT>key);<BR>&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//dprintf(=
"clock:%d, key:%d, led:%d\r\n", clock, down, =0Aled);</FONT><BR>&=
nbsp;&nbsp;&nbsp;<FONT color=3D#0000ff><B>if</B></FONT>(<FONT =0A=
color=3D#333399>!</FONT>down) <FONT color=3D#008000>// up, =0Aupd=
ate</FONT><BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;coun=
t <FONT =0Acolor=3D#333399>=3D</FONT> clock<FONT color=3D#333399>=
+</FONT><FONT =0Acolor=3D#6e00aa>400</FONT>; <FONT color=3D#00800=
0>// =0A400ms</FONT><BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;=
<FONT =0Acolor=3D#0000ff><B>else</B></FONT> <FONT color=3D#0000ff=
><B>if</B></FONT>(clock<FONT =0Acolor=3D#333399>&gt;</FONT><FONT=20=
color=3D#333399>=3D</FONT>count) <FONT =0Acolor=3D#008000>// =0Ap=
asswd</FONT><BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;<F=
ONT =0Acolor=3D#0000ff><B>break</B></FONT>;<BR>&nbsp;&nbsp;&nbsp;=
}<BR>&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(=
clock <FONT color=3D#333399>&gt;</FONT> =0Aled)<BR>&nbsp;&nbsp;&n=
bsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;led <FONT =0Acolor=3D#333399>=3D=
</FONT> clock<FONT color=3D#333399>+</FONT><FONT =0Acolor=3D#6e00=
aa>100</FONT>; <FONT color=3D#008000>// =0A0.1s</FONT><BR>&nbsp;&=
nbsp;&nbsp;&nbsp;Qi.reversal(<FONT =0Acolor=3D#333399>&amp;</FONT=
>led1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;Qi.reversal(<FONT =0Acolor=3D#=
333399>&amp;</FONT>led2);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}=
<BR>&nbsp;&nbsp;cram_entry();<BR>&nbsp;}<BR>&nbsp;<FONT =0Acolor=3D=
#008000>// =B2=E2=CA=D4=BC=D3=C3=DC</FONT><BR>&nbsp;{<BR>&nbsp;&n=
bsp;<FONT color=3D#008000>// =0Aread UID</FONT><BR>&nbsp;&nbsp;ui=
d[<FONT color=3D#6e00aa>0</FONT>]<FONT =0Acolor=3D#333399>=3D</FO=
NT><FONT color=3D#333399>*</FONT>(vu32<FONT =0Acolor=3D#333399>*<=
/FONT>)(0x1FFF7A10);<BR>&nbsp;&nbsp;uid[<FONT =0Acolor=3D#6e00aa>=
1</FONT>]<FONT color=3D#333399>=3D</FONT><FONT =0Acolor=3D#333399=
>*</FONT>(vu32<FONT =0Acolor=3D#333399>*</FONT>)(0x1FFF7A14);<BR>=
&nbsp;&nbsp;uid[<FONT =0Acolor=3D#6e00aa>2</FONT>]<FONT color=3D#=
333399>=3D</FONT><FONT =0Acolor=3D#333399>*</FONT>(vu32<FONT =0Ac=
olor=3D#333399>*</FONT>)(0x1FFF7A18);<BR>&nbsp;&nbsp;<FONT color=3D=
#008000>// =0Apasswd</FONT><BR>&nbsp;&nbsp;<FONT color=3D#008000>=
//passwd_app(passwd, =0Auid);</FONT><BR>&nbsp;&nbsp;passwd_id(pas=
swd, =0Auid);<BR>&nbsp;&nbsp;passwd_sign(passwd, uid);<BR>&nbsp;&=
nbsp;Flag <FONT =0Acolor=3D#333399>=3D</FONT> <FONT color=3D#6e00=
aa>1</FONT>;<BR>#<FONT =0Acolor=3D#0000ff><B>if</B></FONT> <FONT=20=
color=3D#6e00aa>0</FONT><BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008000>=
// read flash</FONT><BR>&nbsp;&nbsp;buf <FONT =0Acolor=3D#333399>=
=3D</FONT> code;<BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//match_=
Read(0x08007C00, (uint16_t*)buf, =0ABUF_LEN/2);</FONT><BR>&nbsp;&=
nbsp;<FONT color=3D#008000>//match_Read(0x08004000, =0A(uint16_t*=
)buf, BUF_LEN/2);</FONT><BR>&nbsp;&nbsp;_mtext <FONT =0Acolor=3D#=
333399>=3D</FONT> (uint32_t<FONT color=3D#333399>*</FONT>)buf;<BR=
>#<FONT =0Acolor=3D#0000ff><B>else</B></FONT><BR>&nbsp;&nbsp;_mte=
xt <FONT =0Acolor=3D#333399>=3D</FONT> (uint32_t<FONT =0Acolor=3D=
#333399>*</FONT>)0x08005C00;<BR>#<FONT =0Acolor=3D#0000ff><B>endi=
f</B></FONT><BR>&nbsp;&nbsp;<FONT color=3D#008000>// =0Amatch</FO=
NT><BR>&nbsp;&nbsp;<FONT color=3D#0000ff><B>for</B></FONT>(led<FO=
NT =0Acolor=3D#333399>=3D</FONT><FONT color=3D#6e00aa>0</FONT>; l=
ed<FONT =0Acolor=3D#333399>&lt;</FONT><FONT color=3D#6e00aa>8</FO=
NT>; led<FONT =0Acolor=3D#333399>++</FONT>)<BR>&nbsp;&nbsp;{<BR>&=
nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(passwd=
[led] <FONT color=3D#333399>!=3D</FONT> =0A_mtext[led]) match<FON=
T color=3D#333399>=3D</FONT><FONT =0Acolor=3D#6e00aa>1</FONT>;<BR=
>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if=
</B></FONT>(<FONT color=3D#6e00aa>0</FONT><FONT =0Acolor=3D#33339=
9>=3D=3D</FONT>match)<BR>&nbsp;{<BR>&nbsp;&nbsp;code_entry();<BR>=
&nbsp;&nbsp;uart_init(<FONT =0Acolor=3D#6e00aa>115200</FONT>);<BR=
>&nbsp;&nbsp;QiFreeConfigLog((uint32_t<FONT =0Acolor=3D#333399>*<=
/FONT>)LinkAddress);<BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//pr=
intf("QiFreeUSBS version %s.%s.%s\r\n", VERSION, PATCHLEVEL, =0AS=
UBLEVEL);</FONT><BR>&nbsp;&nbsp;mount_storage();<BR>&nbsp;}<BR>&n=
bsp;uart_init(<FONT =0Acolor=3D#6e00aa>115200</FONT>);<BR>&nbsp;<=
FONT color=3D#0000ff><B>while</B></FONT> =0A(<FONT color=3D#6e00a=
a>1</FONT>)<BR>&nbsp;{<BR>&nbsp;&nbsp;Qi.reversal(<FONT =0Acolor=3D=
#333399>&amp;</FONT>led1);<BR>&nbsp;&nbsp;Qi.reversal(<FONT =0Aco=
lor=3D#333399>&amp;</FONT>led2);<BR>&nbsp;&nbsp;printf(<FONT =0Ac=
olor=3D#ff00bf>"Passwd Error!\r\n"</FONT>);<BR>&nbsp;&nbsp;delay_=
ms(<FONT =0Acolor=3D#6e00aa>1000</FONT>);&nbsp;&nbsp;&nbsp;<BR>&n=
bsp;}<BR>} </DIV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm=20=
0cm 0pt; WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TR=
ANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE:=20=
normal; LETTER-SPACING: normal; orphans: auto; widows: auto; webk=
it-text-stroke-width: 0px"><BR>=C8=BB=BA=F3=CE=D2=C3=C7=BE=CD=BF=C9=
=D2=D4=B2=A2=D2=D4=B2=A2=CA=B9=D3=C3=C7=B0=C3=E6=B5=C4=B7=BD=B7=A8=
=CD=A8=B9=FD =0ADFU=CF=C2=D4=D8=B2=E2=CA=D4=C1=CB=A1=A3=D0=E8=D2=AA=
=D7=A2=D2=E2=B5=C4=CA=C7=CE=D2=C3=C7=B5=C4=BC=D3=C3=DC=CA=FD=BE=DD=
=B7=C5=D4=DA 0x08005C00=D5=E2=B8=F6=B5=D8=D6=B7=A3=AC=D5=E2=B8=F6=
=BE=F8=B6=D4=B2=BB=C4=DC=B4=ED=A3=AC=D2=BB=B5=A9=B4=ED=C1=CB=BE=CD=
=BB=E1=CC=E1=CA=BE=A3=BA<FONT =0Acolor=3D#ff00bf>"Passwd Error!\r=
\n"</FONT>=A1=A3=D5=E2=D1=F9=CE=D2=C3=C7=BE=CD=CA=B5=CF=D6=C1=CB=D2=
=BB=B8=F6=B9=A6=C4=DC=CD=EA=D5=FB=B5=C4 =0AUSBS=A1=A3<BR><BR>&nbs=
p;&nbsp;&nbsp; <STRONG><SPAN id=3Dwiz_font_size_span_52565781 =0A=
style=3D"FONT-SIZE: 16pt"><STRONG>=C4=C7</STRONG></SPAN></STRONG>=
=C3=B4=B5=BD=D5=E2=C0=EF USBS=D4=DA =0AF4=C6=BD=CC=A8=B5=C4=D2=C6=
=D6=B2=BE=CD=B8=E6=D2=BB=B6=CE=C2=E4=C1=CB=A1=A3=B2=BB=B9=FD=B4=CB=
=CA=B1=CE=D2=B2=E9=BF=B4=C1=CB=CF=C2 map=CE=C4=BC=FE=A3=AC=B7=A2=CF=
=D6 16K=C8=B7=CA=B5=BF=C9=D2=D4=CA=B5=CF=D6=A3=AC=C4=C7=C3=B4=CE=D2=
=C3=C7=CF=C2=D2=BB=D5=C2=BD=DA=BE=CD=C0=B4=CB=B5=CA=C7=D4=F5=C3=B4=
=D3=C3 =0A16K=C0=B4=CA=B5=CF=D6=A1=A3<BR></P></BODY></HTML>=0A

------=_Next_Part_0058332000.716--

------=_Next_Part_0174996000.421--

