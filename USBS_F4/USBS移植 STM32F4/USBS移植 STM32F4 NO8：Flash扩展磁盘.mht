From: WizBrother WizMime<support@wizbrother.com>
Subject: =?gb2312?B?VVNCU9LG1rIgU1RNMzJGNCBOTzijukZsYXNowKnVubTFxcw=?=
Date: Date: Fri, 19 Jun 2015 01:03:21 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0174995154.961"

This is a multi-part message in MIME format.

------=_Next_Part_0174995154.961
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0058331718.491"


------=_Next_Part_0058331718.491
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0058331718.491
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">=0A=
<HTML><HEAD>=0D=0A<meta http-equiv=3D"Content-Type" content=3D"te=
xt/html; charset=3Dgb2312"><TITLE>USBS=D2=C6=D6=B2 STM32F4 NO8=A3=
=BAFlash=C0=A9=D5=B9=B4=C5=C5=CC</TITLE>=0A=0A<STYLE type=3Dtext/=
css>=0Abody, p, th, td, li, ul, ol, h1, h2, h3, h4, h5, h6, pre=0A=
{=0A	font-family: =CB=CE=CC=E5;=0A	line-height: 1.4;=0A}=0Abody,=20=
p, th, td, li, ul, ol, pre=0A{=0A	font-size: 12px;=0A}=0A</STYLE>=
=0A=0A<META content=3D"MSHTML 6.00.2900.6550" name=3DGENERATOR></=
HEAD>=0A<BODY><FONT face=3D"Times New Roman"><FONT size=3D7><STRO=
NG>USBS=D2=C6=D6=B2 STM32F4 =0ANO8=A3=BAFlash=C0=A9=D5=B9=B4=C5=C5=
=CC<BR></STRONG></FONT><FONT =0Asize=3D3>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A--------<SPAN class=
=3DApple-converted-space>&nbsp;</SPAN></FONT></FONT><SPAN =0Astyl=
e=3D"FONT-FAMILY: =CB=CE=CC=E5"><FONT size=3D3>=D7=AA=D4=D8=C7=EB=
=D7=A2=C3=F7=B3=F6=B4=A6<BR><FONT =0Aface=3D"Times New Roman">&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A=
--------<SPAN class=3DApple-converted-space>&nbsp;=B8=FC=B6=E0=B1=
=CA=BC=C7=C7=EB=B7=C3=CE=CA=A3=BA<A =0Ahref=3D"http://merafour.bl=
og.163.com/">merafour.blog.163.com</A>&nbsp;</SPAN></FONT></FONT>=
</SPAN> =0A=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0p=
t; WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFOR=
M: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal=
; LETTER-SPACING: normal; orphans: auto; widows: auto; webkit-tex=
t-stroke-width: 0px"><FONT =0Asize=3D3><SPAN style=3D"FONT-FAMILY=
: =CB=CE=CC=E5"><SPAN lang=3DEN-US><FONT =0Aface=3D"Times New Rom=
an">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp; =0A</FONT></SPAN></SPAN><SPAN lang=3DEN-US><FONT face=3D"Ti=
mes New Roman">-------- =0A2015-6-16.</FONT></SPAN><SPAN style=3D=
"FONT-FAMILY: =CB=CE=CC=E5">=C0=E4=D4=C2=D7=B7=B7=E7</SPAN><SPAN=20=
=0Alang=3DEN-US><FONT face=3D"Times New Roman"></FONT></SPAN></FO=
NT></P>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; W=
ORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: n=
one; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LE=
TTER-SPACING: normal; orphans: auto; widows: auto; webkit-text-st=
roke-width: 0px"><FONT =0Asize=3D3><SPAN lang=3DEN-US><FONT =0Afa=
ce=3D"Times New Roman"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN =0Aclass=3DApple-converted-sp=
ace>&nbsp;</SPAN></SPAN>-------- =0Aemail</FONT></SPAN><SPAN styl=
e=3D"FONT-FAMILY: =CB=CE=CC=E5">=A3=BA</SPAN><SPAN lang=3DEN-US><=
FONT =0Aface=3D"Times New Roman"><A =0Ahref=3D"mailto:merafour@16=
3.com">merafour@163.com</A><SPAN =0Aclass=3DApple-converted-space=
>&nbsp;</SPAN></FONT></SPAN></FONT><BR></P>=0A<HR>=0A=0A<P class=3D=
MsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px; FON=
T: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0=
); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal;=
 orphans: auto; widows: auto; webkit-text-stroke-width: 0px"><BR>=
<FONT =0Acolor=3D#ff0000>&nbsp;&nbsp;&nbsp; <STRONG><SPAN id=3Dwi=
z_font_size_span_25612281 =0Astyle=3D"FONT-SIZE: 16pt"><STRONG>US=
BS</STRONG></SPAN></STRONG>=D7=EE=B3=F5=CA=C7=B1=CA=D5=DF=BB=F9=D3=
=DA =0ASTM32F103=CF=B5=C1=D0=BF=AA=B7=A2=B3=F6=C0=B4=B5=C4=D2=BB=B8=
=F6 =0Abootloader=A3=AC=CD=A8=B9=FD=B0=D1=C9=E8=B1=B8=D7=F6=B3=C9=
=D2=BB=B8=F6USB=BD=D3=BF=DA=B5=C4=B4=E6=B4=A2=C9=E8=B1=B8=BC=B4U=C5=
=CC=B4=D3=B6=F8=B0=DA=CD=D1=D2=D4=CD=F9=C9=FD=BC=B6=B9=CC=BC=FE=B9=
=FD=B3=CC=D6=D0=CB=F9=D0=E8=D2=AA=B5=C4=C9=CF=CE=BB=BB=FA=B8=FA=C7=
=FD=B6=AF(=BC=B4=C3=E2=C7=FD)=A1=A3USBS=C8=AB=B3=C6=CA=C7=A3=BA"U=
SB =0AStorage"=A3=AC=BE=DF=D3=D0=D2=BB=CF=C2=CC=D8=B5=E3=A3=BA<BR=
><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =D2=BB=A1=A2=D6=BB=
=D2=AA=C4=E3=B5=C4=B2=D9=D7=F7=CF=B5=CD=B3=D6=A7=B3=D6 =0AU=C5=CC=
=D4=AD=D4=F2=C9=CF=B6=BC=BF=C9=D2=D4=CA=B9=D3=C3=A3=AC=C4=BF=C7=B0=
=D2=D1=BE=AD=B2=E2=CA=D4=C1=CB =0AWindows=A1=A2Ubuntu=B8=FA=C6=BB=
=B9=FB=A3=BB<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =B6=FE=
=A1=A2=BF=C9=CD=A8=B9=FD =0APC=B6=CB=C8=ED=BC=FE=C5=E4=D6=C3=CB=F9=
=CA=B9=D3=C3=B5=C4 IO=B2=A2=C9=E8=D6=C3=C6=E4=D3=E0 IO=B5=C4=C4=AC=
=C8=CF=CA=E4=B3=F6=A3=AC=D2=B2=BE=CD=CA=C7=CB=B5=BC=EC=B2=E2 IO=B8=
=FA LED=D6=B8=CA=BE =0AIO=D3=C3=BB=A7=BF=C9=D2=D4=D7=D4=B6=A8=D2=E5=
=A3=BB<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =C8=FD=A1=A2=
=D7=D4=B4=F8=B2=BB=D2=C0=C0=B5=CD=E2=B2=BF EEPROM=B5=C4=BC=D3=C3=DC=
=CB=E3=B7=A8=A3=AC =0A32B=BC=D3=C3=DC=CA=FD=BE=DD=C8=B7=B1=A3=B3=CC=
=D0=F2=B6=C1=B5=BD=C1=ED=CD=E2=D2=BB=BF=C5 IC=C9=CF=B2=BB=C4=DC=D4=
=CB=D0=D0=A3=BB<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =CB=
=C4=A1=A2=CE=AA =0AApp=CC=E1=B9=A9=B5=A5=B6=C0=B5=C4=BC=D3=C3=DC=CB=
=E3=B7=A8(32B)=A3=AC=D3=C3=BB=A7=BF=C9=CD=A8=B9=FD PC=C8=ED=BC=FE=
=C9=E8=D6=C3=BC=D3=C3=DC "licence"=A1=A3</FONT><BR><BR>&nbsp;&nbs=
p;&nbsp; =0A<STRONG><SPAN id=3Dwiz_font_size_span_17581296 =0Asty=
le=3D"FONT-SIZE: 16pt"><STRONG>=BD=F1</STRONG></SPAN></STRONG>=CC=
=EC=CE=D2=C3=C7=D2=AA=D7=F6=B5=C4=D2=BB=BC=FE=CA=C2=BE=CD=CA=C7=D3=
=C3 =0AFlash=C0=A9=D5=B9=B4=C5=C5=CC=A3=AC=CD=A8=B9=FD=D3=C3 Flas=
h=BD=F8=D0=D0=C0=A9=D5=B9=CE=D2=C3=C7=BE=CD=BF=C9=D2=D4=D4=DA=B5=E7=
=C4=D4=C9=CF=CF=F1=B2=D9=D7=F7 U=C5=CC=D2=BB=D1=F9=B0=D1=D2=BB=B8=
=F6=CE=C4=BC=FE=BF=BD=B1=B4=B5=BD =0AFlash=D6=D0=A3=AC=B6=F8=C8=E7=
=B9=FB=D5=E2=B8=F6=CE=C4=BC=FE=B8=D5=BA=C3=CA=C7=D2=BB=B8=F6=B3=CC=
=D0=F2=CE=D2=C3=C7=D2=B2=BE=CD=B5=C8=D3=DA=B0=D1=B3=CC=D0=F2=CF=C2=
=D4=D8=B5=BD Flash=D6=D0=C1=CB=A1=A3=D7=EE=BA=F3=D4=DA=D4=F6=BC=D3=
=D2=BB=B8=F6=D2=FD=B5=BC=B9=A6=C4=DC=CE=D2=C3=C7=BE=CD=CD=EA=B3=C9=
=C1=CB=D2=BB=B8=F6 bootloader=A1=A3=B5=AB=CA=C7=D3=C9=D3=DA =0AF4=
=C9=C8=C7=F8=B4=F3=A3=AC=CE=D2=C3=BB=D3=D0=D7=F6=CA=FD=BE=DD=B1=A3=
=BB=A4=A3=AC=CB=F9=D2=D4=CD=F9=C9=C8=C7=F8=D0=B4=CA=FD=BE=DD=B5=C4=
=CA=B1=BA=F2=C8=E7=B9=FB=D2=AA=D0=B4=B5=C4=C7=F8=D3=F2=B2=BB=CE=AA=
=BF=D5=D4=F2=BB=E1=B6=AA=CA=A7=D5=FB=B8=F6=C9=C8=C7=F8=B5=C4=CA=FD=
=BE=DD=A1=A3=B2=BB=B9=FD=D4=DA=BE=DF=CC=E5=B2=D9=D7=F7=D6=AE=C7=B0=
=CE=D2=C3=C7=D0=E8=D2=AA=CF=C8=B6=D4 =0AFlash=B7=D6=C7=F8=A3=AC=D2=
=D4=C8=B7=B6=A8=C4=C7=BF=E9=C7=F8=D3=F2=B7=C5=CA=B2=C3=B4=CA=FD=BE=
=DD=A1=A3=CE=D2=B5=C4=D7=F6=B7=A8=CA=C7=C7=B0=C1=BD=B8=F6=C9=C8=C7=
=F8(32K)=D3=C3=C0=B4=B7=C5 =0AUSBS=A3=AC=BA=F3=C3=E6=C8=AB=B2=BF=D3=
=C3=C0=B4=B7=C5=B9=CC=BC=FE=A1=A3&nbsp;&nbsp;<BR><BR>&nbsp;&nbsp;=
&nbsp; <SPAN =0Aid=3Dwiz_font_size_span_28458765 =0Astyle=3D"FONT=
-SIZE: 16pt"><STRONG>=CD=AC</STRONG></SPAN>=D1=F9=BD=AB=C9=CF=D2=BB=
=B2=BD=B5=C4=D4=B4=C2=EB=BF=BD=B1=B4=D2=BB=B7=DD=A3=AC=B2=A2=C3=FC=
=C3=FB=CE=AA=A3=BAUSBS_V0.7.21=A1=A3<BR><BR>&nbsp;&nbsp;&nbsp; =0A=
<STRONG><SPAN id=3Dwiz_font_size_span_11785906 =0Astyle=3D"FONT-S=
IZE: 16pt"><STRONG>=C8=BB</STRONG></SPAN></STRONG>=BA=F3=CE=D2=C3=
=C7=D4=DA USBS=C4=BF=C2=BC=C9=FA=B3=C9=C1=BD=B8=F6=D4=B4=CE=C4=BC=
=FE =0AFlash.c=B8=FA Flash.h=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BOR=
DER-RIGHT: black 1px solid; PADDING-RIGHT: 3px; BORDER-TOP: black=
 1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: auto=
; BORDER-LEFT: black 1px solid; COLOR: black; MARGIN-RIGHT: auto;=
 PADDING-TOP: 3px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY: C=
ourier New; BACKGROUND-COLOR: window; TEXT-ALIGN: left; 3px: "><F=
ONT =0Acolor=3D#008000>// Flash.h</FONT><BR>#<FONT color=3D#0000f=
f><B>include</B></FONT> =0A<FONT color=3D#333399>&lt;</FONT>stdin=
t.h<FONT color=3D#333399>&gt;</FONT><BR><FONT =0Acolor=3D#008000>=
// Flash Base Addr</FONT><BR>#<FONT =0Acolor=3D#0000ff><B>define<=
/B></FONT> STM32_FLASH_BASE =0A0x08000000&nbsp;&nbsp;<BR><FONT co=
lor=3D#0000ff><B>int</B></FONT> =0AFlash_Write(uint32_t <FONT col=
or=3D#0000ff><B>const</B></FONT> WriteAddr,uint32_t =0A<FONT colo=
r=3D#0000ff><B>const</B></FONT> <FONT =0Acolor=3D#333399>*</FONT>=
pBuffer,uint32_t <FONT color=3D#0000ff><B>const</B></FONT> =0ANum=
ToWrite);<BR><FONT color=3D#0000ff><B>int</B></FONT> Flash_Read(u=
int32_t =0AReadAddr,uint32_t <FONT color=3D#333399>*</FONT>pBuffe=
r,uint32_t =0ANumToRead);<BR><FONT color=3D#008000>=0A<HR>=0A// F=
lash.c</FONT><BR>#<FONT color=3D#0000ff><B>include</B></FONT> <FO=
NT =0Acolor=3D#ff00bf>"Flash.h"</FONT><BR>#<FONT color=3D#0000ff>=
<B>include</B></FONT> =0A<FONT color=3D#ff00bf>"stm32f4xx.h"</FON=
T><BR>#<FONT =0Acolor=3D#0000ff><B>include</B></FONT> <FONT color=
=3D#333399>&lt;</FONT>stdio.h<FONT =0Acolor=3D#333399>&gt;</FONT>=
<BR><FONT color=3D#008000>// Flash Sector =0AAddr</FONT><BR><FONT=
 color=3D#008000>//#define =0AADDR_FLASH_SECTOR_0&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;((uint32_t)0x08000000)&nbsp;&nbsp;// =0A16 Kbytes</=
FONT>&nbsp;&nbsp;<BR><FONT color=3D#008000>//#define =0AADDR_FLAS=
H_SECTOR_1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x08004000)&nb=
sp;&nbsp;// =0A16 Kbytes</FONT>&nbsp;&nbsp;<BR><FONT color=3D#008=
000>//#define =0AADDR_FLASH_SECTOR_2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;((uint32_t)0x08008000)&nbsp;&nbsp;// =0A16 Kbytes</FONT>&nbsp;&n=
bsp;<BR><FONT color=3D#008000>//#define =0AADDR_FLASH_SECTOR_3&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x0800C000)&nbsp;&nbsp;// =0A=
16 Kbytes</FONT>&nbsp;&nbsp;<BR><FONT color=3D#008000>//#define =0A=
ADDR_FLASH_SECTOR_4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x080=
10000)&nbsp;&nbsp;// =0A64 Kbytes</FONT>&nbsp;&nbsp;<BR><FONT col=
or=3D#008000>//#define =0AADDR_FLASH_SECTOR_5&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;((uint32_t)0x08020000)&nbsp;&nbsp;// =0A128 Kbytes</FON=
T>&nbsp;&nbsp;<BR><FONT color=3D#008000>//#define =0AADDR_FLASH_S=
ECTOR_6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x08040000)&nbsp;=
&nbsp;// =0A128 Kbytes</FONT>&nbsp;&nbsp;<BR><FONT color=3D#00800=
0>//#define =0AADDR_FLASH_SECTOR_7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(=
(uint32_t)0x08060000)&nbsp;&nbsp;// =0A128 Kbytes</FONT>&nbsp;&nb=
sp;<BR><FONT color=3D#008000>//#define =0AADDR_FLASH_SECTOR_8&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x08080000)&nbsp;&nbsp;// =0A=
128 Kbytes</FONT>&nbsp;&nbsp;<BR><FONT color=3D#008000>//#define=20=
=0AADDR_FLASH_SECTOR_9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x=
080A0000)&nbsp;&nbsp;// =0A128 Kbytes</FONT>&nbsp;&nbsp;<BR><FONT=
 color=3D#008000>//#define =0AADDR_FLASH_SECTOR_10&nbsp;&nbsp;&nb=
sp;&nbsp;((uint32_t)0x080C0000)&nbsp;&nbsp;// =0A128 Kbytes</FONT=
>&nbsp;&nbsp;<BR><FONT color=3D#008000>//#define =0AADDR_FLASH_SE=
CTOR_11&nbsp;&nbsp;&nbsp;&nbsp;((uint32_t)0x080E0000)&nbsp;&nbsp;=
// =0A128 Kbytes</FONT>&nbsp;<BR><FONT color=3D#0000ff><B>static<=
/B></FONT> uint16_t =0AFlash_Sector_Map[]<FONT color=3D#333399>=3D=
</FONT>{<BR>&nbsp;<FONT color=3D#008000>// =0A16K</FONT><BR>&nbsp=
;FLASH_Sector_0,<BR>&nbsp;<FONT color=3D#008000>// =0A16K</FONT><=
BR>&nbsp;FLASH_Sector_1,<BR>&nbsp;<FONT color=3D#008000>// =0A16K=
</FONT><BR>&nbsp;FLASH_Sector_2,<BR>&nbsp;<FONT color=3D#008000>/=
/ =0A16K</FONT><BR>&nbsp;FLASH_Sector_3,<BR>&nbsp;<FONT color=3D#=
008000>// =0A64K</FONT><BR>&nbsp;FLASH_Sector_4,FLASH_Sector_4,FL=
ASH_Sector_4,FLASH_Sector_4,<BR>&nbsp;<FONT =0Acolor=3D#008000>//=
 =0A128K</FONT><BR>&nbsp;FLASH_Sector_5,FLASH_Sector_5,FLASH_Sect=
or_5,FLASH_Sector_5,<BR>&nbsp;FLASH_Sector_5,FLASH_Sector_5,FLASH=
_Sector_5,FLASH_Sector_5,<BR>&nbsp;<FONT =0Acolor=3D#008000>// =0A=
128K</FONT><BR>&nbsp;FLASH_Sector_6,FLASH_Sector_6,FLASH_Sector_6=
,FLASH_Sector_6,<BR>&nbsp;FLASH_Sector_6,FLASH_Sector_6,FLASH_Sec=
tor_6,FLASH_Sector_6,<BR>&nbsp;<FONT =0Acolor=3D#008000>// =0A128=
K</FONT><BR>&nbsp;FLASH_Sector_7,FLASH_Sector_7,FLASH_Sector_7,FL=
ASH_Sector_7,<BR>&nbsp;FLASH_Sector_7,FLASH_Sector_7,FLASH_Sector=
_7,FLASH_Sector_7,<BR>&nbsp;<FONT =0Acolor=3D#008000>// =0A128K</=
FONT><BR>&nbsp;FLASH_Sector_8,FLASH_Sector_8,FLASH_Sector_8,FLASH=
_Sector_8,<BR>&nbsp;FLASH_Sector_8,FLASH_Sector_8,FLASH_Sector_8,=
FLASH_Sector_8,<BR>&nbsp;<FONT =0Acolor=3D#008000>// =0A128K</FON=
T><BR>&nbsp;FLASH_Sector_9,FLASH_Sector_9,FLASH_Sector_9,FLASH_Se=
ctor_9,<BR>&nbsp;FLASH_Sector_9,FLASH_Sector_9,FLASH_Sector_9,FLA=
SH_Sector_9,<BR>&nbsp;<FONT =0Acolor=3D#008000>// =0A128K</FONT><=
BR>&nbsp;FLASH_Sector_10,FLASH_Sector_10,FLASH_Sector_10,FLASH_Se=
ctor_10,<BR>&nbsp;FLASH_Sector_10,FLASH_Sector_10,FLASH_Sector_10=
,FLASH_Sector_10,<BR>&nbsp;<FONT =0Acolor=3D#008000>// =0A128K</F=
ONT><BR>&nbsp;FLASH_Sector_11,FLASH_Sector_11,FLASH_Sector_11,FLA=
SH_Sector_11,<BR>&nbsp;FLASH_Sector_11,FLASH_Sector_11,FLASH_Sect=
or_11,FLASH_Sector_11,<BR>};<BR><FONT =0Acolor=3D#0000ff><B>stati=
c</B></FONT> <FONT color=3D#0000ff><B>const</B></FONT> =0Auint32_=
t Sector_Map_Size <FONT color=3D#333399>=3D</FONT> <FONT =0Acolor=
=3D#0000ff><B>sizeof</B></FONT>(Flash_Sector_Map)<FONT =0Acolor=3D=
#333399>/</FONT><FONT =0Acolor=3D#0000ff><B>sizeof</B></FONT>(Fla=
sh_Sector_Map[<FONT =0Acolor=3D#6e00aa>0</FONT>]);<BR><FONT color=
=3D#0000ff><B>static</B></FONT> =0AFlashSectorNo(uint32_t addr)<B=
R>{<BR><FONT color=3D#008000>// uint32_t =0ANo=3D0;</FONT><BR><FO=
NT color=3D#008000>// //uint32_t size =3D =0Asizeof(Flash_Sector_=
Map)/sizeof(Flash_Sector_Map[0]);</FONT><BR><FONT =0Acolor=3D#008=
000>// addr &gt;&gt;=3D 14; // 0x4000</FONT><BR><FONT color=3D#00=
8000>// =0A//addr &amp;=3D 0x3FF; // 0x004000 =3D=3D&gt; 0x3FF</F=
ONT><BR><FONT color=3D#008000>// =0ANo =3D addr&amp;0xFF;</FONT><=
BR><FONT color=3D#008000>// if(No &gt; Sector_Map_Size) =0ANo=3DS=
ector_Map_Size;</FONT><BR><FONT color=3D#008000>// return =0AFlas=
h_Sector_Map[No];</FONT>&nbsp;<BR>&nbsp;<FONT color=3D#008000>//a=
ddr &gt;&gt;=3D =0A14; // 0x4000</FONT><BR>&nbsp;<FONT color=3D#0=
08000>//addr =3D =0Aaddr&amp;0xFF;</FONT><BR>&nbsp;addr <FONT col=
or=3D#333399>=3D</FONT> (addr<FONT =0Acolor=3D#333399>&gt;&gt;</F=
ONT><FONT color=3D#6e00aa>14</FONT>)<FONT =0Acolor=3D#333399>&amp=
;</FONT>0xFF;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(=
addr <FONT color=3D#333399>&gt;</FONT> =0ASector_Map_Size) addr<F=
ONT color=3D#333399>=3D</FONT>Sector_Map_Size;<BR>&nbsp;<FONT =0A=
color=3D#0000ff><B>return</B></FONT> Flash_Sector_Map[addr];&nbsp=
;<BR>}<BR><FONT =0Acolor=3D#0000ff><B>int</B></FONT> Flash_Write(=
uint32_t <FONT =0Acolor=3D#0000ff><B>const</B></FONT> WriteAddr,u=
int32_t <FONT =0Acolor=3D#0000ff><B>const</B></FONT> <FONT color=3D=
#333399>*</FONT>pBuffer,uint32_t =0A<FONT color=3D#0000ff><B>cons=
t</B></FONT> =0ANumToWrite)&nbsp;<BR>{&nbsp;<BR>&nbsp;FLASH_Statu=
s status <FONT =0Acolor=3D#333399>=3D</FONT> FLASH_COMPLETE;&nbsp=
;<BR>&nbsp;uint32_t size <FONT =0Acolor=3D#333399>=3D</FONT> <FON=
T color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>=
volatile</B></FONT> <FONT color=3D#0000ff><B>const</B></FONT> =0A=
uint32_t<FONT color=3D#333399>*</FONT> <FONT color=3D#0000ff><B>c=
onst</B></FONT> =0AFlashAddr<FONT color=3D#333399>=3D</FONT>(<FON=
T color=3D#0000ff><B>volatile</B></FONT> =0Auint32_t<FONT color=3D=
#333399>*</FONT>)WriteAddr;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>=
if</B></FONT>(WriteAddr<FONT =0Acolor=3D#333399>&lt;</FONT>STM32_=
FLASH_BASE<FONT =0Acolor=3D#333399>||</FONT>WriteAddr<FONT color=3D=
#333399>%</FONT><FONT =0Acolor=3D#6e00aa>4</FONT>) <FONT color=3D=
#0000ff><B>return</B></FONT> <FONT =0Acolor=3D#333399>-</FONT><FO=
NT color=3D#6e00aa>1</FONT>; <FONT color=3D#008000>// Addr =0Aerr=
or</FONT><BR>&nbsp;FLASH_Unlock();<BR>&nbsp;FLASH_DataCacheCmd(DI=
SABLE);<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(WriteA=
ddr<FONT =0Acolor=3D#333399>&lt;</FONT>0X1FFF0000)<BR>&nbsp;{<BR>=
&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff><B>for</B></FONT>(size<FONT=20=
color=3D#333399>=3D</FONT><FONT =0Acolor=3D#6e00aa>0</FONT>; size=
<FONT color=3D#333399>&lt;</FONT>NumToWrite; size<FONT =0Acolor=3D=
#333399>++</FONT>)<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;<FONT =0A=
color=3D#0000ff><B>if</B></FONT>(FlashAddr[size]<FONT =0Acolor=3D=
#333399>!=3D</FONT>0XFFFFFFFF)<FONT color=3D#008000>// =0Aempty</=
FONT><BR>&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nb=
sp;&nbsp;status<FONT =0Acolor=3D#333399>=3D</FONT>FLASH_EraseSect=
or(FlashSectorNo(WriteAddr<FONT =0Acolor=3D#333399>+</FONT>size<F=
ONT color=3D#333399>*</FONT><FONT =0Acolor=3D#6e00aa>4</FONT>),Vo=
ltageRange_3);<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#0000f=
f><B>if</B></FONT>(status<FONT =0Acolor=3D#333399>!=3D</FONT>FLAS=
H_COMPLETE)<FONT =0Acolor=3D#0000ff><B>break</B></FONT>;<BR>&nbsp=
;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}&nbsp;<BR>&nbsp;}<BR>&nbsp;<FONT =0A=
color=3D#0000ff><B>if</B></FONT>(status<FONT =0Acolor=3D#333399>=3D=
=3D</FONT>FLASH_COMPLETE)<BR>&nbsp;{<BR>&nbsp;&nbsp;<FONT =0Acolo=
r=3D#0000ff><B>for</B></FONT>(size<FONT color=3D#333399>=3D</FONT=
><FONT =0Acolor=3D#6e00aa>0</FONT>; size<FONT color=3D#333399>&lt=
;</FONT>NumToWrite; size<FONT =0Acolor=3D#333399>++</FONT>)<BR>&n=
bsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff><B>if</=
B></FONT>(FLASH_ProgramWord(WriteAddr<FONT =0Acolor=3D#333399>+</=
FONT>size<FONT color=3D#333399>*</FONT><FONT =0Acolor=3D#6e00aa>4=
</FONT>,pBuffer[size])<FONT =0Acolor=3D#333399>!=3D</FONT>FLASH_C=
OMPLETE)<FONT color=3D#008000>// =0Awrite</FONT><BR>&nbsp;&nbsp;&=
nbsp;{&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff>=
<B>break</B></FONT>; <FONT color=3D#008000>// =0Aerror</FONT><BR>=
&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}&nbsp;<BR>&nbsp;}<BR>&nbsp;FL=
ASH_DataCacheCmd(ENABLE);<BR>&nbsp;FLASH_Lock();<BR>&nbsp;<FONT =0A=
color=3D#0000ff><B>return</B></FONT> <FONT color=3D#6e00aa>0</FON=
T>;<BR>}<BR><FONT =0Acolor=3D#0000ff><B>int</B></FONT> Flash_Read=
(uint32_t ReadAddr,uint32_t <FONT =0Acolor=3D#333399>*</FONT>pBuf=
fer,uint32_t =0ANumToRead)&nbsp;&nbsp;&nbsp;&nbsp;<BR>{<BR>&nbsp;=
uint32_t i;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>volatile</B></FO=
NT> <FONT color=3D#0000ff><B>const</B></FONT> =0Auint32_t<FONT co=
lor=3D#333399>*</FONT> FlashAddr <FONT color=3D#333399>=3D</FONT>=
 =0ANULL;<BR>&nbsp;FlashAddr <FONT color=3D#333399>=3D</FONT> (<F=
ONT =0Acolor=3D#0000ff><B>volatile</B></FONT> uint32_t<FONT =0Aco=
lor=3D#333399>*</FONT>)ReadAddr;<BR>&nbsp;<FONT =0Acolor=3D#0000f=
f><B>for</B></FONT>(i<FONT color=3D#333399>=3D</FONT><FONT =0Acol=
or=3D#6e00aa>0</FONT>;i<FONT color=3D#333399>&lt;</FONT>NumToRead=
;i<FONT =0Acolor=3D#333399>++</FONT>)<BR>&nbsp;{&nbsp;<BR>&nbsp;&=
nbsp;pBuffer[i]<FONT =0Acolor=3D#333399>=3D</FONT>FlashAddr[i]; <=
FONT color=3D#008000>// read 4 =0AByte</FONT><BR>&nbsp;}<BR>&nbsp=
;<FONT color=3D#0000ff><B>return</B></FONT> <FONT =0Acolor=3D#6e0=
0aa>0</FONT>;<BR>}</DIV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGI=
N: 0cm 0cm 0pt; WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5;=20=
TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-=
SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: aut=
o; webkit-text-stroke-width: 0px"><BR>FlashSectorNo=BA=AF=CA=FD=B1=
=BB=D7=A2=CA=CD=B5=C4=B2=BF=B7=D6=B4=FA=C2=EB=CA=B5=BC=CA=C9=CF=CA=
=C7=CE=AA=C1=CB=B8=E6=CB=DF=B6=C1=D5=DF =0Amap=B1=ED=B5=C4=CB=F7=D2=
=FD=CA=C7=C8=E7=BA=CE=BC=C6=CB=E3=B5=C4=A3=AC=CB=F9=D2=D4=B1=A3=C1=
=F4=C1=CB=A1=A3<BR><BR>&nbsp;&nbsp;&nbsp; <STRONG><SPAN =0Aid=3Dw=
iz_font_size_span_22713796 =0Astyle=3D"FONT-SIZE: 16pt"><STRONG>=BD=
=D3</STRONG></SPAN></STRONG>=CF=C2=C0=B4=CE=D2=C3=C7=D0=E8=D2=AA=D0=
=DE=B8=C4 =0Ausbd_storage_msd.c=D4=B4=CE=C4=BC=FE=A3=AC=D6=F7=D2=AA=
=CA=C7=C8=FD=B8=F6=BA=AF=CA=FD=A3=BA<BR></P>=0A<DIV =0Astyle=3D"B=
ORDER-RIGHT: black 1px solid; PADDING-RIGHT: 3px; BORDER-TOP: bla=
ck 1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: au=
to; BORDER-LEFT: black 1px solid; COLOR: black; MARGIN-RIGHT: aut=
o; PADDING-TOP: 3px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY:=
 Courier New; BACKGROUND-COLOR: window; TEXT-ALIGN: left; 3px: ">=
int8_t =0ASTORAGE_GetCapacity (uint8_t lun, uint32_t <FONT =0Acol=
or=3D#333399>*</FONT>block_num, uint32_t <FONT =0Acolor=3D#333399=
>*</FONT>block_size)<BR>{<BR>&nbsp;uint32_t KB<FONT =0Acolor=3D#3=
33399>=3D</FONT><FONT color=3D#6e00aa>256</FONT>;<BR>&nbsp;<FONT=20=
=0Acolor=3D#333399>*</FONT>block_size <FONT color=3D#333399>=3D</=
FONT>&nbsp;&nbsp;<FONT =0Acolor=3D#6e00aa>512</FONT>;&nbsp;&nbsp;=
&nbsp;<BR>&nbsp;KB <FONT =0Acolor=3D#333399>=3D</FONT> (<FONT col=
or=3D#333399>*</FONT>(__IO uint32_t<FONT =0Acolor=3D#333399>*</FO=
NT>)(0x1FFF7A22))<FONT =0Acolor=3D#333399>&amp;</FONT>0xFFFF;<BR>=
&nbsp;<FONT color=3D#333399>*</FONT>block_num =0A<FONT color=3D#3=
33399>=3D</FONT>&nbsp;&nbsp;(KB<FONT color=3D#333399>*</FONT><FON=
T =0Acolor=3D#6e00aa>1024</FONT>) <FONT color=3D#333399>/</FONT>=20=
<FONT =0Acolor=3D#6e00aa>512</FONT>;&nbsp;&nbsp;<BR>&nbsp;<FONT =0A=
color=3D#0000ff><B>return</B></FONT> (<FONT color=3D#6e00aa>0</FO=
NT>);<BR>}<BR>=0A<HR>=0Aint8_t STORAGE_Read (uint8_t =0Alun,&nbsp=
;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t =0A<FONT =0Acol=
or=3D#333399>*</FONT>buf,&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;uint32_t =0Ablk_addr,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;uint16_t =0Ablk_len)<BR>{<BR>&nbsp;int8_t ret <FONT c=
olor=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>0</FONT>;&nbsp=
;<BR>&nbsp;uint32_t Memory_Offset <FONT =0Acolor=3D#333399>=3D</F=
ONT> blk_addr<FONT color=3D#333399>*</FONT><FONT =0Acolor=3D#6e00=
aa>512</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>=
(RAM_FAT32_Offset<FONT =0Acolor=3D#333399>&gt;</FONT>Memory_Offse=
t) <FONT color=3D#008000>// FAT32 =3D=3D&gt; =0ASRAM</FONT><BR>&n=
bsp;{<BR>&nbsp;&nbsp;ret<FONT =0Acolor=3D#333399>=3D</FONT>SRAM_R=
ead(buf, blk_addr<FONT color=3D#333399>*</FONT><FONT =0Acolor=3D#=
6e00aa>512</FONT>, blk_len<FONT color=3D#333399>*</FONT><FONT =0A=
color=3D#6e00aa>512</FONT>) ;<BR>&nbsp;}<BR>&nbsp;<FONT =0Acolor=3D=
#0000ff><B>else</B></FONT><BR>&nbsp;{<BR>&nbsp;&nbsp;Memory_Offse=
t <FONT =0Acolor=3D#333399>-=3D</FONT> (uint32_t)RAM_FAT32_Offset=
;<BR>&nbsp;&nbsp;ret<FONT =0Acolor=3D#333399>=3D</FONT>Flash_Read=
(FLASH_SAVE_ADDR<FONT =0Acolor=3D#333399>+</FONT>Memory_Offset,(u=
32<FONT color=3D#333399>*</FONT>)buf, =0A(blk_len<FONT color=3D#3=
33399>*</FONT><FONT color=3D#6e00aa>512</FONT>)<FONT =0Acolor=3D#=
333399>/</FONT><FONT color=3D#6e00aa>4</FONT>);<BR>&nbsp;}<BR>&nb=
sp;<FONT =0Acolor=3D#0000ff><B>return</B></FONT> ret;<BR>}<BR>=0A=
<HR>=0Aint8_t STORAGE_Write (uint8_t =0Alun,&nbsp;<BR>&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t =0A<FONT =0Acolor=3D#3333=
99>*</FONT>buf,&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;uint32_t =0Ablk_addr,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;uint16_t =0Ablk_len)<BR>{<BR>&nbsp;int8_t ret <FONT color=3D=
#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>0</FONT>;&nbsp;<BR>&n=
bsp;uint32_t Memory_Offset <FONT =0Acolor=3D#333399>=3D</FONT> bl=
k_addr<FONT color=3D#333399>*</FONT><FONT =0Acolor=3D#6e00aa>512<=
/FONT>;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(RAM_FA=
T32_Offset<FONT =0Acolor=3D#333399>&gt;</FONT>Memory_Offset) <FON=
T color=3D#008000>// FAT32 =3D=3D&gt; =0ASRAM</FONT><BR>&nbsp;{<B=
R>&nbsp;&nbsp;ret<FONT =0Acolor=3D#333399>=3D</FONT>SRAM_Write(bu=
f, blk_addr<FONT color=3D#333399>*</FONT><FONT =0Acolor=3D#6e00aa=
>512</FONT>, blk_len<FONT color=3D#333399>*</FONT><FONT =0Acolor=3D=
#6e00aa>512</FONT>);<BR>&nbsp;}<BR>&nbsp;<FONT =0Acolor=3D#0000ff=
><B>else</B></FONT><BR>&nbsp;{<BR>&nbsp;&nbsp;Memory_Offset <FONT=
 =0Acolor=3D#333399>-=3D</FONT> (uint32_t)RAM_FAT32_Offset;<BR>&n=
bsp;&nbsp;ret<FONT =0Acolor=3D#333399>=3D</FONT>Flash_Write(FLASH=
_SAVE_ADDR<FONT =0Acolor=3D#333399>+</FONT>Memory_Offset,(u32<FON=
T color=3D#333399>*</FONT>)buf, =0A(blk_len<FONT color=3D#333399>=
*</FONT><FONT color=3D#6e00aa>512</FONT>)<FONT =0Acolor=3D#333399=
>/</FONT><FONT color=3D#6e00aa>4</FONT>);<BR>&nbsp;}<BR>&nbsp;<FO=
NT =0Acolor=3D#0000ff><B>return</B></FONT> ret;<BR>}</DIV>=0A<P c=
lass=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0=
px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rg=
b(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING:=20=
normal; orphans: auto; widows: auto; webkit-text-stroke-width: 0p=
x"><BR>=D7=EE=BA=F3=BB=B9=D2=AA=D4=DA=CE=C4=BC=FE=B5=C4=BF=AA=CD=B7=
=BC=D3=C8=EB=CF=C2=C3=E6=B6=EE=B4=FA=C2=EB=A3=BA<BR></P>=0A<DIV =0A=
style=3D"BORDER-RIGHT: black 1px solid; PADDING-RIGHT: 3px; BORDE=
R-TOP: black 1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGI=
N-LEFT: auto; BORDER-LEFT: black 1px solid; COLOR: black; MARGIN-=
RIGHT: auto; PADDING-TOP: 3px; BORDER-BOTTOM: black 1px solid; FO=
NT-FAMILY: Courier New; BACKGROUND-COLOR: window; TEXT-ALIGN: lef=
t; 3px: ">#<FONT =0Acolor=3D#0000ff><B>define</B></FONT> =0AFLASH=
_SAVE_ADDR&nbsp;&nbsp;0X08008000&nbsp;&nbsp;<FONT =0Acolor=3D#008=
000>//32K</FONT><BR>#<FONT color=3D#0000ff><B>define</B></FONT> =0A=
RAM_FAT32_Offset_Default 0x00008000 <FONT color=3D#008000>// defa=
ult =0A32K</FONT><BR><FONT color=3D#0000ff><B>static</B></FONT> u=
int32_t RAM_FAT32_Offset =0A<FONT color=3D#333399>=3D</FONT> RAM_=
FAT32_Offset_Default; <FONT color=3D#008000>// =0Adefault 32K</DI=
V>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-S=
PACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none;=20=
COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-=
SPACING: normal; orphans: auto; widows: auto; webkit-text-stroke-=
width: 0px"></FONT><BR>=D7=EE=BA=F3 =0Abuild=B2=A2Download=BE=CD=BF=
=C9=D2=D4=B2=E2=CA=D4=C1=CB=A1=A3=B8=F1=CA=BD=BB=AF=D6=AE=BA=F3=CA=
=A3=D3=E0=B2=EE=B2=BB=B6=E0 0.97MB=A1=A3=D5=E2=B8=F6=CA=B1=BA=F2=CE=
=D2=C3=C7=D4=DA=B4=C5=C5=CC=B8=F9=C4=BF=C2=BC=D0=C2=BD=A8=D2=BB=B8=
=F6=CE=C4=B1=BE=CE=C4=BC=FE=A3=AC=B2=A2=D0=DE=B8=C4=C6=F7=C4=DA=C8=
=DD=A3=AC=D6=AE=BA=F3=D4=D9=BF=BD=B1=B4=D2=BB=B8=F6=BC=B8=B0=D9 =0A=
KB=B5=C4=CE=C4=BC=FE=B5=BD=B4=C5=C5=CC=D6=D0=C4=E3=BB=E1=B7=A2=CF=
=D6=D0=B4=B2=BB=BD=F8=C8=A5=A1=A3=D5=E2=B8=F6=CA=C7=CE=D2=D6=AE=C7=
=B0=D4=DA=CA=B9=D3=C3 =0AST=BF=E2=B5=C4=CA=B1=BA=F2=B2=E2=CA=D4=B2=
=BB=B9=BB=D3=DA=CA=C7=C3=BB=D3=D0=B7=A2=CF=D6=D5=E2=B8=F6=CE=CA=CC=
=E2=A1=A3=B5=B1=C8=BB=A3=AC=D3=F6=B5=BD=CE=CA=CC=E2=B2=A2=B2=BB=D2=
=BB=B6=A8=BE=CD=CA=C7=BB=B5=CA=C2=A1=A3<BR><BR>&nbsp;&nbsp;&nbsp;=
 <STRONG><SPAN =0Aid=3Dwiz_font_size_span_23028640 =0Astyle=3D"FO=
NT-SIZE: 16pt"><STRONG>=C4=C7</STRONG></SPAN></STRONG>=C3=B4=CE=D2=
=C3=C7=BD=D3=CF=C2=C0=B4=BE=CD=D2=AA=B5=F7=CA=D4=C1=CB=A1=A3=B5=F7=
=CA=D4=B5=B1=C8=BB=D1=A1=D4=F1=B4=AE=BF=DA=C0=B4=CA=E4=B3=F6=D0=C5=
=CF=A2=A1=A3=D3=DA=CA=C7=CE=D2=C3=C7=D4=DA =0Aread=B8=FA write=BA=
=AF=CA=FD=D6=D0=BC=D3=C8=EB=CF=C2=C3=E6=B5=C4=B4=FA=C2=EB=A3=BA<B=
R></P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1px solid; PADDING-=
RIGHT: 3px; BORDER-TOP: black 1px solid; PADDING-LEFT: 3px; FONT-=
SIZE: 12px; MARGIN-LEFT: auto; BORDER-LEFT: black 1px solid; COLO=
R: black; MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER-BOTTOM: bl=
ack 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLOR: window=
; TEXT-ALIGN: left; 3px: ">printf(<FONT =0Acolor=3D#ff00bf>"@%s [=
%d]addr: %03dK | %04d\r\n"</FONT>, __func__, lun, =0A(blk_addr<FO=
NT color=3D#333399>*</FONT><FONT color=3D#6e00aa>512</FONT>)<FONT=
 =0Acolor=3D#333399>/</FONT><FONT color=3D#6e00aa>1024</FONT>, bl=
k_len<FONT =0Acolor=3D#333399>*</FONT><FONT color=3D#6e00aa>512</=
FONT>);</DIV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm=20=
0pt; WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSF=
ORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: norm=
al; LETTER-SPACING: normal; orphans: auto; widows: auto; webkit-t=
ext-stroke-width: 0px"><BR>=D5=E2=CC=F5=B4=FA=C2=EB=D3=C3=C0=B4=CA=
=E4=B3=F6=B2=D9=D7=F7=B5=C4=B5=D8=D6=B7=D0=C5=CF=A2=A3=AC=B5=AB=CA=
=C7=D5=E2=C3=B4=B2=D9=D7=F7=D6=AE=BA=F3=CE=D2=C3=C7=BB=E1=B7=A2=CF=
=D6=B4=AE=BF=DA=D6=B5=CA=E4=B3=F6=C1=CB=A3=BAQiFreeUSBS =0Aversio=
n 1.24.8=A1=A3=D5=E2=CA=C7=BA=DC=B2=BB=D3=A6=B8=C3=B5=C4=A1=A3=D2=
=F2=CE=AA=CE=D2=C3=C7=D6=B1=BD=D3=D4=DA ST=B5=C4=BF=E2=B5=C4=BB=F9=
=B4=A1=C9=CF=D0=DE=B8=C4=B9=FD=C0=B4=B5=C4=A3=AC=CB=F9=D2=D4=D3=D0=
=D2=BB=B8=F6=D4=AD=D2=F2=CA=C7=D4=DA MSC=B5=C4=B4=FA=C2=EB=D6=D0=D0=
=DE=B8=C4=C1=CB=B4=AE=BF=DA=CB=F9=CA=B9=D3=C3=B5=C4 =0AIO=B5=C4=B9=
=A6=C4=DC=A1=A3=BE=AD=B2=E9=D4=C4=CF=E0=B9=D8=CA=D6=B2=E1=A3=AC=CE=
=D2=C3=C7=CA=B9=D3=C3=B5=C4 USART1=B5=C4=B6=CB=BF=DA=CE=AA=A3=BAP=
A9=A1=A2PA10=A1=A3=CD=AC=CA=B1=CE=D2=C3=C7=B8=D5=BA=C3=D4=DA=D4=B4=
=CE=C4=BC=FE usb_bsp.c=D6=D0=BF=C9=D2=D4=D5=D2=B5=BD =0AUSB_OTG_B=
SP_Init=BA=AF=CA=FD=D6=D0=D3=D0=C8=E7=CF=C2=B4=FA=C2=EB=A3=BA<BR>=
</P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1px solid; PADDING-RI=
GHT: 3px; BORDER-TOP: black 1px solid; PADDING-LEFT: 3px; FONT-SI=
ZE: 12px; MARGIN-LEFT: auto; BORDER-LEFT: black 1px solid; COLOR:=
 black; MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER-BOTTOM: blac=
k 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLOR: window;=20=
TEXT-ALIGN: left; 3px: ">&nbsp;&nbsp;<FONT =0Acolor=3D#008000>/*=20=
Configure&nbsp;&nbsp;VBUS Pin =0A*/</FONT><BR>&nbsp;&nbsp;GPIO_In=
itStructure.GPIO_Pin <FONT =0Acolor=3D#333399>=3D</FONT> GPIO_Pin=
_9;<BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_Speed =0A<FONT color=3D=
#333399>=3D</FONT> =0AGPIO_Speed_100MHz;<BR>&nbsp;&nbsp;GPIO_Init=
Structure.GPIO_Mode <FONT =0Acolor=3D#333399>=3D</FONT> =0AGPIO_M=
ode_IN;<BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_OType <FONT =0Acol=
or=3D#333399>=3D</FONT> =0AGPIO_OType_OD;<BR>&nbsp;&nbsp;GPIO_Ini=
tStructure.GPIO_PuPd <FONT =0Acolor=3D#333399>=3D</FONT> GPIO_PuP=
d_NOPULL ;<BR>&nbsp;&nbsp;GPIO_Init(GPIOA, <FONT =0Acolor=3D#3333=
99>&amp;</FONT>GPIO_InitStructure);&nbsp;&nbsp;&nbsp;&nbsp;<BR>&n=
bsp;&nbsp;<BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008000>/* Configure I=
D pin =0A*/</FONT><BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_Pin <FO=
NT =0Acolor=3D#333399>=3D</FONT>&nbsp;&nbsp;GPIO_Pin_10;<BR>&nbsp=
;&nbsp;GPIO_InitStructure.GPIO_OType =0A<FONT color=3D#333399>=3D=
</FONT> =0AGPIO_OType_OD;<BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_=
PuPd <FONT =0Acolor=3D#333399>=3D</FONT> GPIO_PuPd_UP =0A;&nbsp;&=
nbsp;<BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_Speed <FONT =0Acolor=
=3D#333399>=3D</FONT> GPIO_Speed_100MHz;<BR>&nbsp;&nbsp;GPIO_Init=
(GPIOA, <FONT =0Acolor=3D#333399>&amp;</FONT>GPIO_InitStructure);=
&nbsp;&nbsp;<BR>&nbsp;&nbsp;GPIO_PinAFConfig(GPIOA,GPIO_PinSource=
10,GPIO_AF_OTG1_FS) =0A; </DIV>=0A<P class=3DMsoNormal =0Astyle=3D=
"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=
=E5; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; W=
HITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows=
: auto; webkit-text-stroke-width: 0px"><BR>=CF=D4=C8=BB=D5=E2=C0=EF=
=D0=DE=B8=C4=C1=CB=B6=CB=BF=DA=B5=C4=B9=A6=C4=DC=A1=A3=D3=DA=CA=C7=
=CE=D2=C3=C7=BD=AB=B8=C3=BA=AF=CA=FD=D0=DE=B8=C4=CE=AA=A3=BA<BR><=
/P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1px solid; PADDING-RIG=
HT: 3px; BORDER-TOP: black 1px solid; PADDING-LEFT: 3px; FONT-SIZ=
E: 12px; MARGIN-LEFT: auto; BORDER-LEFT: black 1px solid; COLOR:=20=
black; MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER-BOTTOM: black=
 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLOR: window; T=
EXT-ALIGN: left; 3px: "><FONT =0Acolor=3D#0000ff><B>void</B></FON=
T> USB_OTG_BSP_Init(USB_OTG_CORE_HANDLE <FONT =0Acolor=3D#333399>=
*</FONT>pdev)<BR>{&nbsp;<BR>&nbsp;&nbsp;GPIO_InitTypeDef =0AGPIO_=
InitStructure;&nbsp;&nbsp;&nbsp;<BR>&nbsp;#<FONT =0Acolor=3D#0000=
ff><B>ifdef</B></FONT> =0AUSE_USB_OTG_FS&nbsp;<BR>&nbsp;<BR>&nbsp=
;&nbsp;RCC_AHB1PeriphClockCmd( =0ARCC_AHB1Periph_GPIOA , ENABLE);=
&nbsp;&nbsp;<BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008=
000>/* Configure SOF ID DM DP Pins =0A*/</FONT><BR>&nbsp;&nbsp;GP=
IO_InitStructure.GPIO_Pin <FONT =0Acolor=3D#333399>=3D</FONT> GPI=
O_Pin_8&nbsp;&nbsp;<FONT =0Acolor=3D#333399>|</FONT>&nbsp;<BR>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GPIO_P=
in_11 =0A<FONT =0Acolor=3D#333399>|</FONT>&nbsp;<BR>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GPIO_Pin_12;<BR>=
&nbsp;&nbsp;<BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_Speed =0A<FON=
T color=3D#333399>=3D</FONT> =0AGPIO_Speed_100MHz;<BR>&nbsp;&nbsp=
;GPIO_InitStructure.GPIO_Mode <FONT =0Acolor=3D#333399>=3D</FONT>=
 =0AGPIO_Mode_AF;<BR>&nbsp;&nbsp;GPIO_InitStructure.GPIO_OType <F=
ONT =0Acolor=3D#333399>=3D</FONT> =0AGPIO_OType_PP;<BR>&nbsp;&nbs=
p;GPIO_InitStructure.GPIO_PuPd <FONT =0Acolor=3D#333399>=3D</FONT=
> GPIO_PuPd_NOPULL ;<BR>&nbsp;&nbsp;GPIO_Init(GPIOA, <FONT =0Acol=
or=3D#333399>&amp;</FONT>GPIO_InitStructure);&nbsp;&nbsp;<BR>&nbs=
p;&nbsp;<BR>&nbsp;&nbsp;GPIO_PinAFConfig(GPIOA,GPIO_PinSource8,GP=
IO_AF_OTG1_FS) =0A;<BR>&nbsp;&nbsp;GPIO_PinAFConfig(GPIOA,GPIO_Pi=
nSource11,GPIO_AF_OTG1_FS) =0A;&nbsp;<BR>&nbsp;&nbsp;GPIO_PinAFCo=
nfig(GPIOA,GPIO_PinSource12,GPIO_AF_OTG1_FS) =0A;&nbsp;&nbsp;<BR>=
<BR>&nbsp;&nbsp;RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, =0A=
ENABLE);<BR>&nbsp;&nbsp;RCC_AHB2PeriphClockCmd(RCC_AHB2Periph_OTG=
_FS, ENABLE) =0A;&nbsp;<BR>&nbsp;#<FONT color=3D#0000ff><B>else</=
B></FONT> <FONT color=3D#008000>// =0AUSE_USB_OTG_HS</FONT>&nbsp;=
<BR>&nbsp;#<FONT color=3D#0000ff><B>endif</B></FONT> =0A<FONT col=
or=3D#008000>//USB_OTG_HS</FONT><BR>}</DIV>=0A<P class=3DMsoNorma=
l =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px; FONT: 12px/=
16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-=
INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans=
: auto; widows: auto; webkit-text-stroke-width: 0px"><BR>=BC=CC=D0=
=F8 =0Abuild =B2=A2 Download=B5=BD=B0=E5=D7=D3=CE=D2=C3=C7=BD=AB=BF=
=B4=B5=BD=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1p=
x solid; PADDING-RIGHT: 3px; BORDER-TOP: black 1px solid; PADDING=
-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: auto; BORDER-LEFT: blac=
k 1px solid; COLOR: black; MARGIN-RIGHT: auto; PADDING-TOP: 3px;=20=
BORDER-BOTTOM: black 1px solid; FONT-FAMILY: Courier New; BACKGRO=
UND-COLOR: window; TEXT-ALIGN: left; 3px: ">QiFreeUSBS =0Aversion=
 <FONT color=3D#6e00aa>1</FONT>.<FONT color=3D#6e00aa>24</FONT>.<=
FONT =0Acolor=3D#6e00aa>8</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;USB Device Library =0Av1.<FONT color=3D#6e00aa>1</FONT>.<FONT =0A=
color=3D#6e00aa>0</FONT>&nbsp;&nbsp;[FS]<FONT color=3D#333399>&gt=
;</FONT> Device In =0Asuspend mode.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;USB Device Library v1.<FONT =0Acolor=3D#6e00aa>1</FONT>.<FONT=
 =0Acolor=3D#6e00aa>0</FONT>&nbsp;&nbsp;[FS]&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;USB Device =0ALibrary v1.<FONT color=3D#6e00aa>1</FONT>.=
<FONT =0Acolor=3D#6e00aa>0</FONT>&nbsp;&nbsp;[FS]<FONT color=3D#3=
33399>&gt;</FONT> MSC =0AInterface started.<BR>@STORAGE_Read [<FO=
NT color=3D#6e00aa>0</FONT>]addr<FONT =0Acolor=3D#333399>:</FONT>=
 000K <FONT color=3D#333399>|</FONT> <FONT =0Acolor=3D#6e00aa>051=
2</FONT><BR>@STORAGE_Read [<FONT =0Acolor=3D#6e00aa>0</FONT>]addr=
<FONT color=3D#333399>:</FONT> 000K <FONT =0Acolor=3D#333399>|</F=
ONT> <FONT color=3D#6e00aa>0512</FONT><BR>@STORAGE_Read [<FONT =0A=
color=3D#6e00aa>0</FONT>]addr<FONT color=3D#333399>:</FONT> 000K=20=
<FONT =0Acolor=3D#333399>|</FONT> <FONT color=3D#6e00aa>0512</FON=
T><BR>@STORAGE_Read [<FONT =0Acolor=3D#6e00aa>0</FONT>]addr<FONT=20=
color=3D#333399>:</FONT> 000K <FONT =0Acolor=3D#333399>|</FONT> <=
FONT color=3D#6e00aa>0512</FONT><BR>@STORAGE_Read [<FONT =0Acolor=
=3D#6e00aa>0</FONT>]addr<FONT color=3D#333399>:</FONT> 000K <FONT=
 =0Acolor=3D#333399>|</FONT> <FONT color=3D#6e00aa>4096</FONT></D=
IV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-=
SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none;=
 COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER=
-SPACING: normal; orphans: auto; widows: auto; webkit-text-stroke=
-width: 0px"><BR>=D5=E2=B1=ED=CA=BE=CE=D2=C3=C7=B5=C4=B4=AE=BF=DA=
=D5=FD=B3=A3=CA=E4=B3=F6=D0=C5=CF=A2=C1=CB=A1=A3=B5=AB=C6=E4=CA=B5=
=CE=D2=C3=C7=BB=B9=D0=E8=D2=AA=D0=DE=B8=C4=D2=BB=B8=F6=BA=AF=CA=FD=
=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1px solid;=20=
PADDING-RIGHT: 3px; BORDER-TOP: black 1px solid; PADDING-LEFT: 3p=
x; FONT-SIZE: 12px; MARGIN-LEFT: auto; BORDER-LEFT: black 1px sol=
id; COLOR: black; MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER-BO=
TTOM: black 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLOR=
: window; TEXT-ALIGN: left; 3px: "><FONT =0Acolor=3D#0000ff><B>vo=
id</B></FONT> USB_OTG_BSP_EnableInterrupt(USB_OTG_CORE_HANDLE =0A=
<FONT color=3D#333399>*</FONT>pdev)<BR>{<BR>&nbsp;&nbsp;NVIC_Init=
TypeDef =0ANVIC_InitStructure;&nbsp;<BR>&nbsp;&nbsp;<BR>&nbsp;&nb=
sp;NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);<BR>#<FONT =0Ac=
olor=3D#0000ff><B>ifdef</B></FONT> =0AUSE_USB_OTG_HS&nbsp;&nbsp;&=
nbsp;<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannel =0A<FONT=20=
color=3D#333399>=3D</FONT> OTG_HS_IRQn;<BR>#<FONT =0Acolor=3D#000=
0ff><B>else</B></FONT><BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQ=
Channel =0A<FONT color=3D#333399>=3D</FONT> OTG_FS_IRQn;&nbsp;&nb=
sp;<BR>#<FONT =0Acolor=3D#0000ff><B>endif</B></FONT><BR>&nbsp;&nb=
sp;NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority =0A<FONT=20=
color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>;<BR>=
&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelSubPriority =0A<FON=
T color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>3</FONT>;<B=
R>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelCmd =0A<FONT colo=
r=3D#333399>=3D</FONT> ENABLE;<BR>&nbsp;&nbsp;NVIC_Init(<FONT =0A=
color=3D#333399>&amp;</FONT>NVIC_InitStructure);&nbsp;&nbsp;<BR>#=
<FONT =0Acolor=3D#0000ff><B>ifdef</B></FONT> =0AUSB_OTG_HS_DEDICA=
TED_EP1_ENABLED<BR>&nbsp;&nbsp;NVIC_PriorityGroupConfig(NVIC_Prio=
rityGroup_1);<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannel =0A=
<FONT color=3D#333399>=3D</FONT> =0AOTG_HS_EP1_OUT_IRQn;<BR>&nbsp=
;&nbsp;NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority =0A<F=
ONT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>;=
<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelSubPriority =0A=
<FONT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>2</FONT=
>;<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelCmd =0A<FONT=20=
color=3D#333399>=3D</FONT> ENABLE;<BR>&nbsp;&nbsp;NVIC_Init(<FONT=
 =0Acolor=3D#333399>&amp;</FONT>NVIC_InitStructure);&nbsp;&nbsp;<=
BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;NVIC_PriorityGroupConfig(NVIC_Prio=
rityGroup_1);<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannel =0A=
<FONT color=3D#333399>=3D</FONT> =0AOTG_HS_EP1_IN_IRQn;<BR>&nbsp;=
&nbsp;NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority =0A<FO=
NT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>;<=
BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelSubPriority =0A<=
FONT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>=
;<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelCmd =0A<FONT c=
olor=3D#333399>=3D</FONT> ENABLE;<BR>&nbsp;&nbsp;NVIC_Init(<FONT=20=
=0Acolor=3D#333399>&amp;</FONT>NVIC_InitStructure);&nbsp;&nbsp;&n=
bsp;<BR>#<FONT =0Acolor=3D#0000ff><B>endif</B></FONT><BR>}</DIV>=0A=
<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACIN=
G: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR=
: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACI=
NG: normal; orphans: auto; widows: auto; webkit-text-stroke-width=
: 0px"><BR>=D5=E2=CA=C7 =0AST=B5=C4=B0=E5=D7=D3=CB=F9=CA=B9=D3=C3=
=B5=C4=D6=D0=B6=CF=A3=AC=CE=D2=C3=C7=D6=BB=D0=E8=D2=AA OTG_FS_IRQ=
n=D6=D0=B6=CF=A3=AC=CB=F9=D2=D4=A3=BA<BR></P>=0A<DIV =0Astyle=3D"=
BORDER-RIGHT: black 1px solid; PADDING-RIGHT: 3px; BORDER-TOP: bl=
ack 1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: a=
uto; BORDER-LEFT: black 1px solid; COLOR: black; MARGIN-RIGHT: au=
to; PADDING-TOP: 3px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY=
: Courier New; BACKGROUND-COLOR: window; TEXT-ALIGN: left; 3px: "=
><FONT =0Acolor=3D#0000ff><B>void</B></FONT> USB_OTG_BSP_EnableIn=
terrupt(USB_OTG_CORE_HANDLE =0A<FONT color=3D#333399>*</FONT>pdev=
)<BR>{<BR>&nbsp;&nbsp;NVIC_InitTypeDef =0ANVIC_InitStructure;&nbs=
p;<BR>&nbsp;&nbsp;NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);=
<BR>&nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannel =0A<FONT color=
=3D#333399>=3D</FONT> =0AOTG_FS_IRQn;&nbsp;&nbsp;<BR>&nbsp;&nbsp;=
NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority =0A<FONT col=
or=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>;<BR>&nb=
sp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelSubPriority =0A<FONT c=
olor=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>3</FONT>;<BR>&=
nbsp;&nbsp;NVIC_InitStructure.NVIC_IRQChannelCmd =0A<FONT color=3D=
#333399>=3D</FONT> ENABLE;<BR>&nbsp;&nbsp;NVIC_Init(<FONT =0Acolo=
r=3D#333399>&amp;</FONT>NVIC_InitStructure);&nbsp;&nbsp;<BR>}</DI=
V>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-S=
PACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none;=20=
COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-=
SPACING: normal; orphans: auto; widows: auto; webkit-text-stroke-=
width: 0px"><BR>=BD=D3=CF=C2=C0=B4=CE=D2=C3=C7=BE=CD=BF=C9=D2=D4=C8=
=A5=D5=D2=CE=D2=C3=C7=C7=B0=C3=E6=BF=BD=B1=B4=CA=B1=B3=F6=CF=D6=B5=
=C4=CE=CA=CC=E2=C1=CB=A1=A3<BR><BR>&nbsp;&nbsp;&nbsp; =0A<STRONG>=
<SPAN id=3Dwiz_font_size_span_24311359 =0Astyle=3D"FONT-SIZE: 16p=
t"><STRONG>=BE=DF</STRONG></SPAN></STRONG>=CC=E5=B9=FD=B3=CC=B1=C8=
=BD=CF=B7=B1=CB=F6=A3=AC=D5=E2=C0=EF=BE=CD=D6=B1=BD=D3=B8=F8=B3=F6=
=BD=E1=B9=FB=A3=AC=BD=E2=BE=F6=B0=EC=B7=A8=CA=C7=D0=DE=B8=C4 =0AS=
RAM_LEN_K=B5=C4=B4=F3=D0=A1=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORD=
ER-RIGHT: black 1px solid; PADDING-RIGHT: 3px; BORDER-TOP: black=20=
1px solid; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: auto;=
 BORDER-LEFT: black 1px solid; COLOR: black; MARGIN-RIGHT: auto;=20=
PADDING-TOP: 3px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY: Co=
urier New; BACKGROUND-COLOR: window; TEXT-ALIGN: left; 3px: "><FO=
NT =0Acolor=3D#008000>//#define SRAM_LEN_K&nbsp;&nbsp;32</FONT><B=
R>#<FONT =0Acolor=3D#0000ff><B>define</B></FONT> SRAM_LEN_K&nbsp;=
&nbsp;<FONT =0Acolor=3D#6e00aa>33</FONT></DIV>=0A<P class=3DMsoNo=
rmal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px; FONT: 12=
px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TE=
XT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orph=
ans: auto; widows: auto; webkit-text-stroke-width: 0px"><BR>=C8=BB=
=BA=F3 =0Abuild=B2=A2 Download=B5=BD=B0=E5=D7=D3=BF=BD=B1=B4=D5=D5=
=C7=B0=C3=E6=B5=C4=B7=BD=B7=A8=BF=BD=B1=B4=CE=C4=BC=FE=BE=CD=D5=FD=
=B3=A3=C1=CB=A1=A3<BR>.<BR><BR><BR><BR></P></BODY></HTML>=0A

------=_Next_Part_0058331718.491--

------=_Next_Part_0174995154.961--

