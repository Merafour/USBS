From: WizBrother WizMime<support@wizbrother.com>
Subject: =?gb2312?B?VVNCU9LG1rIgU1RNMzJGNCBOTzExo7q2y7/axeTWww==?=
Date: Date: Fri, 19 Jun 2015 01:03:21 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0174995388.391"

This is a multi-part message in MIME format.

------=_Next_Part_0174995388.391
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0058331796.604"


------=_Next_Part_0058331796.604
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0058331796.604
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">=0A=
<HTML><HEAD>=0D=0A<meta http-equiv=3D"Content-Type" content=3D"te=
xt/html; charset=3Dgb2312"><TITLE>USBS=D2=C6=D6=B2 STM32F4 NO11=A3=
=BA=B6=CB=BF=DA=C5=E4=D6=C3</TITLE>=0A=0A<STYLE type=3Dtext/css>=0A=
body, p, th, td, li, ul, ol, h1, h2, h3, h4, h5, h6, pre=0A{=0A	f=
ont-family: =CB=CE=CC=E5;=0A	line-height: 1.4;=0A}=0Abody, p, th,=
 td, li, ul, ol, pre=0A{=0A	font-size: 12px;=0A}=0A</STYLE>=0A=0A=
<META content=3D"MSHTML 6.00.2900.6550" name=3DGENERATOR></HEAD>=0A=
<BODY><FONT face=3D"Times New Roman"><FONT size=3D7><STRONG>USBS=D2=
=C6=D6=B2 STM32F4 =0ANO11=A3=BA=B6=CB=BF=DA=C5=E4=D6=C3<BR></STRO=
NG></FONT><FONT =0Asize=3D3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A--------<SPAN class=3DApple-conv=
erted-space>&nbsp;</SPAN></FONT></FONT><SPAN =0Astyle=3D"FONT-FAM=
ILY: =CB=CE=CC=E5"><FONT size=3D3>=D7=AA=D4=D8=C7=EB=D7=A2=C3=F7=B3=
=F6=B4=A6<BR><FONT =0Aface=3D"Times New Roman">&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A--------<SPAN=
 class=3DApple-converted-space>&nbsp;=B8=FC=B6=E0=B1=CA=BC=C7=C7=EB=
=B7=C3=CE=CA=A3=BA<A =0Ahref=3D"http://merafour.blog.163.com/">me=
rafour.blog.163.com</A>&nbsp;</SPAN></FONT></FONT></SPAN> =0A=0A<=
P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING=
: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR:=
 rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACIN=
G: normal; orphans: auto; widows: auto; webkit-text-stroke-width:=
 0px"><FONT =0Asize=3D3><SPAN style=3D"FONT-FAMILY: =CB=CE=CC=E5"=
><SPAN lang=3DEN-US><FONT =0Aface=3D"Times New Roman">&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =0A</FONT=
></SPAN></SPAN><SPAN lang=3DEN-US><FONT face=3D"Times New Roman">=
-------- =0A2015-6-17.</FONT></SPAN><SPAN style=3D"FONT-FAMILY: =CB=
=CE=CC=E5">=C0=E4=D4=C2=D7=B7=B7=E7</SPAN><SPAN =0Alang=3DEN-US><=
FONT face=3D"Times New Roman"></FONT></SPAN></FONT></P>=0A<P clas=
s=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px;=
 FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rgb(0=
,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: nor=
mal; orphans: auto; widows: auto; webkit-text-stroke-width: 0px">=
<FONT =0Asize=3D3><SPAN lang=3DEN-US><FONT =0Aface=3D"Times New R=
oman"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;<SPAN =0Aclass=3DApple-converted-space>&nbsp;</SPAN>=
</SPAN>-------- =0Aemail</FONT></SPAN><SPAN style=3D"FONT-FAMILY:=
 =CB=CE=CC=E5">=A3=BA</SPAN><SPAN lang=3DEN-US><FONT =0Aface=3D"T=
imes New Roman"><A =0Ahref=3D"mailto:merafour@163.com">merafour@1=
63.com</A><SPAN =0Aclass=3DApple-converted-space>&nbsp;</SPAN></F=
ONT></SPAN></FONT><BR></P>=0A<HR>=0A=0A<P class=3DMsoNormal =0Ast=
yle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACING: 0px; FONT: 12px/16px =CB=
=CE=CC=E5; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT:=20=
0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto;=20=
widows: auto; webkit-text-stroke-width: 0px"><BR><FONT =0Acolor=3D=
#ff0000>&nbsp;&nbsp;&nbsp; <STRONG><SPAN id=3Dwiz_font_size_span_=
25612281 =0Astyle=3D"FONT-SIZE: 16pt"><STRONG>USBS</STRONG></SPAN=
></STRONG>=D7=EE=B3=F5=CA=C7=B1=CA=D5=DF=BB=F9=D3=DA =0ASTM32F103=
=CF=B5=C1=D0=BF=AA=B7=A2=B3=F6=C0=B4=B5=C4=D2=BB=B8=F6 =0Abootloa=
der=A3=AC=CD=A8=B9=FD=B0=D1=C9=E8=B1=B8=D7=F6=B3=C9=D2=BB=B8=F6US=
B=BD=D3=BF=DA=B5=C4=B4=E6=B4=A2=C9=E8=B1=B8=BC=B4U=C5=CC=B4=D3=B6=
=F8=B0=DA=CD=D1=D2=D4=CD=F9=C9=FD=BC=B6=B9=CC=BC=FE=B9=FD=B3=CC=D6=
=D0=CB=F9=D0=E8=D2=AA=B5=C4=C9=CF=CE=BB=BB=FA=B8=FA=C7=FD=B6=AF(=BC=
=B4=C3=E2=C7=FD)=A1=A3USBS=C8=AB=B3=C6=CA=C7=A3=BA"USB =0AStorage=
"=A3=AC=BE=DF=D3=D0=D2=BB=CF=C2=CC=D8=B5=E3=A3=BA<BR><BR>&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =D2=BB=A1=A2=D6=BB=D2=AA=C4=E3=
=B5=C4=B2=D9=D7=F7=CF=B5=CD=B3=D6=A7=B3=D6 =0AU=C5=CC=D4=AD=D4=F2=
=C9=CF=B6=BC=BF=C9=D2=D4=CA=B9=D3=C3=A3=AC=C4=BF=C7=B0=D2=D1=BE=AD=
=B2=E2=CA=D4=C1=CB =0AWindows=A1=A2Ubuntu=B8=FA=C6=BB=B9=FB=A3=BB=
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =B6=FE=A1=A2=BF=C9=
=CD=A8=B9=FD =0APC=B6=CB=C8=ED=BC=FE=C5=E4=D6=C3=CB=F9=CA=B9=D3=C3=
=B5=C4 IO=B2=A2=C9=E8=D6=C3=C6=E4=D3=E0 IO=B5=C4=C4=AC=C8=CF=CA=E4=
=B3=F6=A3=AC=D2=B2=BE=CD=CA=C7=CB=B5=BC=EC=B2=E2 IO=B8=FA LED=D6=B8=
=CA=BE =0AIO=D3=C3=BB=A7=BF=C9=D2=D4=D7=D4=B6=A8=D2=E5=A3=BB<BR>&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =C8=FD=A1=A2=D7=D4=B4=F8=
=B2=BB=D2=C0=C0=B5=CD=E2=B2=BF EEPROM=B5=C4=BC=D3=C3=DC=CB=E3=B7=A8=
=A3=AC =0A32B=BC=D3=C3=DC=CA=FD=BE=DD=C8=B7=B1=A3=B3=CC=D0=F2=B6=C1=
=B5=BD=C1=ED=CD=E2=D2=BB=BF=C5 IC=C9=CF=B2=BB=C4=DC=D4=CB=D0=D0=A3=
=BB<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =CB=C4=A1=A2=CE=
=AA =0AApp=CC=E1=B9=A9=B5=A5=B6=C0=B5=C4=BC=D3=C3=DC=CB=E3=B7=A8(=
32B)=A3=AC=D3=C3=BB=A7=BF=C9=CD=A8=B9=FD PC=C8=ED=BC=FE=C9=E8=D6=C3=
=BC=D3=C3=DC "licence"=A1=A3</FONT><BR><BR>&nbsp;&nbsp;&nbsp; =0A=
<STRONG><SPAN id=3Dwiz_font_size_span_17581296 =0Astyle=3D"FONT-S=
IZE: 16pt"><STRONG>=BD=F1</STRONG></SPAN></STRONG>=CC=EC=CE=D2=C3=
=C7=D2=AA=CD=F9 =0AUSBS=D6=D0=CC=ED=BC=D3=D2=BB=B8=F6=C7=BF=B4=F3=
=B5=C4=B9=A6=C4=DC=A3=BA=B6=CB=BF=DA=C5=E4=D6=C3=A1=A3=B6=CB=BF=DA=
=C5=E4=D6=C3=B9=A6=C4=DC=CA=B9=B5=C3=CE=D2=C3=C7=BF=C9=D2=D4=D4=DA=
=B2=BB=CD=AC=B5=C4=D3=B2=BC=FE=B2=FA=C6=B7=C9=CF=D4=CB=D0=D0=CD=AC=
=D2=BB=B8=F6 =0AUSBS=A3=AC=D6=BB=D2=AA=D0=BE=C6=AC=CA=C7=BF=C9=D2=
=D4=D6=B1=BD=D3=CC=E6=BB=BB=B5=C4=A1=A3&nbsp;&nbsp;<BR><BR>&nbsp;=
&nbsp;&nbsp; <SPAN =0Aid=3Dwiz_font_size_span_28458765 =0Astyle=3D=
"FONT-SIZE: 16pt"><STRONG>=CD=AC</STRONG></SPAN>=D1=F9=BD=AB=C9=CF=
=D2=BB=B2=BD=B5=C4=D4=B4=C2=EB=BF=BD=B1=B4=D2=BB=B7=DD=A3=AC=B2=A2=
=C3=FC=C3=FB=CE=AA=A3=BAUSBS_V0.10.21=A1=A3<BR><BR>&nbsp;&nbsp;&n=
bsp; =0A<STRONG><SPAN id=3Dwiz_font_size_span_31826125 =0Astyle=3D=
"FONT-SIZE: 16pt"><STRONG>=C8=BB</STRONG></SPAN></STRONG>=BA=F3=CE=
=D2=C3=C7=D4=DA USBS=C4=BF=C2=BC=D4=F6=BC=D3=C8=FD=B8=F6=D4=B4=CE=
=C4=BC=FE=A3=BA =0AQiFreeExample.c=A1=A2QiFreeIO.c=A1=A2QiFreeIO.=
h=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1px solid;=
 PADDING-RIGHT: 3px; BORDER-TOP: black 1px solid; PADDING-LEFT: 3=
px; FONT-SIZE: 12px; MARGIN-LEFT: auto; BORDER-LEFT: black 1px so=
lid; COLOR: black; MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER-B=
OTTOM: black 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLO=
R: window; TEXT-ALIGN: left; 3px: "><FONT =0Acolor=3D#008000>// Q=
iFreeIO.h</FONT><BR>#<FONT color=3D#0000ff><B>include</B></FONT>=20=
=0A<FONT color=3D#333399>&lt;</FONT>stdint.h<FONT color=3D#333399=
>&gt;</FONT><BR><FONT =0Acolor=3D#008000>//#include "stm32f10x.h"=
</FONT><BR>#<FONT =0Acolor=3D#0000ff><B>include</B></FONT> <FONT=20=
=0Acolor=3D#ff00bf>"stm32f4xx.h"</FONT>&nbsp;<BR><FONT =0Acolor=3D=
#0000ff><B>typedef</B></FONT> <FONT color=3D#0000ff><B>struct</B>=
</FONT> =0A{<BR>&nbsp;uint32_t RCC_APB2Periph;<BR>&nbsp;GPIO_Type=
Def<FONT =0Acolor=3D#333399>*</FONT> GPIOx;<BR>&nbsp;uint16_t Pin=
;<BR>}QiFreeIO;<BR><FONT =0Acolor=3D#0000ff><B>typedef</B></FONT>=
 <FONT color=3D#0000ff><B>struct</B></FONT> { =0A<FONT color=3D#0=
08000>// =CA=E4=B3=F6=C9=E8=B1=B8</FONT><BR>&nbsp;<FONT color=3D#=
008000>//void =0A(*init)(QiFreeIO *io); // =B3=F5=CA=BC=BB=AF</FO=
NT><BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>void</B></FONT> (<FONT c=
olor=3D#333399>*</FONT>led_init)(QiFreeIO =0A<FONT color=3D#33339=
9>*</FONT>io); <FONT color=3D#008000>// =0Aled=B3=F5=CA=BC=BB=AF<=
/FONT><BR>&nbsp;<FONT color=3D#0000ff><B>void</B></FONT> (<FONT =0A=
color=3D#333399>*</FONT>key_init)(QiFreeIO <FONT color=3D#333399>=
*</FONT>io); <FONT =0Acolor=3D#008000>// key=B3=F5=CA=BC=BB=AF</F=
ONT><BR>&nbsp;<FONT color=3D#0000ff><B>void</B></FONT> =0A(<FONT=20=
color=3D#333399>*</FONT>led_on)(QiFreeIO <FONT color=3D#333399>*<=
/FONT>io, =0A<FONT color=3D#0000ff><B>int</B></FONT> on);&nbsp;&n=
bsp;&nbsp;<FONT =0Acolor=3D#008000>// =B5=E3=B5=C6,=CA=E4=B3=F6</=
FONT><BR>&nbsp;<FONT color=3D#0000ff><B>void</B></FONT> =0A(<FONT=
 color=3D#333399>*</FONT>reversal)(QiFreeIO <FONT color=3D#333399=
>*</FONT>io); =0A<FONT color=3D#008000>// =B5=E7=C6=BD=B7=AD=D7=AA=
,=CA=E4=B3=F6</FONT><BR>&nbsp;uint8_t (<FONT =0Acolor=3D#333399>*=
</FONT>key_down)(QiFreeIO <FONT color=3D#333399>*</FONT>io); <FON=
T =0Acolor=3D#008000>// =B6=C1=C8=A1=B5=E7=C6=BD,=CA=E4=C8=EB</FO=
NT><BR>}QiFree_ioObj;<BR><FONT =0Acolor=3D#008000>/*<BR>&nbsp;* =B4=
=B4=BD=A8=D2=BB=B8=F6 IO=B2=D9=D7=F7=B6=D4=CF=F3, input=B1=ED=CA=BE=
 IO=CA=C7=CA=E4=C8=EB=BB=B9=CA=C7=CA=E4=B3=F6, LED=B4=AB=B5=DD 0=BC=
=B4=CA=E4=B3=F6, KEY=B4=AB=B5=DD =0A1=BC=B4=CA=E4=C8=EB<BR>&nbsp;=
*/</FONT><BR><FONT color=3D#0000ff><B>extern</B></FONT> <FONT =0A=
color=3D#0000ff><B>void</B></FONT> newQiFree_ioObj(QiFree_ioObj <=
FONT =0Acolor=3D#333399>*</FONT>Qi, <FONT color=3D#0000ff><B>int<=
/B></FONT> led_low, <FONT =0Acolor=3D#0000ff><B>int</B></FONT> ke=
y_low);<BR><FONT =0Acolor=3D#0000ff><B>extern</B></FONT> <FONT co=
lor=3D#0000ff><B>int</B></FONT> =0AQiFreeIO_config(uint32_t cfg[]=
, QiFreeIO <FONT =0Acolor=3D#333399>*</FONT>io);<BR><FONT color=3D=
#0000ff><B>extern</B></FONT> <FONT =0Acolor=3D#0000ff><B>int</B><=
/FONT> QiFreeIO_Default(uint32_t cfg[]);<BR><FONT =0Acolor=3D#008=
000>/******************************** Examples =0A***************=
***********************/</FONT><BR><FONT =0Acolor=3D#0000ff><B>ex=
tern</B></FONT> <FONT color=3D#0000ff><B>const</B></FONT> =0Auint=
32_t ConfigExamples[];<BR><FONT color=3D#0000ff><B>extern</B></FO=
NT> QiFreeIO =0Aled1;<BR><FONT color=3D#0000ff><B>extern</B></FON=
T> QiFreeIO led2;<BR><FONT =0Acolor=3D#0000ff><B>extern</B></FONT=
> QiFreeIO key;<BR><FONT =0Acolor=3D#0000ff><B>extern</B></FONT>=20=
QiFree_ioObj Qi;<BR><FONT =0Acolor=3D#0000ff><B>extern</B></FONT>=
 uint32_t UserData; <FONT color=3D#008000>// =0AKB</FONT><BR><FON=
T color=3D#0000ff><B>extern</B></FONT> <FONT =0Acolor=3D#0000ff><=
B>void</B></FONT> QiFreeConfigIO(uint32_t map[]);<BR><FONT =0Acol=
or=3D#0000ff><B>extern</B></FONT> <FONT color=3D#0000ff><B>void</=
B></FONT> =0AQiFreeConfigLog(uint32_t map[]);<BR><FONT color=3D#0=
08000>=0A<HR>=0A// QiFreeIO.c</FONT><BR>#<FONT color=3D#0000ff><B=
>include</B></FONT> <FONT =0Acolor=3D#ff00bf>"QiFreeIO.h"</FONT><=
BR><FONT color=3D#008000>// =0AIO=C5=E4=D6=C3=B6=A8=D2=E5</FONT><=
BR><FONT color=3D#0000ff><B>static</B></FONT> uint32_t =0AQiFree_=
RCC_GPIOx[<FONT color=3D#6e00aa>7</FONT>]<FONT =0Acolor=3D#333399=
>=3D</FONT>{<BR>&nbsp;RCC_AHB1Periph_GPIOA,<BR>&nbsp;RCC_AHB1Peri=
ph_GPIOB,<BR>&nbsp;RCC_AHB1Periph_GPIOC,<BR>&nbsp;RCC_AHB1Periph_=
GPIOD,<BR>&nbsp;RCC_AHB1Periph_GPIOE,<BR>&nbsp;RCC_AHB1Periph_GPI=
OF,<BR>&nbsp;RCC_AHB1Periph_GPIOG<BR>};<BR><FONT =0Acolor=3D#0000=
ff><B>static</B></FONT> GPIO_TypeDef<FONT color=3D#333399>*</FONT=
> =0AQiFree_GPIOx[<FONT color=3D#6e00aa>7</FONT>] <FONT color=3D#=
333399>=3D</FONT> =0A{<BR>&nbsp;GPIOA,<BR>&nbsp;GPIOB,<BR>&nbsp;G=
PIOC,<BR>&nbsp;GPIOD,<BR>&nbsp;GPIOE,<BR>&nbsp;GPIOF,<BR>&nbsp;GP=
IOG<BR>};<BR><FONT =0Acolor=3D#0000ff><B>static</B></FONT> uint16=
_t QiFree_Pin[<FONT =0Acolor=3D#6e00aa>16</FONT>] <FONT color=3D#=
333399>=3D</FONT> =0A{<BR>&nbsp;GPIO_Pin_0,<BR>&nbsp;GPIO_Pin_1,<=
BR>&nbsp;GPIO_Pin_2,<BR>&nbsp;GPIO_Pin_3,<BR>&nbsp;GPIO_Pin_4,<BR=
>&nbsp;GPIO_Pin_5,<BR>&nbsp;GPIO_Pin_6,<BR>&nbsp;GPIO_Pin_7,<BR>&=
nbsp;GPIO_Pin_8,<BR>&nbsp;GPIO_Pin_9,<BR>&nbsp;GPIO_Pin_10,<BR>&n=
bsp;GPIO_Pin_11,<BR>&nbsp;GPIO_Pin_12,<BR>&nbsp;GPIO_Pin_13,<BR>&=
nbsp;GPIO_Pin_14,<BR>&nbsp;GPIO_Pin_15<BR>};<BR><FONT =0Acolor=3D=
#008000>// LED=B3=F5=CA=BC=BB=AF</FONT><BR><FONT color=3D#0000ff>=
<B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B></FONT>=20=
QiFree_led_Init(QiFreeIO <FONT =0Acolor=3D#333399>*</FONT>io)<BR>=
{<BR>&nbsp;GPIO_InitTypeDef&nbsp;&nbsp;GPIO_InitStructure;<BR>&nb=
sp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(<FONT color=3D#6e00a=
a>0</FONT><FONT =0Acolor=3D#333399>=3D=3D</FONT>io<FONT color=3D#=
333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>GPIOx) <FONT c=
olor=3D#0000ff><B>return</B></FONT>; <FONT =0Acolor=3D#008000>//=20=
=BF=D5=B5=C4=C5=E4=D6=C3io-&gt;GPIOx</FONT><BR>&nbsp;RCC_AHB1Peri=
phClockCmd(io<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D#3333=
99>&gt;</FONT>RCC_APB2Periph, =0AENABLE);&nbsp;&nbsp;<FONT =0Acol=
or=3D#008000>//=CA=B9=C4=DC=B6=CB=BF=DA=CA=B1=D6=D3</FONT><BR>&nb=
sp;<BR>&nbsp;GPIO_InitStructure.GPIO_Pin =0A<FONT color=3D#333399=
>=3D</FONT> io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333=
399>&gt;</FONT>Pin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D=
#008000>//=B6=CB=BF=DA=C5=E4=D6=C3</FONT><BR>&nbsp;GPIO_InitStruc=
ture.GPIO_Mode <FONT =0Acolor=3D#333399>=3D</FONT> =0AGPIO_Mode_O=
UT;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;GPIO_InitStructure.GPIO_OTyp=
e =0A<FONT color=3D#333399>=3D</FONT> =0AGPIO_OType_PP;<BR>&nbsp;=
GPIO_InitStructure.GPIO_Speed <FONT =0Acolor=3D#333399>=3D</FONT>=
 GPIO_Speed_100MHz;<FONT =0Acolor=3D#008000>//100MHz</FONT><BR>&n=
bsp;GPIO_InitStructure.GPIO_PuPd <FONT =0Acolor=3D#333399>=3D</FO=
NT> GPIO_PuPd_UP;<FONT =0Acolor=3D#008000>//=C9=CF=C0=AD</FONT><B=
R>&nbsp;GPIO_Init(io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D=
#333399>&gt;</FONT>GPIOx, <FONT =0Acolor=3D#333399>&amp;</FONT>GP=
IO_InitStructure);<BR>&nbsp;<FONT =0Acolor=3D#008000>//GPIO_SetBi=
ts(io-&gt;GPIOx, =0Aio-&gt;Pin);</FONT><BR>&nbsp;GPIO_ResetBits(i=
o<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FON=
T>GPIOx, io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399=
>&gt;</FONT>Pin);<BR>}<BR><FONT color=3D#008000>// =0ALED=B3=F5=CA=
=BC=BB=AF</FONT><BR><FONT color=3D#0000ff><B>static</B></FONT> <F=
ONT =0Acolor=3D#0000ff><B>void</B></FONT> QiFree_led_default(uint=
32_t RCC_APB2Periph, =0AGPIO_TypeDef<FONT color=3D#333399>*</FONT=
> GPIOx, uint16_t PortVal, uint16_t =0AEnable)<BR>{<BR>&nbsp;<FON=
T color=3D#0000ff><B>int</B></FONT> i<FONT =0Acolor=3D#333399>=3D=
</FONT><FONT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;GPIO_InitTypeD=
ef&nbsp;&nbsp;GPIO_InitStructure;<BR>&nbsp;RCC_AHB1PeriphClockCmd=
(RCC_APB2Periph, =0AENABLE);&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolo=
r=3D#008000>//=CA=B9=C4=DC=B6=CB=BF=DA=CA=B1=D6=D3</FONT><BR>&nbs=
p;GPIO_InitStructure.GPIO_Mode <FONT =0Acolor=3D#333399>=3D</FONT=
> GPIO_Mode_OUT;<BR>&nbsp;GPIO_InitStructure.GPIO_OType =0A<FONT=20=
color=3D#333399>=3D</FONT> =0AGPIO_OType_PP;<BR>&nbsp;GPIO_InitSt=
ructure.GPIO_Speed <FONT =0Acolor=3D#333399>=3D</FONT> GPIO_Speed=
_100MHz;<FONT =0Acolor=3D#008000>//100MHz</FONT><BR>&nbsp;GPIO_In=
itStructure.GPIO_PuPd <FONT =0Acolor=3D#333399>=3D</FONT> GPIO_Pu=
Pd_UP;<BR>&nbsp;GPIO_InitStructure.GPIO_Pin <FONT =0Acolor=3D#333=
399>=3D</FONT> <FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0A=
color=3D#0000ff><B>for</B></FONT>(i<FONT color=3D#333399>=3D</FON=
T><FONT =0Acolor=3D#6e00aa>0</FONT>; i<FONT color=3D#333399>&lt;<=
/FONT><FONT =0Acolor=3D#6e00aa>16</FONT>; i<FONT =0Acolor=3D#3333=
99>++</FONT>)<BR>&nbsp;{<BR>&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff>=
<B>if</B></FONT>((Enable<FONT color=3D#333399>&gt;&gt;</FONT>i)<F=
ONT =0Acolor=3D#333399>&amp;</FONT>0x1) GPIO_InitStructure.GPIO_P=
in <FONT =0Acolor=3D#333399>|=3D</FONT> QiFree_Pin[i];<BR>&nbsp;}=
<BR>&nbsp;<FONT =0Acolor=3D#008000>//printf("GPIO_InitStructure.G=
PIO_Pin: %08X\r\n", =0AGPIO_InitStructure.GPIO_Pin);</FONT><BR>&n=
bsp;GPIO_Init(GPIOx, <FONT =0Acolor=3D#333399>&amp;</FONT>GPIO_In=
itStructure);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D=
#008000>//=B8=F9=BE=DD=C9=E8=B6=A8=B2=CE=CA=FD=B3=F5=CA=BC=BB=AFG=
PIOx</FONT><BR>&nbsp;<FONT color=3D#008000>// =0AGPIO_Write(GPIO_=
TypeDef* GPIOx, uint16_t PortVal)</FONT><BR>&nbsp;<FONT =0Acolor=3D=
#008000>//GPIO_Write(GPIOx, PortVal);</FONT><BR>&nbsp;<FONT =0Aco=
lor=3D#0000ff><B>for</B></FONT>(i<FONT color=3D#333399>=3D</FONT>=
<FONT =0Acolor=3D#6e00aa>0</FONT>; i<FONT color=3D#333399>&lt;</F=
ONT><FONT =0Acolor=3D#6e00aa>16</FONT>; i<FONT =0Acolor=3D#333399=
>++</FONT>)<BR>&nbsp;{<BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//=
printf("ValPin%d:%d\r\n", i, =0A(PortVal&gt;&gt;i)&amp;0x1);</FON=
T><BR>&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//GPIO_WriteBit(GPIO_T=
ypeDef* GPIOx, uint16_t GPIO_Pin, BitAction =0ABitVal)</FONT><BR>=
&nbsp;&nbsp;<FONT color=3D#0000ff><B>if</B></FONT>((Enable<FONT =0A=
color=3D#333399>&gt;&gt;</FONT>i)<FONT color=3D#333399>&amp;</FON=
T>0x1) =0AGPIO_WriteBit(GPIOx, QiFree_Pin[i], (PortVal<FONT =0Aco=
lor=3D#333399>&gt;&gt;</FONT>i)<FONT =0Acolor=3D#333399>&amp;</FO=
NT>0x1);<BR>&nbsp;}<BR>}<BR><FONT color=3D#008000>// =0ALED=B5=E3=
=C1=C1,=B8=DF=B5=E7=C6=BD=B5=E3=C1=C1</FONT><BR><FONT color=3D#00=
00ff><B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B></F=
ONT> QiFree_led_on(QiFreeIO <FONT =0Acolor=3D#333399>*</FONT>io,=20=
<FONT color=3D#0000ff><B>int</B></FONT> =0Aon)<BR>{&nbsp;<BR>&nbs=
p;<FONT color=3D#0000ff><B>if</B></FONT>(<FONT =0Acolor=3D#6e00aa=
>0</FONT><FONT color=3D#333399>=3D=3D</FONT>io<FONT =0Acolor=3D#3=
33399>-</FONT><FONT color=3D#333399>&gt;</FONT>GPIOx) <FONT =0Aco=
lor=3D#0000ff><B>return</B></FONT>; <FONT color=3D#008000>// =0A=BF=
=D5=B5=C4=C5=E4=D6=C3io-&gt;GPIOx</FONT>&nbsp;&nbsp;&nbsp;<BR>&nb=
sp;GPIO_WriteBit(io<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D=
#333399>&gt;</FONT>GPIOx, io<FONT =0Acolor=3D#333399>-</FONT><FON=
T color=3D#333399>&gt;</FONT>Pin, on<FONT =0Acolor=3D#333399>&amp=
;</FONT>0x1);<BR>}<BR><FONT color=3D#008000>// =0ALED=B5=E3=C1=C1=
,=B5=CD=B5=E7=C6=BD=B5=E3=C1=C1</FONT><BR><FONT color=3D#0000ff><=
B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B></FONT> Q=
iFree_led_on_low(QiFreeIO <FONT =0Acolor=3D#333399>*</FONT>io, <F=
ONT color=3D#0000ff><B>int</B></FONT> =0Aon)<BR>{&nbsp;&nbsp;&nbs=
p;&nbsp;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(<FONT=
 color=3D#6e00aa>0</FONT><FONT =0Acolor=3D#333399>=3D=3D</FONT>io=
<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT=
>GPIOx) <FONT color=3D#0000ff><B>return</B></FONT>; <FONT =0Acolo=
r=3D#008000>// =BF=D5=B5=C4=C5=E4=D6=C3io-&gt;GPIOx</FONT><BR>&nb=
sp;<FONT color=3D#008000>//on =0A&amp;=3D 0x1; // 1:LED=C1=C1</FO=
NT><BR>&nbsp;on <FONT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D=
#333399>~</FONT>on;<BR>&nbsp;GPIO_WriteBit(io<FONT =0Acolor=3D#33=
3399>-</FONT><FONT color=3D#333399>&gt;</FONT>GPIOx, io<FONT =0Ac=
olor=3D#333399>-</FONT><FONT color=3D#333399>&gt;</FONT>Pin, on<F=
ONT =0Acolor=3D#333399>&amp;</FONT>0x1);<BR>}<BR><FONT color=3D#0=
08000>// =0ALED=B5=E7=C6=BD=B7=AD=D7=AA</FONT><BR><FONT color=3D#=
0000ff><B>static</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B><=
/FONT> QiFree_led_reversal(QiFreeIO <FONT =0Acolor=3D#333399>*</F=
ONT>io)<BR>{<BR>#<FONT color=3D#0000ff><B>if</B></FONT> <FONT =0A=
color=3D#6e00aa>0</FONT><BR>&nbsp;<FONT color=3D#0000ff><B>int</B=
></FONT> on <FONT =0Acolor=3D#333399>=3D</FONT> <FONT color=3D#6e=
00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>=
(<FONT color=3D#6e00aa>0</FONT><FONT =0Acolor=3D#333399>=3D=3D</F=
ONT>io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;=
</FONT>GPIOx) <FONT color=3D#0000ff><B>return</B></FONT>; <FONT =0A=
color=3D#008000>// =BF=D5=B5=C4=C5=E4=D6=C3io-&gt;GPIOx</FONT><BR=
>&nbsp;<FONT color=3D#008000>//int on =3D =0AGPIO_ReadInputDataBi=
t(io-&gt;GPIOx, io-&gt;Pin);</FONT><BR>&nbsp;on <FONT =0Acolor=3D=
#333399>=3D</FONT> GPIO_ReadOutputDataBit(io<FONT =0Acolor=3D#333=
399>-</FONT><FONT color=3D#333399>&gt;</FONT>GPIOx, io<FONT =0Aco=
lor=3D#333399>-</FONT><FONT color=3D#333399>&gt;</FONT>Pin);<BR>&=
nbsp;on <FONT =0Acolor=3D#333399>&amp;=3D</FONT> 0x1; <FONT color=
=3D#008000>// =0A1:LED=C1=C1</FONT><BR>&nbsp;on <FONT color=3D#33=
3399>=3D</FONT> <FONT =0Acolor=3D#333399>~</FONT>on;<BR>&nbsp;GPI=
O_WriteBit(io<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D#3333=
99>&gt;</FONT>GPIOx, io<FONT =0Acolor=3D#333399>-</FONT><FONT col=
or=3D#333399>&gt;</FONT>Pin, on<FONT =0Acolor=3D#333399>&amp;</FO=
NT>0x1);<BR>#<FONT =0Acolor=3D#0000ff><B>else</B></FONT><BR>&nbsp=
;io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</F=
ONT>GPIOx<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&=
gt;</FONT>ODR <FONT color=3D#333399>^=3D</FONT> io<FONT =0Acolor=3D=
#333399>-</FONT><FONT color=3D#333399>&gt;</FONT>Pin;<BR>#<FONT =0A=
color=3D#0000ff><B>endif</B></FONT><BR>}<BR><FONT color=3D#008000=
>// =0AKEY=B3=F5=CA=BC=BB=AF</FONT><BR><FONT color=3D#0000ff><B>s=
tatic</B></FONT> <FONT =0Acolor=3D#0000ff><B>void</B></FONT> QiFr=
ee_key_Init(QiFreeIO <FONT =0Acolor=3D#333399>*</FONT>io)<BR>{<BR=
>&nbsp;GPIO_InitTypeDef&nbsp;&nbsp;GPIO_InitStructure;<BR>&nbsp;<=
FONT =0Acolor=3D#0000ff><B>if</B></FONT>(<FONT color=3D#6e00aa>0<=
/FONT><FONT =0Acolor=3D#333399>=3D=3D</FONT>io<FONT color=3D#3333=
99>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>GPIOx) <FONT color=
=3D#0000ff><B>return</B></FONT>; <FONT =0Acolor=3D#008000>// =BF=D5=
=B5=C4=C5=E4=D6=C3io-&gt;GPIOx</FONT><BR>&nbsp;RCC_AHB1PeriphCloc=
kCmd(io<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D#333399>&gt=
;</FONT>RCC_APB2Periph, =0AENABLE);&nbsp;&nbsp;<FONT =0Acolor=3D#=
008000>//=CA=B9=C4=DCPA,PD=B6=CB=BF=DA=CA=B1=D6=D3</FONT><BR>&nbs=
p;&nbsp;<FONT =0Acolor=3D#008000>//RCC_APB2PeriphClockCmd(RCC_APB=
2Periph_GPIOA|RCC_APB2Periph_GPIOC,ENABLE);//=CA=B9=C4=DCPORTA,PO=
RTC=CA=B1=D6=D3</FONT><BR>&nbsp;<FONT =0Acolor=3D#008000>//GPIO_P=
inRemapConfig(GPIO_Remap_SWJ_JTAGDisable, =0AENABLE);//=B9=D8=B1=D5=
jtag=A3=AC=CA=B9=C4=DCSWD=A3=AC=BF=C9=D2=D4=D3=C3SWD=C4=A3=CA=BD=B5=
=F7=CA=D4</FONT><BR>&nbsp;<BR>&nbsp;GPIO_InitStructure.GPIO_Pin =0A=
<FONT color=3D#333399>=3D</FONT> io<FONT color=3D#333399>-</FONT>=
<FONT =0Acolor=3D#333399>&gt;</FONT>Pin;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;<FONT =0Acolor=3D#008000>//PA15</FONT><BR>&nbsp;&nbsp;&nbsp;=
&nbsp;GPIO_InitStructure.GPIO_Mode =0A<FONT color=3D#333399>=3D</=
FONT> GPIO_Mode_IN;<FONT =0Acolor=3D#008000>//=C6=D5=CD=A8=CA=E4=C8=
=EB=C4=A3=CA=BD</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;GPIO_InitStruct=
ure.GPIO_Speed =0A<FONT color=3D#333399>=3D</FONT> GPIO_Speed_100=
MHz;<FONT =0Acolor=3D#008000>//100M</FONT><BR>&nbsp;&nbsp;&nbsp;&=
nbsp;GPIO_InitStructure.GPIO_PuPd =0A<FONT color=3D#333399>=3D</F=
ONT> GPIO_PuPd_UP;<FONT =0Acolor=3D#008000>//=C9=CF=C0=AD</FONT><=
BR>&nbsp;GPIO_Init(io<FONT color=3D#333399>-</FONT><FONT =0Acolor=
=3D#333399>&gt;</FONT>GPIOx, <FONT =0Acolor=3D#333399>&amp;</FONT=
>GPIO_InitStructure);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0A=
color=3D#008000>//=B3=F5=CA=BC=BB=AFGPIOA15</FONT><BR>}<BR><FONT=20=
color=3D#008000>// =0AKEY=B6=C1=C8=A1=B5=E7=C6=BD,=B8=DF=B5=E7=C6=
=BD=B0=B4=CF=C2</FONT><BR><FONT color=3D#0000ff><B>static</B></FO=
NT> uint8_t =0AQiFree_key_down(QiFreeIO <FONT color=3D#333399>*</=
FONT>io)<BR>{<BR>&nbsp;uint8_t =0Adown <FONT color=3D#333399>=3D<=
/FONT> <FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D=
#0000ff><B>if</B></FONT>(<FONT color=3D#6e00aa>0</FONT><FONT =0Ac=
olor=3D#333399>=3D=3D</FONT>io<FONT color=3D#333399>-</FONT><FONT=
 =0Acolor=3D#333399>&gt;</FONT>GPIOx) <FONT color=3D#0000ff><B>re=
turn</B></FONT> <FONT =0Acolor=3D#6e00aa>1</FONT>; <FONT color=3D=
#008000>// =0A=BF=D5=B5=C4=C5=E4=D6=C3io-&gt;GPIOx</FONT><BR>&nbs=
p;down <FONT color=3D#333399>=3D</FONT> =0AGPIO_ReadInputDataBit(=
io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FO=
NT>GPIOx, io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#33339=
9>&gt;</FONT>Pin);<BR>&nbsp;<FONT color=3D#008000>//int on =3D =0A=
GPIO_ReadOutputDataBit(io-&gt;GPIOx, io-&gt;Pin);</FONT><BR>&nbsp=
;down <FONT =0Acolor=3D#333399>&amp;=3D</FONT> 0x1; <FONT =0Acolo=
r=3D#008000>//</FONT>&nbsp;<BR>&nbsp;<FONT color=3D#0000ff><B>ret=
urn</B></FONT> =0Adown;<BR>}<BR><FONT color=3D#008000>// KEY=B6=C1=
=C8=A1=B5=E7=C6=BD,=B5=CD=B5=E7=C6=BD=B0=B4=CF=C2</FONT><BR><FONT=
 =0Acolor=3D#0000ff><B>static</B></FONT> uint8_t QiFree_key_down_=
low(QiFreeIO <FONT =0Acolor=3D#333399>*</FONT>io)<BR>{<BR>&nbsp;u=
int8_t down <FONT =0Acolor=3D#333399>=3D</FONT> <FONT color=3D#6e=
00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>=
(<FONT color=3D#6e00aa>0</FONT><FONT =0Acolor=3D#333399>=3D=3D</F=
ONT>io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;=
</FONT>GPIOx) <FONT color=3D#0000ff><B>return</B></FONT> <FONT =0A=
color=3D#6e00aa>1</FONT>; <FONT color=3D#008000>// =0A=BF=D5=B5=C4=
=C5=E4=D6=C3io-&gt;GPIOx</FONT><BR>&nbsp;down <FONT color=3D#3333=
99>=3D</FONT> =0AGPIO_ReadInputDataBit(io<FONT color=3D#333399>-<=
/FONT><FONT =0Acolor=3D#333399>&gt;</FONT>GPIOx, io<FONT color=3D=
#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>Pin);<BR>&nbs=
p;<FONT color=3D#008000>//int on =3D =0AGPIO_ReadOutputDataBit(io=
-&gt;GPIOx, io-&gt;Pin);</FONT><BR>&nbsp;down <FONT =0Acolor=3D#3=
33399>=3D</FONT> <FONT color=3D#333399>~</FONT>down;<BR>&nbsp;dow=
n <FONT =0Acolor=3D#333399>&amp;=3D</FONT> 0x1; <FONT =0Acolor=3D=
#008000>//</FONT>&nbsp;<BR>&nbsp;<FONT color=3D#0000ff><B>return<=
/B></FONT> =0Adown;<BR>}<BR><FONT color=3D#008000>/*<BR>&nbsp;* =B4=
=B4=BD=A8=D2=BB=B8=F6 IO=B2=D9=D7=F7=B6=D4=CF=F3, input=B1=ED=CA=BE=
 IO=CA=C7=CA=E4=C8=EB=BB=B9=CA=C7=CA=E4=B3=F6, =0ALED=B4=AB=B5=DD=
 0=BC=B4=CA=E4=B3=F6, KEY=B4=AB=B5=DD 1=BC=B4=CA=E4=C8=EB<BR>&nbs=
p;*/</FONT><BR><FONT =0Acolor=3D#0000ff><B>void</B></FONT> newQiF=
ree_ioObj(QiFree_ioObj <FONT =0Acolor=3D#333399>*</FONT>Qi, <FONT=
 color=3D#0000ff><B>int</B></FONT> led_low, <FONT =0Acolor=3D#000=
0ff><B>int</B></FONT> key_low)<BR>{<BR>&nbsp;Qi<FONT =0Acolor=3D#=
333399>-</FONT><FONT color=3D#333399>&gt;</FONT>led_init <FONT =0A=
color=3D#333399>=3D</FONT> QiFree_led_Init;<BR>&nbsp;Qi<FONT =0Ac=
olor=3D#333399>-</FONT><FONT color=3D#333399>&gt;</FONT>key_init=20=
<FONT =0Acolor=3D#333399>=3D</FONT> QiFree_key_Init;<BR>&nbsp;Qi<=
FONT =0Acolor=3D#333399>-</FONT><FONT color=3D#333399>&gt;</FONT>=
led_on <FONT =0Acolor=3D#333399>=3D</FONT> QiFree_led_on;<BR>&nbs=
p;Qi<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D#333399>&gt;</=
FONT>reversal <FONT =0Acolor=3D#333399>=3D</FONT> QiFree_led_reve=
rsal;<BR>&nbsp;Qi<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D#=
333399>&gt;</FONT>key_down <FONT =0Acolor=3D#333399>=3D</FONT> Qi=
Free_key_down;<BR>&nbsp;<FONT color=3D#008000>// =0ALED=B5=CD=B5=E7=
=C6=BD=B5=E3=C1=C1</FONT><BR>&nbsp;<FONT color=3D#0000ff><B>if</B=
></FONT>(led_low) Qi<FONT =0Acolor=3D#333399>-</FONT><FONT color=3D=
#333399>&gt;</FONT>led_on <FONT =0Acolor=3D#333399>=3D</FONT> QiF=
ree_led_on_low;<BR>&nbsp;<FONT color=3D#008000>// =0AKEY=B5=CD=B5=
=E7=C6=BD=D3=D0=D0=A7</FONT><BR>&nbsp;<FONT color=3D#0000ff><B>if=
</B></FONT>(key_low) Qi<FONT =0Acolor=3D#333399>-</FONT><FONT col=
or=3D#333399>&gt;</FONT>key_down <FONT =0Acolor=3D#333399>=3D</FO=
NT> QiFree_key_down_low;<BR>}<BR><FONT =0Acolor=3D#0000ff><B>int<=
/B></FONT> QiFreeIO_config(uint32_t cfg[], QiFreeIO <FONT =0Acolo=
r=3D#333399>*</FONT>io)<BR>{<BR>&nbsp;uint32_t gpio<FONT =0Acolor=
=3D#333399>=3D</FONT><FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;uin=
t32_t size<FONT =0Acolor=3D#333399>=3D</FONT><FONT color=3D#6e00a=
a>0</FONT>;<BR>&nbsp;uint32_t pin<FONT =0Acolor=3D#333399>=3D</FO=
NT><FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#008=
000>// init</FONT><BR>&nbsp;io<FONT color=3D#333399>-</FONT><FONT=
 =0Acolor=3D#333399>&gt;</FONT>RCC_APB2Periph <FONT color=3D#3333=
99>=3D</FONT> <FONT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;io<FONT=
 color=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>GPIO=
x <FONT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>0</FO=
NT>;<BR>&nbsp;io<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#3=
33399>&gt;</FONT>Pin <FONT color=3D#333399>=3D</FONT> <FONT =0Aco=
lor=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT color=3D#008000>// =0ARCC_=
GPIOx</FONT><BR>&nbsp;gpio <FONT color=3D#333399>=3D</FONT> cfg[<=
FONT =0Acolor=3D#6e00aa>0</FONT>] <FONT color=3D#333399>-</FONT>=20=
<FONT =0Acolor=3D#ff00bf>'A'</FONT>;<BR>&nbsp;size <FONT color=3D=
#333399>=3D</FONT> <FONT =0Acolor=3D#0000ff><B>sizeof</B></FONT>(=
QiFree_RCC_GPIOx)<FONT =0Acolor=3D#333399>/</FONT><FONT =0Acolor=3D=
#0000ff><B>sizeof</B></FONT>(QiFree_RCC_GPIOx[<FONT =0Acolor=3D#6=
e00aa>0</FONT>])<FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#6=
e00aa>1</FONT>;<BR>&nbsp;pin <FONT color=3D#333399>=3D</FONT> cfg=
[<FONT =0Acolor=3D#6e00aa>1</FONT>]<FONT color=3D#333399>&amp;</F=
ONT>0X00FF;<BR>&nbsp;<FONT =0Acolor=3D#008000>//if(cfg[0]&gt;=3D(=
sizeof(QiFree_RCC_GPIOx)/sizeof(QiFree_RCC_GPIOx[0]))) =0Areturn=20=
-1;</FONT><BR>&nbsp;<FONT color=3D#0000ff><B>if</B></FONT>((cfg[<=
FONT =0Acolor=3D#6e00aa>0</FONT>]<FONT color=3D#333399>&lt;</FONT=
><FONT =0Acolor=3D#ff00bf>'A'</FONT>) <FONT color=3D#333399>||</F=
ONT> (cfg[<FONT =0Acolor=3D#6e00aa>0</FONT>]<FONT color=3D#333399=
>&gt;</FONT>(<FONT =0Acolor=3D#ff00bf>'A'</FONT><FONT color=3D#33=
3399>+</FONT>size))) <FONT =0Acolor=3D#0000ff><B>return</B></FONT=
> <FONT color=3D#333399>-</FONT><FONT =0Acolor=3D#6e00aa>1</FONT>=
;<BR>&nbsp;<FONT color=3D#0000ff><B>if</B></FONT>(pin<FONT =0Acol=
or=3D#333399>&gt;</FONT><FONT color=3D#333399>=3D</FONT>(<FONT =0A=
color=3D#0000ff><B>sizeof</B></FONT>(QiFree_Pin)<FONT color=3D#33=
3399>/</FONT><FONT =0Acolor=3D#0000ff><B>sizeof</B></FONT>(QiFree=
_Pin[<FONT color=3D#6e00aa>0</FONT>]))) =0A<FONT color=3D#0000ff>=
<B>return</B></FONT> <FONT color=3D#333399>-</FONT><FONT =0Acolor=
=3D#6e00aa>1</FONT>;<BR>#<FONT color=3D#0000ff><B>if</B></FONT> <=
FONT =0Acolor=3D#6e00aa>1</FONT><BR>&nbsp;<FONT color=3D#008000>/=
/io-&gt;RCC_APB2Periph =3D =0AQiFree_RCC_GPIOx[cfg[0]];</FONT><BR=
>&nbsp;<FONT color=3D#008000>//io-&gt;GPIOx =3D =0AQiFree_GPIOx[c=
fg[0]];</FONT><BR>&nbsp;io<FONT color=3D#333399>-</FONT><FONT =0A=
color=3D#333399>&gt;</FONT>RCC_APB2Periph <FONT color=3D#333399>=3D=
</FONT> =0AQiFree_RCC_GPIOx[gpio];<BR>&nbsp;io<FONT color=3D#3333=
99>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>GPIOx <FONT color=3D=
#333399>=3D</FONT> =0AQiFree_GPIOx[gpio];<BR>&nbsp;io<FONT color=3D=
#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>Pin <FONT col=
or=3D#333399>=3D</FONT> =0AQiFree_Pin[pin];<BR>#<FONT color=3D#00=
00ff><B>else</B></FONT><BR>&nbsp;io<FONT =0Acolor=3D#333399>-</FO=
NT><FONT color=3D#333399>&gt;</FONT>RCC_APB2Periph <FONT =0Acolor=
=3D#333399>=3D</FONT> QiFree_RCC_GPIOx[<FONT =0Acolor=3D#6e00aa>0=
</FONT>];<BR>&nbsp;io<FONT color=3D#333399>-</FONT><FONT =0Acolor=
=3D#333399>&gt;</FONT>GPIOx <FONT color=3D#333399>=3D</FONT> QiFr=
ee_GPIOx[<FONT =0Acolor=3D#6e00aa>0</FONT>];<BR>&nbsp;io<FONT col=
or=3D#333399>-</FONT><FONT =0Acolor=3D#333399>&gt;</FONT>Pin <FON=
T color=3D#333399>=3D</FONT> QiFree_Pin[<FONT =0Acolor=3D#6e00aa>=
8</FONT>];<BR><FONT color=3D#008000>// io-&gt;RCC_APB2Periph =3D=20=
=0ARCC_APB2Periph_GPIOA;</FONT><BR><FONT color=3D#008000>// io-&g=
t;GPIOx =3D =0AGPIOA;</FONT><BR><FONT color=3D#008000>// io-&gt;P=
in =3D =0AGPIO_Pin_8;</FONT><BR>#<FONT color=3D#0000ff><B>endif</=
B></FONT><BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>return</B></FONT>=20=
<FONT color=3D#6e00aa>0</FONT>;<BR>}<BR><FONT =0Acolor=3D#0000ff>=
<B>int</B></FONT> QiFreeIO_Default(uint32_t =0Acfg[])<BR>{<BR>&nb=
sp;uint16_t Enable<FONT color=3D#333399>=3D</FONT><FONT =0Acolor=3D=
#6e00aa>0</FONT>;<BR>&nbsp;uint16_t PortVal<FONT =0Acolor=3D#3333=
99>=3D</FONT><FONT color=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT =0Aco=
lor=3D#0000ff><B>int</B></FONT> i<FONT color=3D#333399>=3D</FONT>=
<FONT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT color=3D#0000ff=
><B>for</B></FONT>(i<FONT =0Acolor=3D#333399>=3D</FONT><FONT colo=
r=3D#6e00aa>0</FONT>; i<FONT =0Acolor=3D#333399>&lt;</FONT><FONT=20=
color=3D#6e00aa>7</FONT>; i<FONT =0Acolor=3D#333399>++</FONT>)<BR=
>&nbsp;{<BR>&nbsp;&nbsp;<FONT color=3D#008000>// | =0AEnable| Val=
ue|</FONT>&nbsp;&nbsp;<BR>&nbsp;&nbsp;Enable <FONT =0Acolor=3D#33=
3399>=3D</FONT> (cfg[i]<FONT color=3D#333399>&gt;&gt;</FONT><FONT=
 =0Acolor=3D#6e00aa>16</FONT>) <FONT =0Acolor=3D#333399>&amp;</FO=
NT>0xFFFF;<BR>&nbsp;&nbsp;PortVal <FONT =0Acolor=3D#333399>=3D</F=
ONT> cfg[i] <FONT =0Acolor=3D#333399>&amp;</FONT>0xFFFF;<BR>&nbsp=
;&nbsp;<FONT color=3D#008000>// =0AQiFree_led_default(uint32_t RC=
C_APB2Periph, GPIO_TypeDef* GPIOx, uint16_t =0APortVal)</FONT><BR=
>&nbsp;&nbsp;<FONT =0Acolor=3D#0000ff><B>if</B></FONT>(Enable)<BR=
>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#008000>//pr=
intf("GPIO%c: %04X | %04X\r\n", 'A'+i, Enable, =0APortVal);</FONT=
><BR>&nbsp;&nbsp;&nbsp;QiFree_led_default(QiFree_RCC_GPIOx[i], =0A=
QiFree_GPIOx[i],PortVal, Enable);<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>=
&nbsp;<FONT =0Acolor=3D#0000ff><B>return</B></FONT> <FONT color=3D=
#6e00aa>0</FONT>;<BR>}<BR><FONT =0Acolor=3D#008000>=0A<HR>=0A// Q=
iFreeExample.c</FONT><BR>#<FONT color=3D#0000ff><B>include</B></F=
ONT> <FONT =0Acolor=3D#ff00bf>"QiFreeIO.h"</FONT><BR>#<FONT color=
=3D#0000ff><B>include</B></FONT> =0A<FONT color=3D#333399>&lt;</F=
ONT>stdio.h<FONT color=3D#333399>&gt;</FONT><BR>#<FONT =0Acolor=3D=
#0000ff><B>include</B></FONT> <FONT =0Acolor=3D#ff00bf>"Config.h"=
</FONT><BR>#<FONT color=3D#0000ff><B>include</B></FONT> =0A<FONT=20=
color=3D#ff00bf>"log.h"</FONT><BR>QiFreeIO led1<FONT =0Acolor=3D#=
333399>=3D</FONT>{<FONT color=3D#6e00aa>0</FONT>,<FONT =0Acolor=3D=
#6e00aa>0</FONT>,<FONT color=3D#6e00aa>0</FONT>};<BR>QiFreeIO led=
2<FONT =0Acolor=3D#333399>=3D</FONT>{<FONT color=3D#6e00aa>0</FON=
T>,<FONT =0Acolor=3D#6e00aa>0</FONT>,<FONT color=3D#6e00aa>0</FON=
T>};<BR>QiFreeIO key<FONT =0Acolor=3D#333399>=3D</FONT>{<FONT col=
or=3D#6e00aa>0</FONT>,<FONT =0Acolor=3D#6e00aa>0</FONT>,<FONT col=
or=3D#6e00aa>0</FONT>};<BR>QiFree_ioObj =0AQi;<BR>uint32_t UserDa=
ta <FONT color=3D#333399>=3D</FONT> <FONT =0Acolor=3D#6e00aa>0</F=
ONT>; <FONT color=3D#008000>// KB</FONT><BR><FONT =0Acolor=3D#000=
0ff><B>const</B></FONT> <FONT color=3D#0000ff><B>char</B></FONT>=20=
=0ADescription[]<FONT color=3D#333399>=3D</FONT><FONT color=3D#ff=
00bf>"\<BR>* =0AAuthor&nbsp;&nbsp;&nbsp;: merafour.blog.163.com\r=
\n\<BR>* Version&nbsp;&nbsp;: =0AV1.0.0\r\n\<BR>* Date&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;: =0A2/26/2015\r\n"</FONT>;<BR><FONT color=3D#=
008000>//const char =0ADescription[]=3D"\</FONT><BR><FONT color=3D=
#008000>//* Author&nbsp;&nbsp;&nbsp;: =0Amerafour.blog.163.com\r\=
n\</FONT><BR><FONT color=3D#008000>//* =0ADate&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;: 2/26/2015\r\n";</FONT><BR><FONT =0Acolor=3D#008000>/=
*<BR>&nbsp;* Flash map<BR>&nbsp;* =0Abin&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;|-----------------| =0Astart<BR>&nbsp;* uint32_t=
 0| __initial_sp&nbsp;&nbsp;&nbsp;&nbsp;| =0A000H<BR>&nbsp;*&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1| =0ARese=
t_Handler&nbsp;&nbsp;&nbsp;| =0A004H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2| =0AFlash KB&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 008H&nbsp;&nbsp;| swd| =0A=
erase| flashH| =0AflashL|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-----------------|<BR>&nbsp=
;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3|&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A00CH<BR>&nbsp;*&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...| =0Amtext&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A...H<BR=
>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10|=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A{8*4}B<BR>&nbsp;*&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|----=
-------------|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;11| =0Aempty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-----------------|<BR>&n=
bsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12| =0A=
KEY_GPIO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A030H=
<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
13| =0AKEY_Pin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0ALow| Pin|<BR>&=
nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14| =0A=
LED1_GPIO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<BR>&nbsp;*&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15| =0ALED1_P=
in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0ALow| Pin|<BR>&nbsp;*&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16| =0ALED2_GPIO&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17| =0ALED2_Pin&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;| =0ALow| =0APin|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-----------------|<BR>&=
nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18|&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A48H<BR>&nbsp;*&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...| Board =0Aname&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;| =0A...H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;| =0A{4*4}B<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-----------------|<BR=
>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22|=
 =0AsignDate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A=
58H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...=
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A...H<BR>&nbsp;*&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0A{8*4}B<BR>&nbsp;*&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|---------=
--------|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;32| =0Aempty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;| =0A80H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;| =0A...H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;40*4:VERSION<BR>&nbsp;*/</FONT>=
<BR><FONT =0Acolor=3D#008000>// 256B</FONT><BR><FONT color=3D#000=
0ff><B>const</B></FONT> uint32_t =0AConfigExamples[(0x0F0)<FONT c=
olor=3D#333399>/</FONT><FONT color=3D#6e00aa>4</FONT>] =0A<FONT c=
olor=3D#333399>=3D</FONT> {<BR>&nbsp;&nbsp;&nbsp;&nbsp;0x00000000=
, <FONT =0Acolor=3D#008000>// __initial_sp</FONT><BR>&nbsp;&nbsp;=
&nbsp;&nbsp;0x00000000, =0A<FONT color=3D#008000>// =0AReset_Hand=
ler</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x0101000=
0, =0A<FONT color=3D#008000>// default //0K | swd| erase| flashH|=
 =0AflashL|</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=3D#0080=
00>//0x00010100, // =0Adefault //256K | swd| erase| flashH| =0Afl=
ashL|</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;0x12,0x12,0x12,0x12,0x12,=
0x12,0x12,0x12, =0A<FONT color=3D#008000>//mtext</FONT>&nbsp;<BR>=
&nbsp;&nbsp;&nbsp;&nbsp;0x12, <FONT =0Acolor=3D#008000>// empty</=
FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT =0Acolor=3D#ff00bf>'E'</FO=
NT>, 0x00000004,<FONT color=3D#008000>// KEY =0A:PE4,High</FONT><=
BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=3D#ff00bf>'F'</FONT>, =0A0=
xFFFF0009,<FONT color=3D#008000>// LED1:PF9 =0A,Low</FONT><BR>&nb=
sp;&nbsp;&nbsp;&nbsp;<FONT color=3D#ff00bf>'F'</FONT>, =0A0xFFFF0=
00A,<FONT color=3D#008000>// LED2:PF10 =0A,Low</FONT><BR>&nbsp;&n=
bsp;&nbsp;&nbsp;0x72466951, 0x00006565, 0x00000000, =0A0x00000000=
, <FONT color=3D#008000>// =0ABoard:QiFree</FONT><BR>&nbsp;&nbsp;=
&nbsp;&nbsp;<FONT color=3D#008000>// =0AsignDate</FONT><BR>&nbsp;=
&nbsp;&nbsp;&nbsp;0x00000000, 0x00000000, 0x00000000, =0A0x000000=
00, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, =0A=
0x00000000,&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=3D#00800=
0>// IO =0Adefault</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;0x00000000,=20=
0x00000000, 0x00000000, =0A0x00000000, 0x00000000, 0x00000000, 0x=
00000000, =0A0x00000000,&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT c=
olor=3D#008000>// =0ALicense</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;0x=
990951ba,<BR>&nbsp;&nbsp;&nbsp;&nbsp;0x00000000, =0A0x00000000, 0=
x00000000, 0x00000000,&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;0x0000000=
0, =0A0x00000000, 0x00000000, 0x00000000,&nbsp;<BR>&nbsp;&nbsp;&n=
bsp;&nbsp;0x00000000, =0A0x00000000, 0x00000000, 0x00000000,&nbsp=
;<BR>};<BR>__attribute__ ((section =0A(<FONT color=3D#ff00bf>".ve=
rsion"</FONT>))) <FONT =0Acolor=3D#0000ff><B>const</B></FONT> uin=
t8_t _version[0x10] __attribute__((used)) =0A<FONT color=3D#33339=
9>=3D</FONT> <FONT color=3D#ff00bf>"V "</FONT>VERSION<FONT =0Acol=
or=3D#ff00bf>"."</FONT>PATCHLEVEL<FONT color=3D#ff00bf>"."</FONT>=
SUBLEVEL<FONT =0Acolor=3D#ff00bf>"\r\n\0"</FONT>;<BR><FONT color=3D=
#008000>//char *Enable[2] =3D =0A{"Enable", "DisEnable"};</FONT><=
BR><FONT color=3D#0000ff><B>static</B></FONT> =0A<FONT color=3D#0=
000ff><B>const</B></FONT> <FONT color=3D#0000ff><B>char</B></FONT=
> =0A<FONT color=3D#333399>*</FONT>Enable[<FONT color=3D#6e00aa>2=
</FONT>] <FONT =0Acolor=3D#333399>=3D</FONT> {<FONT color=3D#ff00=
bf>"DisEnable"</FONT>, <FONT =0Acolor=3D#ff00bf>"Enable"</FONT>};=
<BR><FONT color=3D#008000>/*<BR>&nbsp;* Flash =0Amap<BR>&nbsp;* b=
in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-----------------| =0A=
start<BR>&nbsp;* uint32_t 0| __initial_sp&nbsp;&nbsp;&nbsp;&nbsp;=
| =0A000H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;1| =0AReset_Handler&nbsp;&nbsp;&nbsp;| =0A004H<BR>=
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;2| =0AFlash KB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=
 008H&nbsp;&nbsp;| swd| =0Aerase| flashH| =0AflashL|<BR>&nbsp;*&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=
-----------------|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;3|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=20=
=0A00CH<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;...| =0Amtext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;| =0A...H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;10|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=
 =0A{8*4}B<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;|-----------------|<BR>&nbsp;*&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11| =0Aempty&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<BR>&nbsp;=
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;|-----------------|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;12| =0AKEY_GPIO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;| =0A030H<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;13| =0AKEY_Pin&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;| =0ALow| Pin|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;14| =0ALED1_GPIO&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;15| =0ALED1_Pin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0ALo=
w| Pin|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;16| =0ALED2_GPIO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;17| =0ALED2_Pin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| =0ALow| =0APin|<BR>&n=
bsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;|-----------------|<BR>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;18|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
| =0A48H<BR>&nbsp;*/</FONT><BR><FONT color=3D#008000>//static int=
 =0Aled_low=3D0;</FONT><BR><FONT color=3D#008000>//static int key=
_low=3D0;</FONT><BR><FONT =0Acolor=3D#008000>//static uint32_t sw=
d=3D1;</FONT><BR><FONT =0Acolor=3D#0000ff><B>void</B></FONT> QiFr=
eeConfigIO(uint32_t =0Amap[])<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FO=
NT color=3D#0000ff><B>int</B></FONT> =0Aled_low<FONT color=3D#333=
399>=3D</FONT><FONT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;&nbsp;<=
FONT color=3D#0000ff><B>int</B></FONT> =0Akey_low<FONT color=3D#3=
33399>=3D</FONT><FONT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;&nbsp=
;uint32_t swd<FONT =0Acolor=3D#333399>=3D</FONT><FONT color=3D#6e=
00aa>1</FONT>;<BR>&nbsp;<FONT =0Acolor=3D#008000>// =B9=D8=B1=D5=20=
jtag</FONT><BR>&nbsp;<FONT color=3D#008000>// | swd| erase| =0Afl=
ashH| flashL|</FONT>&nbsp;&nbsp;&nbsp;<BR>&nbsp;swd <FONT =0Acolo=
r=3D#333399>=3D</FONT> (map[<FONT color=3D#6e00aa>2</FONT>]<FONT=20=
=0Acolor=3D#333399>&gt;&gt;</FONT><FONT color=3D#6e00aa>24</FONT>=
)<FONT =0Acolor=3D#333399>&amp;</FONT>0x1;<BR>&nbsp;&nbsp;<FONT =0A=
color=3D#008000>//RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENA=
BLE); // =0A=B9=D8=B1=D5jtag=D0=E8=D2=AA=CA=B9=C4=DC=B8=C3=CA=B1=D6=
=D3</FONT><BR>&nbsp;<FONT =0Acolor=3D#008000>//if(((*(uint32_t*)(=
buf+8))&gt;&gt;24)&amp;0x1) =0AGPIO_PinRemapConfig(GPIO_Remap_SWJ=
_JTAGDisable, =0AENABLE);//=B9=D8=B1=D5jtag=A3=AC=CA=B9=C4=DCSWD=A3=
=AC=BF=C9=D2=D4=D3=C3SWD=C4=A3=CA=BD=B5=F7=CA=D4</FONT><BR>&nbsp;=
<FONT color=3D#008000>//if(swd) =0AGPIO_PinRemapConfig(GPIO_Remap=
_SWJ_JTAGDisable, =0AENABLE);//=B9=D8=B1=D5jtag=A3=AC=CA=B9=C4=DC=
SWD=A3=AC=BF=C9=D2=D4=D3=C3SWD=C4=A3=CA=BD=B5=F7=CA=D4</FONT><BR>=
&nbsp;<FONT color=3D#008000>//else =0AGPIO_PinRemapConfig(GPIO_Re=
map_SWJ_Disable, ENABLE); // =0A=B9=D8=B1=D5jtag=A3=AC=B9=D8=B1=D5=
SWD=A3=AC=D6=BB=C4=DC=CA=B9=D3=C3=B4=AE=BF=DA=C9=D5=C2=BC</FONT><=
BR>&nbsp;<FONT color=3D#008000>// IO =0Adefault</FONT><BR>&nbsp;Q=
iFreeIO_Default(map<FONT color=3D#333399>+</FONT><FONT =0Acolor=3D=
#6e00aa>32</FONT>);<BR>&nbsp;<FONT color=3D#008000>// IO =0ASelec=
t</FONT><BR>&nbsp;<FONT color=3D#008000>// =BB=F1=C8=A1=CF=E0=D3=A6=
=B5=C4 =0AIO=BA=AF=CA=FD=BC=AF</FONT><BR>&nbsp;key_low <FONT colo=
r=3D#333399>=3D</FONT> (map[<FONT =0Acolor=3D#6e00aa>13</FONT>]<F=
ONT color=3D#333399>&gt;&gt;</FONT><FONT =0Acolor=3D#6e00aa>16</F=
ONT>)<FONT color=3D#333399>&amp;</FONT>0x1;<BR>&nbsp;led_low =0A<=
FONT color=3D#333399>=3D</FONT> (map[<FONT color=3D#6e00aa>15</FO=
NT>]<FONT =0Acolor=3D#333399>&gt;&gt;</FONT><FONT color=3D#6e00aa=
>16</FONT>)<FONT =0Acolor=3D#333399>&amp;</FONT>0x1;<BR>&nbsp;<FO=
NT =0Acolor=3D#008000>//newQiFree_ioObj(&amp;Qi, 1, 1); // LED=B5=
=CD=B5=E7=C6=BD=C1=C1, =0AKEY=B5=CD=B5=E7=C6=BD=D3=D0=D0=A7</FONT=
><BR>&nbsp;newQiFree_ioObj(<FONT color=3D#333399>&amp;</FONT>Qi,=20=
=0Aled_low, key_low); <FONT color=3D#008000>// LED=B5=CD=B5=E7=C6=
=BD=C1=C1, =0AKEY=B5=CD=B5=E7=C6=BD=D3=D0=D0=A7</FONT><BR>&nbsp;Q=
iFreeIO_config(map<FONT color=3D#333399>+</FONT><FONT =0Acolor=3D=
#6e00aa>12</FONT>, <FONT =0Acolor=3D#333399>&amp;</FONT>key);<BR>=
&nbsp;QiFreeIO_config(map<FONT =0Acolor=3D#333399>+</FONT><FONT c=
olor=3D#6e00aa>14</FONT>, <FONT =0Acolor=3D#333399>&amp;</FONT>le=
d1);<BR>&nbsp;QiFreeIO_config(map<FONT =0Acolor=3D#333399>+</FONT=
><FONT color=3D#6e00aa>16</FONT>, <FONT =0Acolor=3D#333399>&amp;<=
/FONT>led2);<BR>&nbsp;Qi.led_init(<FONT =0Acolor=3D#333399>&amp;<=
/FONT>led1);<BR>&nbsp;Qi.led_init(<FONT =0Acolor=3D#333399>&amp;<=
/FONT>led2);<BR>&nbsp;Qi.key_init(<FONT =0Acolor=3D#333399>&amp;<=
/FONT>key);<BR>}<BR><FONT color=3D#0000ff><B>void</B></FONT> =0AQ=
iFreeConfigLog(uint32_t map[])<BR>{<BR>&nbsp;<FONT =0Acolor=3D#00=
00ff><B>int</B></FONT> led_low<FONT color=3D#333399>=3D</FONT><FO=
NT =0Acolor=3D#6e00aa>0</FONT>;<BR>&nbsp;<FONT color=3D#0000ff><B=
>int</B></FONT> =0Akey_low<FONT color=3D#333399>=3D</FONT><FONT =0A=
color=3D#6e00aa>0</FONT>;<BR>&nbsp;uint32_t KB<FONT color=3D#3333=
99>=3D</FONT><FONT =0Acolor=3D#6e00aa>128</FONT>;<BR>&nbsp;uint32=
_t swd<FONT color=3D#333399>=3D</FONT><FONT =0Acolor=3D#6e00aa>1<=
/FONT>;<BR>&nbsp;<FONT color=3D#0000ff><B>int</B></FONT> i<FONT =0A=
color=3D#333399>=3D</FONT><FONT color=3D#6e00aa>0</FONT>;<BR>&nbs=
p;uint32_t <FONT =0Acolor=3D#333399>*</FONT>gpio_value<FONT color=
=3D#333399>=3D</FONT>NULL;<BR>&nbsp;<FONT =0Acolor=3D#008000>/***=
********************* Log =0A*****************************/</FONT=
><BR>&nbsp;<FONT =0Acolor=3D#008000>//printf("\r\n\r\nBootloader=20=
version =0A0.16.2\r\n");</FONT>&nbsp;<BR>&nbsp;<FONT color=3D#008=
000>//printf("\r\n\r\n%s =0AQiFreeUSBS update version %d.%d.%d\r\=
n", PRODUCT, VERSION, PATCHLEVEL, =0ASUBLEVEL);</FONT><BR>&nbsp;<=
FONT color=3D#008000>//printf("%s", =0ADescription);</FONT><BR>&n=
bsp;<FONT color=3D#008000>//printf("Date: %s--%s\r\n", =0A__TIME_=
_, __DATE__);</FONT><BR>&nbsp;<FONT =0Acolor=3D#008000>//printf("=
F_SIZE:%04X\r\n", =0A(*(vu32*)(0x1ffff7e0))&amp;0xFFFF);</FONT><B=
R>&nbsp;<FONT =0Acolor=3D#008000>//match_Read(LinkAddress, (uint1=
6_t*)buf, 1024/2); // =0A20K</FONT><BR>&nbsp;<FONT color=3D#00800=
0>//map =3D (uint32_t =0A*)LinkAddress;</FONT><BR>&nbsp;<FONT col=
or=3D#008000>//config =3D =0A(uint32_t*)(buf+48);</FONT><BR>&nbsp=
;key_low <FONT color=3D#333399>=3D</FONT> =0A(map[<FONT color=3D#=
6e00aa>13</FONT>]<FONT color=3D#333399>&gt;&gt;</FONT><FONT =0Aco=
lor=3D#6e00aa>16</FONT>)<FONT color=3D#333399>&amp;</FONT>0x1;<BR=
>&nbsp;led_low =0A<FONT color=3D#333399>=3D</FONT> (map[<FONT col=
or=3D#6e00aa>15</FONT>]<FONT =0Acolor=3D#333399>&gt;&gt;</FONT><F=
ONT color=3D#6e00aa>16</FONT>)<FONT =0Acolor=3D#333399>&amp;</FON=
T>0x1;<BR>&nbsp;<FONT color=3D#008000>//printf("\r\n%s =0AQiFreeU=
SBS version %d.%d.%d\r\n", buf+18*4, VERSION, PATCHLEVEL, =0ASUBL=
EVEL);</FONT><BR>&nbsp;<FONT color=3D#008000>//printf("\r\n%s QiF=
reeUSBS =0Aversion %s.%s.%s\r\n", (char*)(map+18), VERSION, PATCH=
LEVEL, =0ASUBLEVEL);</FONT><BR>&nbsp;printf(<FONT color=3D#ff00bf=
>"QiFreeUSBS version =0A%s.%s.%s\r\n"</FONT>, VERSION, PATCHLEVEL=
, SUBLEVEL);<BR>&nbsp;<FONT =0Acolor=3D#008000>//printf("%s", buf=
+0xA0); // 40*4</FONT><BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"=
%s"</FONT>, Description);<BR>&nbsp;printf(<FONT =0Acolor=3D#ff00b=
f>"Date: %s--%s\r\n"</FONT>, __TIME__, __DATE__);<BR>&nbsp;<FONT=20=
=0Acolor=3D#008000>//printf("Date: %s--%s\r\n", buf+0xE0, buf+0xD=
0); // VERSION: =0A0x40, 0x30</FONT><BR>&nbsp;<FONT color=3D#0080=
00>//printf("%s", buf+0xD0); // =0AVERSION: 0x30</FONT><BR>&nbsp;=
KB <FONT color=3D#333399>=3D</FONT> (<FONT =0Acolor=3D#333399>*</=
FONT>(vu32<FONT color=3D#333399>*</FONT>)(0x1ffff7e0))<FONT =0Aco=
lor=3D#333399>&amp;</FONT>0xFFFF;<BR>&nbsp;<FONT =0Acolor=3D#0080=
00>//printf("F_SIZE:%04X\r\n", =0A(*(vu32*)(0x1ffff7e0))&amp;0xFF=
FF);</FONT><BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"F_SIZE:%04X=
\r\n"</FONT>, KB);<BR>&nbsp;<FONT =0Acolor=3D#008000>//printf("Fl=
ash Address: %08X\r\n", =0ALinkAddress);</FONT><BR>&nbsp;<FONT co=
lor=3D#008000>//printf("ApplicationAddress: =0A%08X\r\n", Applica=
tionAddress);</FONT><BR>&nbsp;printf(<FONT color=3D#ff00bf>"KEY =0A=
: P%c_%d\r\n"</FONT>, map[<FONT color=3D#6e00aa>12</FONT>], map[<=
FONT =0Acolor=3D#6e00aa>13</FONT>]<FONT =0Acolor=3D#333399>&amp;<=
/FONT>0xFFFF);<BR>&nbsp;printf(<FONT color=3D#ff00bf>"LED1: =0AP%=
c_%d\r\n"</FONT>, map[<FONT color=3D#6e00aa>14</FONT>], map[<FONT=
 =0Acolor=3D#6e00aa>15</FONT>]<FONT =0Acolor=3D#333399>&amp;</FON=
T>0xFFFF);<BR>&nbsp;printf(<FONT color=3D#ff00bf>"LED2: =0AP%c_%d=
\r\n"</FONT>, map[<FONT color=3D#6e00aa>16</FONT>], map[<FONT =0A=
color=3D#6e00aa>17</FONT>]<FONT =0Acolor=3D#333399>&amp;</FONT>0x=
FFFF);<BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"led_low:%d\r\n"<=
/FONT>, led_low);<BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"key_l=
ow:%d\r\n"</FONT>, key_low);<BR>&nbsp;<FONT color=3D#008000>// =0A=
| swd| erase| flashH| flashL|</FONT><BR>&nbsp;<FONT color=3D#0080=
00>//KB =3D =0A*(uint32_t*)(buf+8);</FONT><BR>&nbsp;KB <FONT colo=
r=3D#333399>=3D</FONT> map[<FONT =0Acolor=3D#6e00aa>2</FONT>];<BR=
>&nbsp;<FONT color=3D#008000>//erase =3D =0A(KB&gt;&gt;16)&amp;0x=
1;</FONT><BR>&nbsp;swd <FONT color=3D#333399>=3D</FONT> =0A(KB<FO=
NT color=3D#333399>&gt;&gt;</FONT><FONT color=3D#6e00aa>24</FONT>=
)<FONT =0Acolor=3D#333399>&amp;</FONT>0x1;<BR>&nbsp;KB <FONT colo=
r=3D#333399>=3D</FONT> (<FONT =0Acolor=3D#333399>*</FONT>(vu32<FO=
NT color=3D#333399>*</FONT>)(0x1FFF7A22))<FONT =0Acolor=3D#333399=
>&amp;</FONT>0xFFFF;<BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"Fl=
ash:%08X\r\n"</FONT>, KB);<BR>&nbsp;<FONT =0Acolor=3D#008000>//pr=
intf("Flash:%dKB\r\n", =0AKB&amp;0x0000FFFF);</FONT><BR>&nbsp;Use=
rData <FONT color=3D#333399>=3D</FONT> =0AKB<FONT color=3D#333399=
>&amp;</FONT>0x0000FFFF;<BR>&nbsp;<FONT =0Acolor=3D#0000ff><B>if<=
/B></FONT>(UserData<FONT color=3D#333399>&gt;</FONT><FONT =0Acolo=
r=3D#6e00aa>32</FONT>) UserData<FONT color=3D#333399>=3D</FONT><F=
ONT =0Acolor=3D#6e00aa>32</FONT>;<BR>&nbsp;printf(<FONT =0Acolor=3D=
#ff00bf>"UserData:%dKB\r\n"</FONT>, KB<FONT =0Acolor=3D#333399>&a=
mp;</FONT>0x0000FFFF);<BR>&nbsp;<FONT =0Acolor=3D#008000>//printf=
("Flash:%08X\r\n", KB);</FONT><BR>&nbsp;<FONT =0Acolor=3D#008000>=
//printf("erase:%s\r\n", =0Aerase?"Enable":"DisEnable");</FONT><B=
R>&nbsp;<FONT =0Acolor=3D#008000>//printf("swd:%s\r\n", =0Aswd?"E=
nable":"DisEnable");</FONT><BR>&nbsp;<FONT =0Acolor=3D#008000>//p=
rintf("erase:%s\r\n", =0AEnable[erase&amp;0x1]);</FONT><BR>&nbsp;=
<FONT =0Acolor=3D#008000>//printf("swd:%s\r\n", =0AEnable[swd&amp=
;0x1]);</FONT><BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"swd:%s\r=
\n"</FONT>, Enable[swd]);<BR>&nbsp;<FONT =0Acolor=3D#008000>//gpi=
o_value =3D (uint32_t*)(buf+32*4);</FONT><BR>&nbsp;gpio_value =0A=
<FONT color=3D#333399>=3D</FONT> map<FONT color=3D#333399>+</FONT=
><FONT =0Acolor=3D#6e00aa>32</FONT>;<BR>&nbsp;<FONT color=3D#0000=
ff><B>for</B></FONT>(i<FONT =0Acolor=3D#333399>=3D</FONT><FONT co=
lor=3D#6e00aa>0</FONT>; i<FONT =0Acolor=3D#333399>&lt;</FONT><FON=
T color=3D#6e00aa>7</FONT>; i<FONT =0Acolor=3D#333399>++</FONT>)=20=
<FONT color=3D#008000>// {A,B,C,D,E,F,G} =0A7</FONT><BR>&nbsp;{<B=
R>&nbsp;&nbsp;<FONT color=3D#008000>//printf("GPIO%c:%04X =0A%s\r=
\n", (char)('A'+led), *gpio_value&amp;0xFFFF, =0A((*gpio_value&gt=
;&gt;16)&amp;0x1)?"Enable":"DisEnable");</FONT><BR>&nbsp;&nbsp;pr=
intf(<FONT =0Acolor=3D#ff00bf>"GPIO%c:%04X Enable:%04X\r\n"</FONT=
>, (<FONT =0Acolor=3D#0000ff><B>char</B></FONT>)(<FONT color=3D#f=
f00bf>'A'</FONT><FONT =0Acolor=3D#333399>+</FONT>i), <FONT color=3D=
#333399>*</FONT>gpio_value<FONT =0Acolor=3D#333399>&amp;</FONT>0x=
FFFF, (<FONT color=3D#333399>*</FONT>gpio_value<FONT =0Acolor=3D#=
333399>&gt;&gt;</FONT><FONT color=3D#6e00aa>16</FONT>)<FONT =0Aco=
lor=3D#333399>&amp;</FONT>0xFFFF);<BR>&nbsp;&nbsp;gpio_value<FONT=
 =0Acolor=3D#333399>++</FONT>;<BR>&nbsp;}<BR>&nbsp;<FONT =0Acolor=
=3D#008000>//printf("Board:%s\r\n", buf+18*4);</FONT><BR>&nbsp;<F=
ONT =0Acolor=3D#008000>//printf("Date:%s\r\n", buf+22*4);</FONT><=
BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"Board:%s\r\n"</FONT>, (=
<FONT =0Acolor=3D#0000ff><B>char</B></FONT><FONT color=3D#333399>=
*</FONT>)(map<FONT =0Acolor=3D#333399>+</FONT><FONT color=3D#6e00=
aa>18</FONT>));<BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"Date:%s=
\r\n"</FONT>, (<FONT color=3D#0000ff><B>char</B></FONT><FONT =0Ac=
olor=3D#333399>*</FONT>)(map<FONT color=3D#333399>+</FONT><FONT =0A=
color=3D#6e00aa>22</FONT>));<BR>&nbsp;<FONT =0Acolor=3D#008000>//=
printf("0x08004C20:%s", =0A(char*)0x08004C20);</FONT><BR>&nbsp;<F=
ONT =0Acolor=3D#008000>//printf("0x08004C50:%s", =0A(char*)0x0800=
4C40);</FONT><BR>&nbsp;printf(<FONT =0Acolor=3D#ff00bf>"0x080000F=
0:%s\r\n"</FONT>, (<FONT =0Acolor=3D#0000ff><B>char</B></FONT><FO=
NT =0Acolor=3D#333399>*</FONT>)0x080000F0);<BR>&nbsp;<FONT =0Acol=
or=3D#008000>//printf("0x08000120:%s", =0A(char*)0x08000120);</FO=
NT><BR>&nbsp;<FONT =0Acolor=3D#008000>/*<BR>&nbsp;printf("__Vecto=
rs: %08X\r\n", =0A__Vectors);<BR>&nbsp;printf("__Vectors_End: %08=
X\r\n", =0A__Vectors_End);<BR>&nbsp;printf("__Vectors_Size: %08X\=
r\n", =0A__Vectors_Size);<BR>&nbsp;printf("Reset_Handler: %08X\r\=
n", =0AReset_Handler);<BR>&nbsp;printf("&amp;__Vectors: %08X\r\n"=
, =0A&amp;__Vectors);<BR>&nbsp;printf("&amp;__Vectors_End: %08X\r=
\n", =0A&amp;__Vectors_End);<BR>&nbsp;printf("&amp;__Vectors_Size=
: %08X\r\n", =0A&amp;__Vectors_Size);<BR>&nbsp;printf("&amp;Reset=
_Handler: %08X\r\n", =0A&amp;Reset_Handler);<BR>&nbsp;*/</FONT><B=
R>}</DIV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt;=
 WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM:=
 none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal;=20=
LETTER-SPACING: normal; orphans: auto; widows: auto; webkit-text-=
stroke-width: 0px"><BR>=B4=FA=C2=EB=B1=C8=BD=CF=B3=A4=A3=AC=D2=F2=
=CE=AA=C6=E4=D6=D0=B5=F7=CA=D4=D0=C5=CF=A2=CE=D2=B2=A2=C3=BB=D3=D0=
=C8=A5=B5=F4=A1=A3=C8=BB=BA=F3=CE=D2=C3=C7=BE=CD=CA=C7=D0=DE=B8=C4=
 =0Amain=BA=AF=CA=FD=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORDER-RIGH=
T: black 1px solid; PADDING-RIGHT: 3px; BORDER-TOP: black 1px sol=
id; PADDING-LEFT: 3px; FONT-SIZE: 12px; MARGIN-LEFT: auto; BORDER=
-LEFT: black 1px solid; COLOR: black; MARGIN-RIGHT: auto; PADDING=
-TOP: 3px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY: Courier N=
ew; BACKGROUND-COLOR: window; TEXT-ALIGN: left; 3px: "><FONT =0Ac=
olor=3D#0000ff><B>int</B></FONT> main(<FONT =0Acolor=3D#0000ff><B=
>void</B></FONT>)<BR>{<BR>&nbsp;<FONT color=3D#008000>//uint8_t =0A=
down=3D0;</FONT><BR><FONT color=3D#008000>// Board_LEDInit(LED1);=
</FONT><BR><FONT =0Acolor=3D#008000>// Board_LEDInit(LED2);</FONT=
><BR><FONT color=3D#008000>// =0ABoard_PBInit();</FONT><BR>&nbsp;=
QiFreeConfigIO((uint32_t<FONT =0Acolor=3D#333399>*</FONT>)LinkAdd=
ress);<BR>&nbsp;code_entry();<BR>&nbsp;uart_init(<FONT =0Acolor=3D=
#6e00aa>115200</FONT>);<BR>&nbsp;QiFreeConfigLog((uint32_t<FONT =0A=
color=3D#333399>*</FONT>)LinkAddress);<BR>&nbsp;<FONT =0Acolor=3D=
#008000>//printf("QiFreeUSBS version %s.%s.%s\r\n", VERSION, PATC=
HLEVEL, =0ASUBLEVEL);</FONT><BR>&nbsp;mount_storage();&nbsp;<BR>&=
nbsp;<FONT =0Acolor=3D#0000ff><B>while</B></FONT> (<FONT =0Acolor=
=3D#6e00aa>1</FONT>)<BR>&nbsp;{<BR><FONT =0Acolor=3D#008000>//&nb=
sp;&nbsp;Board_LEDToggle(LED1);</FONT><BR><FONT =0Acolor=3D#00800=
0>//&nbsp;&nbsp;Board_LEDToggle(LED2);</FONT><BR>&nbsp;&nbsp;Qi.r=
eversal(<FONT =0Acolor=3D#333399>&amp;</FONT>led1);<BR>&nbsp;&nbs=
p;Qi.reversal(<FONT =0Acolor=3D#333399>&amp;</FONT>led2);<BR>&nbs=
p;&nbsp;<FONT color=3D#008000>//down =3D =0ABoard_PBGetState();</=
FONT><BR>&nbsp;&nbsp;<FONT color=3D#008000>//down =3D =0A(~down)&=
amp;0x1;</FONT><BR>&nbsp;&nbsp;<FONT color=3D#008000>//printf("wa=
itting =0A...\r\n");</FONT><BR>&nbsp;&nbsp;<FONT color=3D#008000>=
//printf("KEY:%d\r\n", =0Adown);</FONT><BR>&nbsp;&nbsp;delay_ms(<=
FONT =0Acolor=3D#6e00aa>500</FONT>);&nbsp;&nbsp;&nbsp;<BR>&nbsp;}=
<BR>} </DIV>=0A<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0=
pt; WORD-SPACING: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFO=
RM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: norma=
l; LETTER-SPACING: normal; orphans: auto; widows: auto; webkit-te=
xt-stroke-width: 0px"><BR>=B2=A2=B0=D1 =0ABoard.c=B4=D3=B9=A4=B3=CC=
=D5=D2=C4=C7=B8=F6=C9=BE=B3=FD=A3=ACLED=B8=FA KEY=C8=AB=B2=BF=B8=C4=
=CE=AA=D3=C9 Qi=BD=F8=D0=D0=B2=D9=D7=F7=A3=AC=D6=AE=BA=F3=BE=CD=BF=
=C9=D2=D4=CF=C2=D4=D8=B2=E2=CA=D4=C1=CB=A1=A3=CD=A8=B9=FD=B4=AE=BF=
=DA=CE=D2=C3=C7=BF=C9=D2=D4=B9=DB=B2=EC=B5=BD=C8=E7=CF=C2=D0=C5=CF=
=A2=A3=BA<BR></P>=0A<DIV =0Astyle=3D"BORDER-RIGHT: black 1px soli=
d; PADDING-RIGHT: 3px; BORDER-TOP: black 1px solid; PADDING-LEFT:=
 3px; FONT-SIZE: 12px; MARGIN-LEFT: auto; BORDER-LEFT: black 1px=20=
solid; COLOR: black; MARGIN-RIGHT: auto; PADDING-TOP: 3px; BORDER=
-BOTTOM: black 1px solid; FONT-FAMILY: Courier New; BACKGROUND-CO=
LOR: window; TEXT-ALIGN: left; 3px: ">QiFreeUSBS =0Aversion <FONT=
 color=3D#6e00aa>1</FONT>.<FONT color=3D#6e00aa>24</FONT>.<FONT =0A=
color=3D#6e00aa>8</FONT><BR><FONT color=3D#333399>*</FONT> =0AAut=
hor&nbsp;&nbsp;&nbsp;<FONT color=3D#333399>:</FONT> merafour.blog=
.<FONT =0Acolor=3D#6e00aa>163</FONT>.com<BR><FONT color=3D#333399=
>*</FONT> =0AVersion&nbsp;&nbsp;<FONT color=3D#333399>:</FONT> V1=
.<FONT =0Acolor=3D#6e00aa>0</FONT>.<FONT color=3D#6e00aa>0</FONT>=
<BR><FONT =0Acolor=3D#333399>*</FONT> Date&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;<FONT =0Acolor=3D#333399>:</FONT> <FONT color=3D#6e00aa>2<=
/FONT><FONT =0Acolor=3D#333399>/</FONT><FONT color=3D#6e00aa>26</=
FONT><FONT =0Acolor=3D#333399>/</FONT><FONT color=3D#6e00aa>2015<=
/FONT><BR>Date<FONT =0Acolor=3D#333399>:</FONT> <FONT color=3D#6e=
00aa>17</FONT><FONT =0Acolor=3D#333399>:</FONT><FONT color=3D#6e0=
0aa>39</FONT><FONT =0Acolor=3D#333399>:</FONT><FONT color=3D#6e00=
aa>10</FONT><FONT =0Acolor=3D#333399>--</FONT>Jun <FONT color=3D#=
6e00aa>17</FONT> <FONT =0Acolor=3D#6e00aa>2015</FONT><BR>F_SIZE<F=
ONT color=3D#333399>:</FONT>FFFF<BR>KEY <FONT =0Acolor=3D#333399>=
:</FONT> PE_4<BR>LED1<FONT color=3D#333399>:</FONT> =0APF_9<BR>LE=
D2<FONT color=3D#333399>:</FONT> PF_10<BR>led_low<FONT =0Acolor=3D=
#333399>:</FONT><FONT color=3D#6e00aa>1</FONT><BR>key_low<FONT =0A=
color=3D#333399>:</FONT><FONT color=3D#6e00aa>0</FONT><BR>Flash<F=
ONT =0Acolor=3D#333399>:</FONT><FONT color=3D#6e00aa>00000400</FO=
NT><BR>UserData<FONT =0Acolor=3D#333399>:</FONT><FONT color=3D#6e=
00aa>1024KB</FONT><BR>swd<FONT =0Acolor=3D#333399>:</FONT>Enable<=
BR>GPIOA<FONT color=3D#333399>:</FONT>0000 =0AEnable<FONT color=3D=
#333399>:</FONT>0000<BR>GPIOB<FONT color=3D#333399>:</FONT>0000 =0A=
Enable<FONT color=3D#333399>:</FONT>0000<BR>GPIOC<FONT color=3D#3=
33399>:</FONT>0000 =0AEnable<FONT color=3D#333399>:</FONT>0000<BR=
>GPIOD<FONT color=3D#333399>:</FONT>0000 =0AEnable<FONT color=3D#=
333399>:</FONT>0000<BR>GPIOE<FONT color=3D#333399>:</FONT>0000 =0A=
Enable<FONT color=3D#333399>:</FONT>0000<BR>GPIOF<FONT color=3D#3=
33399>:</FONT>0000 =0AEnable<FONT color=3D#333399>:</FONT>0000<BR=
>GPIOG<FONT color=3D#333399>:</FONT>0000 =0AEnable<FONT color=3D#=
333399>:</FONT>0000<BR>Board<FONT =0Acolor=3D#333399>:</FONT>QiFr=
ee<BR>Date<FONT =0Acolor=3D#333399>:</FONT><BR>0x080000F0<FONT co=
lor=3D#333399>:</FONT><FONT =0Acolor=3D#333399>?</FONT>=01</DIV>=0A=
<P class=3DMsoNormal =0Astyle=3D"MARGIN: 0cm 0cm 0pt; WORD-SPACIN=
G: 0px; FONT: 12px/16px =CB=CE=CC=E5; TEXT-TRANSFORM: none; COLOR=
: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACI=
NG: normal; orphans: auto; widows: auto; webkit-text-stroke-width=
: 0px"><BR>=D5=E2=B1=ED=CA=BE=CE=D2=C3=C7=B5=C4=B6=CB=BF=DA=C5=E4=
=D6=C3=B9=A6=C4=DC=D5=FD=B3=A3=A1=A3=B5=AB=D5=E2=B8=F6=CA=B1=BA=F2=
=CE=D2=C3=C7=CA=B9=D3=C3=B5=C4=CA=C7=B3=CC=D0=F2=D6=D0=C9=E8=D6=C3=
=B5=C4=C4=AC=C8=CF=D6=B5=A3=AC=CF=C2=C3=E6=CE=D2=C3=C7=BD=AB=CD=A8=
=B9=FD=C9=CF=CE=BB=BB=FA=C8=ED=BC=FE=BD=F8=D0=D0=C5=E4=D6=C3=A1=A3=
=D3=C9=D3=DA=C6=AA=B7=F9=B5=C4=D4=AD=D2=F2=A3=AC=CE=D2=C3=C7=BD=AB=
=D4=DA=CF=C2=D2=BB=D5=C2=BD=B2=CB=DF=C8=E7=BA=CE=CA=B9=D3=C3=C5=E4=
=D6=C3=C8=ED=BC=FE=BD=F8=D0=D0=C5=E4=D6=C3=A1=A3<BR><BR><BR></P><=
/BODY></HTML>=0A

------=_Next_Part_0058331796.604--

------=_Next_Part_0174995388.391--

